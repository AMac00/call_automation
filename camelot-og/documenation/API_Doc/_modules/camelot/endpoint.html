
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>camelot.endpoint &#8212; Camelot Python SDK v12.6.22.12.0.0 documentation</title>
    <link rel="stylesheet" href="../../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Camelot Python SDK v12.6.22.12.0.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Module code</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../camelot.html" accesskey="U">camelot</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for camelot.endpoint</h1><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">camelot</span>
<span class="kn">from</span> <span class="nn">camelot</span> <span class="k">import</span> <span class="n">camlogger</span><span class="p">,</span> <span class="n">FaxProfile</span><span class="p">,</span> <span class="n">DivaFaxOptions</span><span class="p">,</span> <span class="n">DivaFaxMaxSpeed</span>
<span class="kn">import</span> <span class="nn">inspect</span>
<span class="kn">from</span> <span class="nn">camelot.utils</span> <span class="k">import</span> <span class="n">common_utils</span>
<span class="kn">from</span> <span class="nn">camelot.vapi.vapi_endpoint_query_control</span> <span class="k">import</span> <span class="n">CamelotEndpointControl</span>
<span class="kn">from</span> <span class="nn">camelot.vapi.vapi_call_control</span> <span class="k">import</span> <span class="n">CamelotCallControl</span>
<span class="kn">from</span> <span class="nn">camelot.vapi.vapi_supplementary_features</span> <span class="k">import</span> <span class="n">CamelotSFeatureControl</span>
<span class="kn">from</span> <span class="nn">camelot.vapi.vapi_auto_operations</span> <span class="k">import</span> <span class="n">CamelotAutoOperation</span>
<span class="kn">from</span> <span class="nn">camelot.vapi.vapi_imp_uds_control</span> <span class="k">import</span> <span class="n">CamelotIMPUdsControl</span>
<span class="kn">from</span> <span class="nn">camelot.vapi.vapi_media_control</span> <span class="k">import</span> <span class="n">CamelotMediaControl</span>
<span class="kn">from</span> <span class="nn">camelot.vapi.vapi_vvm_features</span> <span class="k">import</span> <span class="n">CamelotVVMFeatures</span>
<span class="kn">from</span> <span class="nn">camelot.vapi.vapi_button</span> <span class="k">import</span> <span class="n">CamelotButtonOperation</span>
<span class="kn">from</span> <span class="nn">camelot.vapi.vapi_ippservices</span> <span class="k">import</span> <span class="n">CamelotIPPServices</span>
<span class="kn">from</span> <span class="nn">camelot.vapi.vapi_xmpp_operation</span> <span class="k">import</span> <span class="n">CamelotXMPPOperations</span>
<span class="kn">from</span> <span class="nn">camelot.vapi.vapi_cti_feature</span> <span class="k">import</span> <span class="n">CamelotCTIFeature</span>
<span class="kn">from</span> <span class="nn">camelot.vapi.vapi_cas_features</span> <span class="k">import</span> <span class="n">CamelotCasOperation</span>
<span class="kn">from</span> <span class="nn">camelot.utils.rawendpoint_helper</span> <span class="k">import</span> <span class="n">InActionObject</span>
<span class="kn">from</span> <span class="nn">camelot.utils.customheader_helper</span> <span class="k">import</span> <span class="n">CustomHeadersObject</span>
<span class="kn">from</span> <span class="nn">camelot.vapi.vapi_headset_operations</span> <span class="k">import</span> <span class="n">CamelotHeadsetOperation</span>
<span class="kn">import</span> <span class="nn">string</span>


<span class="n">log</span> <span class="o">=</span> <span class="n">camlogger</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>


<div class="viewcode-block" id="CamelotEndpoint"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint">[docs]</a><span class="k">class</span> <span class="nc">CamelotEndpoint</span><span class="p">(</span><span class="n">CamelotEndpointControl</span><span class="p">,</span> <span class="n">CamelotCallControl</span><span class="p">,</span>
                      <span class="n">CamelotSFeatureControl</span><span class="p">,</span> <span class="n">CamelotAutoOperation</span><span class="p">,</span>
                      <span class="n">CamelotIMPUdsControl</span><span class="p">,</span> <span class="n">CamelotMediaControl</span><span class="p">,</span>
                      <span class="n">CamelotVVMFeatures</span><span class="p">,</span> <span class="n">CamelotButtonOperation</span><span class="p">,</span>
                      <span class="n">CamelotIPPServices</span><span class="p">,</span> <span class="n">CamelotXMPPOperations</span><span class="p">,</span>
                      <span class="n">CamelotCasOperation</span><span class="p">,</span> <span class="n">CamelotCTIFeature</span><span class="p">,</span>
                      <span class="n">CamelotHeadsetOperation</span><span class="p">,</span> <span class="nb">object</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ep_id</span><span class="p">,</span> <span class="n">camelot_server_conn</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">server_conn</span> <span class="o">=</span> <span class="n">camelot_server_conn</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ep_id</span> <span class="o">=</span> <span class="n">ep_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_callback</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_callbackdict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_valid</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_callbackarg</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">func_generic_cmd</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">args_generic_cmd</span> <span class="o">=</span> <span class="p">{}</span>

<div class="viewcode-block" id="CamelotEndpoint.reset_to_default"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.reset_to_default">[docs]</a>    <span class="k">def</span> <span class="nf">reset_to_default</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">camelot_server_conn</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;This resets the endpoint to default when connection</span>
<span class="sd">        to camelot is restablised , It can be overridden by the user</span>
<span class="sd">        to reset the endpoint to default&#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">server_conn</span> <span class="o">=</span> <span class="n">camelot_server_conn</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_callback</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_callbackdict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_valid</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_callbackarg</span> <span class="o">=</span> <span class="p">{}</span></div>

<div class="viewcode-block" id="CamelotEndpoint.run_bcg_auto_cmd"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.run_bcg_auto_cmd">[docs]</a>    <span class="k">def</span> <span class="nf">run_bcg_auto_cmd</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">func_generic_cmd</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">camelot</span><span class="o">.</span><span class="n">CamelotError</span><span class="p">(</span><span class="s1">&#39;function not set in endpoint&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">func_generic_cmd</span><span class="p">(</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">args_generic_cmd</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_is_valid_object</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_valid</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">camelot</span><span class="o">.</span><span class="n">CamelotError</span><span class="p">(</span><span class="s1">&#39;invalid endpoint address&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">ip</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_valid_object</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_server_conn</span><span class="p">()</span><span class="o">.</span><span class="n">server_ip</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">port</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_valid_object</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_server_conn</span><span class="p">()</span><span class="o">.</span><span class="n">server_port</span>

    <span class="k">def</span> <span class="nf">_get_server_conn</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">server_conn</span><span class="o">.</span><span class="n">_stopped</span><span class="p">):</span>
            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;connection to camelot is stopped&#39;</span><span class="p">)</span>
            <span class="n">serv</span> <span class="o">=</span> <span class="n">camelot</span><span class="o">.</span><span class="n">get_camelot_server</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">server_conn</span><span class="o">.</span><span class="n">server_ip</span><span class="p">,</span>
                                              <span class="bp">self</span><span class="o">.</span><span class="n">server_conn</span><span class="o">.</span><span class="n">server_port</span><span class="p">)</span>
            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;trying to re-establish server connection&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">server_conn</span> <span class="o">=</span> <span class="n">serv</span><span class="o">.</span><span class="n">_get_server_conn</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">serv</span><span class="o">.</span><span class="n">_get_server_conn</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">server_conn</span>

<div class="viewcode-block" id="CamelotEndpoint.config_ep_dict"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.config_ep_dict">[docs]</a>    <span class="k">def</span> <span class="nf">config_ep_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">param_value_dict</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Set&#39;s list of parameters to the Endpoint</span>
<span class="sd">        Passed dictionary will be used as param:value pair and all the params</span>
<span class="sd">        will be set on the Endpoint , if there is any invalid param or error in</span>
<span class="sd">        setting the params exception will be raised</span>

<span class="sd">        :parameter param_value_dict: dictionary of the param:value pairs</span>

<span class="sd">        :returns: Returns the dictionary of results returned for each set</span>

<span class="sd">        &gt;&gt;&gt; import camelot</span>
<span class="sd">        &gt;&gt;&gt; params = {&#39;sip.phone.ip&#39;:&#39;10.20.1.3&#39;,</span>
<span class="sd">        ...           &#39;sip.phone.tftpip&#39;:&#39;10.20.1.21&#39;,</span>
<span class="sd">        ...           &#39;sip.phone.deviceid&#39;:&#39;1&#39;}</span>
<span class="sd">        &gt;&gt;&gt; ep1 = camelot.create_new_endpoint(&#39;10.106.248.199&#39;, 5004, &#39;sipx&#39;,</span>
<span class="sd">        ...                                   &#39;SEPBAACBAAC7001&#39;)</span>
<span class="sd">        &gt;&gt;&gt; ep1.config_ep_dict(params)</span>
<span class="sd">        {&#39;sip.phone.deviceid&#39;: &#39;1&#39;, &#39;sip.phone.ip&#39;: &#39;10.20.1.3&#39;,</span>
<span class="sd">         &#39;sip.phone.tftpip&#39;: &#39;10.20.1.21&#39;}</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">param_value_dict</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">param_value_dict</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">camelot</span><span class="o">.</span><span class="n">CamelotError</span><span class="p">(</span>
                <span class="s1">&#39;Pass {parameter: value} dictionary for configuring endpoint&#39;</span><span class="p">)</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">ret_error</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">is_errored</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">order_h264</span> <span class="o">=</span> <span class="s1">&#39;skinny.cap.vidcaps.0.payloadcapability&#39;</span>
        <span class="k">if</span> <span class="n">order_h264</span> <span class="ow">in</span> <span class="n">param_value_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_config_param</span><span class="p">(</span><span class="n">order_h264</span><span class="p">,</span> <span class="n">param_value_dict</span><span class="p">[</span>
                                             <span class="n">order_h264</span><span class="p">])</span>
            <span class="k">del</span> <span class="n">param_value_dict</span><span class="p">[</span><span class="n">order_h264</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                <span class="n">is_errored</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="n">ret_error</span><span class="p">[</span><span class="n">order_h264</span><span class="p">]</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">ret</span><span class="p">[</span><span class="n">order_h264</span><span class="p">]</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">param_value_list</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">param_value_dict</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">param</span> <span class="ow">in</span> <span class="n">param_value_list</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">&#39;nogencertkey&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">param</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_config_param</span><span class="p">(</span>
                    <span class="n">param</span><span class="p">,</span> <span class="n">param_value_dict</span><span class="p">[</span><span class="n">param</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;nogencertkey config not send to camelot&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                <span class="n">is_errored</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="n">ret_error</span><span class="p">[</span><span class="n">param</span><span class="p">]</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">ret</span><span class="p">[</span><span class="n">param</span><span class="p">]</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">is_errored</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">camelot</span><span class="o">.</span><span class="n">CamelotError</span><span class="p">(</span><span class="s1">&#39;Failed to configure one or more &#39;</span>
                                       <span class="s1">&#39;config params: </span><span class="se">\n\t</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">ret_error</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ret</span></div>

    <span class="k">def</span> <span class="nf">_send_config_param</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">param</span><span class="p">,</span> <span class="n">param_value</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">CONFIG</span><span class="p">,</span> <span class="n">param</span><span class="p">,</span>
                                         <span class="nb">str</span><span class="p">(</span><span class="n">param_value</span><span class="p">))</span>
        <span class="k">except</span> <span class="n">camelot</span><span class="o">.</span><span class="n">CamelotError</span> <span class="k">as</span> <span class="n">ce</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;Failed to configure ==</span><span class="si">%s</span><span class="s1">==&#39;</span> <span class="o">%</span> <span class="n">param</span><span class="p">)</span>
            <span class="k">return</span> <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="n">ce</span><span class="o">.</span><span class="n">message</span><span class="p">]</span>
        <span class="k">return</span> <span class="p">[</span><span class="kc">False</span><span class="p">,</span> <span class="n">result</span><span class="p">]</span>

<div class="viewcode-block" id="CamelotEndpoint.config"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.config">[docs]</a>    <span class="k">def</span> <span class="nf">config</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">param</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Set or get the value of a configuration parameter</span>

<span class="sd">        If the &quot;value&quot; is specified, the parameter is set to the new specified</span>
<span class="sd">        value, else this will return the configured value on Endpoint.</span>

<span class="sd">        :parameter param: name of the configuration parameter</span>
<span class="sd">        :parameter value: value to set</span>

<span class="sd">        :returns: If the &quot;value&quot; is specified, the parameter is set to the new</span>
<span class="sd">         specified value, else this will return the configured value on</span>
<span class="sd">         Endpoint.</span>

<span class="sd">        Setting a param for endpoint</span>

<span class="sd">        &gt;&gt;&gt; import camelot</span>
<span class="sd">        &gt;&gt;&gt; ep1 = camelot.create_new_endpoint(&#39;10.106.248.199&#39;, 5004, &#39;sipx&#39;,</span>
<span class="sd">        ...                                   &#39;SEPBAACBAAC7001&#39;)</span>
<span class="sd">        &gt;&gt;&gt; ep1.config(&#39;sip.phone.ip&#39;, &#39;10.20.1.3&#39;)</span>
<span class="sd">        &#39;10.20.1.3&#39;</span>

<span class="sd">        Getting a param value of endpoint</span>

<span class="sd">        &gt;&gt;&gt; import camelot</span>
<span class="sd">        &gt;&gt;&gt; ep1 = camelot.create_new_endpoint(&#39;10.106.248.199&#39;, 5004, &#39;sipx&#39;,</span>
<span class="sd">        ...                                   &#39;SEPBAACBAAC7001&#39;)</span>
<span class="sd">        &gt;&gt;&gt; ep1.config(&#39;sip.phone.deviceid&#39;, &#39;1&#39;)</span>
<span class="sd">        &#39;1&#39;</span>
<span class="sd">        &gt;&gt;&gt; ep1.config(&#39;sip.phone.sip_call_features.meetme_service_uri&#39;, &#39;&#39;)</span>
<span class="sd">        &#39;&#39;</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering config function : &#39;</span>
                  <span class="s1">&#39;param</span><span class="si">{}</span><span class="se">\n</span><span class="s1"> value</span><span class="si">{}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">param</span><span class="p">,</span> <span class="n">value</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="s1">&#39;none&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">CONFIG</span><span class="p">,</span> <span class="n">param</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.init"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.init">[docs]</a>    <span class="k">def</span> <span class="nf">init</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;If the endpoint is in the uninitialized state, this method will</span>
<span class="sd">        read the endpoint&#39;s configuration and initialize the endpoint.</span>

<span class="sd">        :returns: The new state of the endpoint.  If the endpoint is in the</span>
<span class="sd">         uninitialized state, initpending or outofservice will be returned</span>
<span class="sd">         indicating successful start of initialization or successful completion</span>
<span class="sd">         of initialization.  If initialization is not successfully started,</span>
<span class="sd">         camelot.CamelotError will be raised.\n</span>
<span class="sd">         If initialization successfully starts (i.e. initpending is returned),</span>
<span class="sd">         but is unable to complete, the endpoint ultimately returns to the u</span>
<span class="sd">         ninitialized state.  Use the getinfo method to retrieve status</span>
<span class="sd">         information regarding why the endpoint could not be initialized.\n</span>
<span class="sd">         If the endpoint is already initialized then no initialization will</span>
<span class="sd">         take place, and the current state of the endpoint will be returned.</span>

<span class="sd">        &gt;&gt;&gt; import camelot</span>
<span class="sd">        &gt;&gt;&gt; params = {&#39;sip.phone.ip&#39;:&#39;10.20.1.3&#39;,</span>
<span class="sd">        ...           &#39;sip.phone.tftpip&#39;:&#39;10.20.1.21&#39;,</span>
<span class="sd">        ...           &#39;sip.phone.deviceid&#39;:&#39;1&#39;}</span>
<span class="sd">        &gt;&gt;&gt; ep1 = camelot.create_new_endpoint(&#39;10.106.248.199&#39;, 5004, &#39;sipx&#39;,</span>
<span class="sd">        ...                                   &#39;SEPBAACBAAC7001&#39;)</span>
<span class="sd">        &gt;&gt;&gt; ep1.config_ep_dict(params)</span>
<span class="sd">        {&#39;sip.phone.deviceid&#39;: &#39;1&#39;, &#39;sip.phone.ip&#39;: &#39;10.20.1.3&#39;,</span>
<span class="sd">         &#39;sip.phone.tftpip&#39;: &#39;10.20.1.21&#39;}</span>
<span class="sd">        &gt;&gt;&gt; ep1.init()</span>
<span class="sd">        &#39;outofservice&#39;</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering init function&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">INIT</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_release_ep</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">RELEASE_EP</span><span class="p">)</span>

<div class="viewcode-block" id="CamelotEndpoint.inservice"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.inservice">[docs]</a>    <span class="k">def</span> <span class="nf">inservice</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Attempts to bring an out of service endpoint in service.</span>

<span class="sd">        :returns: The new state of the endpoint.  If the endpoint is in any</span>
<span class="sd">         state other than outofservice, no attempt will be made to</span>
<span class="sd">         place the endpoint in service, and the endpoint&#39;s current</span>
<span class="sd">         state will be returned.\n\n</span>
<span class="sd">         If the endpoint is in the outofservice state, and the in</span>
<span class="sd">         service process can be successfully started or completed,</span>
<span class="sd">         this method returns either inservicepending or inservice.</span>
<span class="sd">         If the in service process successfully starts</span>
<span class="sd">         (i.e. inservicepending is returned) but does not complete,</span>
<span class="sd">         the endpoint returns to the outofservice state.  Use the</span>
<span class="sd">         getinfo method to get status information regarding the</span>
<span class="sd">         problem.</span>

<span class="sd">        &gt;&gt;&gt; import camelot</span>
<span class="sd">        &gt;&gt;&gt; params = {&#39;sip.phone.ip&#39;:&#39;10.20.1.3&#39;,</span>
<span class="sd">        ...           &#39;sip.phone.tftpip&#39;:&#39;10.20.1.21&#39;,</span>
<span class="sd">        ...           &#39;sip.phone.deviceid&#39;:&#39;1&#39;}</span>
<span class="sd">        &gt;&gt;&gt; ep1 = camelot.create_new_endpoint(&#39;10.106.248.199&#39;, 5004, &#39;sipx&#39;,</span>
<span class="sd">        ...                                   &#39;SEPBAACBAAC7001&#39;)</span>
<span class="sd">        &gt;&gt;&gt; ep1.config_ep_dict(params)</span>
<span class="sd">        {&#39;sip.phone.deviceid&#39;: &#39;1&#39;, &#39;sip.phone.ip&#39;: &#39;10.20.1.3&#39;,</span>
<span class="sd">         &#39;sip.phone.tftpip&#39;: &#39;10.20.1.21&#39;}</span>
<span class="sd">        &gt;&gt;&gt; ep1.init()</span>
<span class="sd">        &#39;outofservice&#39;</span>
<span class="sd">        &gt;&gt;&gt; ep1.inservice()</span>
<span class="sd">        &#39;inservicepending&#39;</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering inservice function&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">IN_SERVICE</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.client_suspend"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.client_suspend">[docs]</a>    <span class="k">def</span> <span class="nf">client_suspend</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Attempts to bring an inservice endpoint to suspended state.</span>
<span class="sd">        This API can be used only for JabberMobile endpoint.</span>

<span class="sd">        :returns: The endpoint state as inservice_suspended.</span>

<span class="sd">        &gt;&gt;&gt; ep1.client_suspend()</span>
<span class="sd">        &#39;inservice_suspended&#39;</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering client_suspend function&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">CLIENT_SUSPEND</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.client_foreground"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.client_foreground">[docs]</a>    <span class="k">def</span> <span class="nf">client_foreground</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cucm_info</span><span class="o">=</span><span class="p">{}):</span>
        <span class="sd">&#39;&#39;&#39;Attempts to bring a suspended endpoint to in service.</span>
<span class="sd">        This API can be used only for JabberMobile endpoint. If the endpoint</span>
<span class="sd">        state is not inservice_suspended it will not act anything.</span>

<span class="sd">        :parameter cucm_info: new cucm ip info where endpoint need to</span>
<span class="sd">         REGISTER as part of foreground(). This optional parameter can</span>
<span class="sd">         be omitted in case for REGISTER to the same cucm of before suspened.</span>
<span class="sd">         This cucm_info dictionary will have &#39;type&#39; and &#39;value&#39; keys in it.</span>
<span class="sd">         Below are the possible values of &#39;type&#39; key are: \n</span>
<span class="sd">         * &#39;IP&#39;   - for ip addr as a value.</span>
<span class="sd">         * &#39;HOST&#39; - for hostname as a value.</span>
<span class="sd">         * &#39;FQDN&#39; - for FQDN hostname as a value.</span>
<span class="sd">         * &#39;PRIORITY&#39; - for cucm priority number as a value</span>
<span class="sd">                        same from Device config file.</span>

<span class="sd">         These hostname/FQDN value should be any one of the CUCMs</span>
<span class="sd">         received in device config file.</span>

<span class="sd">        :returns: endpoint state. If the endpoint is inservice_suspended then</span>
<span class="sd">                    it will return inservice_foregroundpending and then after</span>
<span class="sd">                    register complete endpoint will move to inservice</span>
<span class="sd">        For any missing/invalid arguments, exception will be thrown and can</span>
<span class="sd">        be referred camelot logs for more information.</span>
<span class="sd">        For other Registration issues, endpoint will be moved to outofservice.</span>

<span class="sd">        &gt;&gt;&gt; Foreground to the same cucm of before suspended</span>
<span class="sd">        &gt;&gt;&gt; ep1.client_foreground()</span>
<span class="sd">        &#39;inservice_foregroundpending&#39;</span>

<span class="sd">        &gt;&gt;&gt; Foreground to the new cucm</span>
<span class="sd">        mydict = {&#39;type&#39;:&#39;FQDN&#39;, &#39;value&#39;:&#39;cam-ccm-117.camelot.test&#39;}</span>
<span class="sd">        OR</span>
<span class="sd">        mydict = {&#39;type&#39;:&#39;HOST&#39;, &#39;value&#39;:&#39;cam-ccm-117&#39;}</span>
<span class="sd">        OR</span>
<span class="sd">        mydict = {&#39;type&#39;:&#39;IP&#39;, &#39;value&#39;:&#39;10.12.10.84&#39;}</span>
<span class="sd">        OR</span>
<span class="sd">        mydict = {&#39;type&#39;:&#39;PRIORITY&#39;, &#39;value&#39;:&#39;1&#39;}</span>
<span class="sd">        &gt;&gt;&gt; ep1.client_foreground(cucm_info=mydict)</span>
<span class="sd">        &#39;inservice_foregroundpending&#39;</span>

<span class="sd">        &gt;&gt;&gt; Error cases:</span>
<span class="sd">        &gt;&gt;&gt; mydict = {&#39;type&#39;:&#39;TESTING&#39;, &#39;value&#39;:&#39;cam-ccm-117&#39;}</span>
<span class="sd">        &gt;&gt;&gt; ep1.client_foreground(cucm_info=mydict)</span>
<span class="sd">        Exception: invalid type for cucm info dict</span>
<span class="sd">        &gt;&gt;&gt; FQDN not found in device config file</span>
<span class="sd">           mydict = {&#39;type&#39;:&#39;FQDN&#39;, &#39;value&#39;:&#39;cam-ccm-117&#39;}</span>
<span class="sd">        &gt;&gt;&gt; ep1.client_foreground(cucm_info=mydict)</span>
<span class="sd">        CamelotError: client_foreground failed: invalid argument</span>
<span class="sd">        &gt;&gt;&gt; ipaddr not found in any resolved hostname from device config file</span>
<span class="sd">           mydict = {&#39;type&#39;:&#39;IP&#39;, &#39;value&#39;:&#39;10.12.10.230&#39;}</span>
<span class="sd">        &gt;&gt;&gt; ep1.client_foreground(cucm_info=mydict)</span>
<span class="sd">        CamelotError: client_foreground failed: invalid argument</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering client_foreground function&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">cucm_info</span><span class="p">)):</span>
            <span class="n">cucm_type</span> <span class="o">=</span> <span class="n">cucm_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="n">cucm_value</span> <span class="o">=</span> <span class="n">cucm_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="n">key_list</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;IP&#39;</span><span class="p">,</span> <span class="s1">&#39;HOST&#39;</span><span class="p">,</span> <span class="s1">&#39;FQDN&#39;</span><span class="p">,</span> <span class="s1">&#39;PRIORITY&#39;</span><span class="p">]</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">cucm_type</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;no type key for cucm info dict&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">cucm_value</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;no value key for cucm info dict&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">cucm_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">key_list</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;invalid type for cucm info dict&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">CLIENT_FOREGROUND</span><span class="p">,</span>
                                       <span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">cucm_info</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">CLIENT_FOREGROUND</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.uninit"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.uninit">[docs]</a>    <span class="k">def</span> <span class="nf">uninit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Put an endpoint into uninitialized state</span>

<span class="sd">        :returns: The new state of the endpoint.  If the endpoint is currently</span>
<span class="sd">                    in service, then outofservicepending will be returned.  If</span>
<span class="sd">                    the endpoint is out of service, uninitialized will be</span>
<span class="sd">                    returned.</span>

<span class="sd">        &gt;&gt;&gt; import camelot</span>
<span class="sd">        &gt;&gt;&gt; params = {&#39;sip.phone.ip&#39;:&#39;10.20.1.3&#39;,</span>
<span class="sd">        ...           &#39;sip.phone.tftpip&#39;:&#39;10.20.1.21&#39;,</span>
<span class="sd">        ...           &#39;sip.phone.deviceid&#39;:&#39;1&#39;}</span>
<span class="sd">        &gt;&gt;&gt; ep1 = camelot.create_new_endpoint(&#39;10.106.248.199&#39;, 5004, &#39;sipx&#39;,</span>
<span class="sd">        ...                                   &#39;SEPBAACBAAC7001&#39;)</span>
<span class="sd">        &gt;&gt;&gt; ep1.config_ep_dict(params)</span>
<span class="sd">        {&#39;sip.phone.deviceid&#39;: &#39;1&#39;, &#39;sip.phone.ip&#39;: &#39;10.20.1.3&#39;,</span>
<span class="sd">         &#39;sip.phone.tftpip&#39;: &#39;10.20.1.21&#39;}</span>
<span class="sd">        &gt;&gt;&gt; ep1.init()</span>
<span class="sd">        &#39;outofservice&#39;</span>
<span class="sd">        &gt;&gt;&gt; import time</span>
<span class="sd">        &gt;&gt;&gt; time.sleep(5)</span>
<span class="sd">        &gt;&gt;&gt; ep1.un_init()</span>
<span class="sd">        &#39;uninitialized&#39;</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering un_init function&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">UNINIT</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.outofservice"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.outofservice">[docs]</a>    <span class="k">def</span> <span class="nf">outofservice</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Place an endpoint out of service</span>

<span class="sd">        :returns: If the endpoint is in service, outofservicepending or</span>
<span class="sd">                    outofservice will be returned. Otherwise, the current</span>
<span class="sd">                    state of the endpoint will be returned.</span>

<span class="sd">        &gt;&gt;&gt; import camelot</span>
<span class="sd">        &gt;&gt;&gt; params = {&#39;sip.phone.ip&#39;:&#39;10.20.1.3&#39;,</span>
<span class="sd">        ...           &#39;sip.phone.tftpip&#39;:&#39;10.20.1.21&#39;,</span>
<span class="sd">        ...           &#39;sip.phone.deviceid&#39;:&#39;1&#39;}</span>
<span class="sd">        &gt;&gt;&gt; ep1 = camelot.create_new_endpoint(&#39;10.106.248.199&#39;, 5004, &#39;sipx&#39;,</span>
<span class="sd">        ...                                   &#39;SEPBAACBAAC7001&#39;)</span>
<span class="sd">        &gt;&gt;&gt; ep1.config_ep_dict(params)</span>
<span class="sd">        {&#39;sip.phone.deviceid&#39;: &#39;1&#39;, &#39;sip.phone.ip&#39;: &#39;10.20.1.3&#39;,</span>
<span class="sd">         &#39;sip.phone.tftpip&#39;: &#39;10.20.1.21&#39;}</span>
<span class="sd">        &gt;&gt;&gt; ep1.init()</span>
<span class="sd">        &#39;outofservice&#39;</span>
<span class="sd">        &gt;&gt;&gt; ep1.inservice()</span>
<span class="sd">        &#39;inservicepending&#39;</span>
<span class="sd">        &gt;&gt;&gt; import time</span>
<span class="sd">        &gt;&gt;&gt; time.sleep(5)</span>
<span class="sd">        &gt;&gt;&gt; ep1.inservice()</span>
<span class="sd">        &#39;inservice&#39;</span>
<span class="sd">        &gt;&gt;&gt; ep1.out_of_service()</span>
<span class="sd">        &#39;outofservicepending&#39;</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering out_of_service function&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">OUT_OF_SERVICE</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.get_info"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.get_info">[docs]</a>    <span class="k">def</span> <span class="nf">get_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Get information about an endpoint</span>

<span class="sd">        :returns: returns a dictionary with following fields :\n</span>
<span class="sd">                  * state - current state of endpoint, uninitialized,</span>
<span class="sd">                    outofservice,inservice, initpending, inservicepending,</span>
<span class="sd">                    outofservicepending, client_suspended,</span>
<span class="sd">                    client_foregroundpending.</span>
<span class="sd">                  * type - type of endpoint, sccp, sip, h323, pri, cas, raw,</span>
<span class="sd">                    jabber.</span>
<span class="sd">                  * description - description of the endpoint.</span>
<span class="sd">                  * overall state - It is a mirror of state field till it</span>
<span class="sd">                    comes to inservice. After inservice if any of the</span>
<span class="sd">                    refreshes on endpoint fails then this field will display</span>
<span class="sd">                    with inservicepending otherwise it will display state</span>
<span class="sd">                    field value.</span>
<span class="sd">                    Below are the type of refreshes will be invoked on the</span>
<span class="sd">                    Jabber:\n</span>
<span class="sd">                    * auth cookie refresh</span>
<span class="sd">                    * config refresh</span>
<span class="sd">                    * auth token refresh (cucm/unity)</span>
<span class="sd">                    * uds server refresh</span>
<span class="sd">                    * buddy list refresh</span>
<span class="sd">                  * current login - This field will display with type of</span>
<span class="sd">                    login/process which is in-progress during inservice on</span>
<span class="sd">                    endpoint at the time getinfo command is invoked. if</span>
<span class="sd">                    endpoint state is inservice or not initiated the</span>
<span class="sd">                    inservice process, this field will display as empty.</span>
<span class="sd">                    Below are the possible values:\n</span>
<span class="sd">                    * edge config</span>
<span class="sd">                    * uds</span>
<span class="sd">                    * cucm sso</span>
<span class="sd">                    * unity sso</span>
<span class="sd">                    * imp</span>
<span class="sd">                    * device config</span>
<span class="sd">                    * registration</span>
<span class="sd">                  * lines - number of lines associated with endpoint.</span>
<span class="sd">                  * calls - number of call references currently associated</span>
<span class="sd">                    with endpoint.</span>
<span class="sd">                  * streams - number of media streams currently associated</span>
<span class="sd">                    with endpoint</span>
<span class="sd">                  * primary cm - IP of the current primary call manager.</span>
<span class="sd">                  * backup cm - IP address of the current backup call manager.</span>
<span class="sd">                  * status - string describing the temorary errors on the</span>
<span class="sd">                    endpoint, e.g.if endpoint received an error response an</span>
<span class="sd">                    error response while downloading CTL/ITL file.</span>
<span class="sd">                  * registration error - This field will display any error</span>
<span class="sd">                    which is making endpoint to go outofservice.</span>
<span class="sd">                  * last error - string describing the previous value of</span>
<span class="sd">                    field of get_info() API.\n</span>
<span class="sd">                    https://wiki.cisco.com/display/CAMELOT/Configuration+files+download#Configurationfilesdownload-CTL/ITLDownloadFailureHandlingandTFTPfailover</span>
<span class="sd">                  * delay offer - false if offer is going with Invite true</span>
<span class="sd">                    otherwise.</span>
<span class="sd">                  * Voice Mail client status - The current status of the</span>
<span class="sd">                    voicemail client (where available). Possible values:</span>
<span class="sd">                    disconnected, connecting,connected, disconnecting.</span>
<span class="sd">                  * primary cti - IP address of the primary CTI manager, if the</span>
<span class="sd">                    endpoint is a CUPC-Deskphone. For all other endpoint types</span>
<span class="sd">                    this would be empty.Please note, primary cm information in</span>
<span class="sd">                    the getinfo will be empty for a CUPC-Deskphone.</span>
<span class="sd">                  * backup cti - IP address of the backup CTImanager, if the</span>
<span class="sd">                    endpoint is a CUPC-Deskphone. For all other endpoint types</span>
<span class="sd">                    this would be empty. Please note, backup cm information in</span>
<span class="sd">                    the getinfo will be empty for a CUPC-Deskphone.</span>
<span class="sd">                  * current cti - IP address of the current logged in CTI</span>
<span class="sd">                    manager, if the endpoint is a CUPC-Deskphone. For all</span>
<span class="sd">                    other endpoint types this would be empty.</span>
<span class="sd">                  * id - Internal server generated endpoint id</span>
<span class="sd">                  * userid - userid of the user associated with the endpoint</span>
<span class="sd">                  * preferred mode - Displays the DMC phone preferredmode</span>
<span class="sd">                    configured for incoming calls and the same is sent in</span>
<span class="sd">                    registration.</span>
<span class="sd">                  * call type - Displays the DMC phone calltype configured for</span>
<span class="sd">                    outgoing calls.</span>
<span class="sd">                  * domain - This displays the Organization Top Level Domain of</span>
<span class="sd">                    the cluster which is read from tftp config file. The</span>
<span class="sd">                    setting is being read from the organization top level</span>
<span class="sd">                    domain enterprise parameter.</span>
<span class="sd">                  * sip port - This displays the local port of the end point</span>
<span class="sd">                    for the SIP messages.</span>
<span class="sd">                  * ixenabled - This field displays the endpoint IX channel</span>
<span class="sd">                    feature negotiation status after registration complete. The</span>
<span class="sd">                    possible values are yes or no.</span>
<span class="sd">                  * esrstvernego - This field displays the endpoint ESRST</span>
<span class="sd">                    Version Negotiation feature negotiation status after</span>
<span class="sd">                    registration complete. The possible values are &lt;versiontag&gt;</span>
<span class="sd">                    or null.</span>
<span class="sd">                  * login type - This field displays the type of login incase</span>
<span class="sd">                    of jabber endpoint. The possible values are :</span>
<span class="sd">                    *sso: sso based login</span>
<span class="sd">                    * uc-directory: directory based login</span>
<span class="sd">                  * deploymentmodel: type of deployment model possible values</span>
<span class="sd">                    are:</span>
<span class="sd">                    * on-premise</span>
<span class="sd">                    * hedge</span>
<span class="sd">                    * edge</span>
<span class="sd">                  * privacy - This field displays the privacy information of an</span>
<span class="sd">                    endpoint.The possible values are:</span>
<span class="sd">                    * enabled</span>
<span class="sd">                    * disabled</span>
<span class="sd">                  * By default the value is disabled</span>
<span class="sd">                  * tlscipher - Negotiated TLS cipher for SIP signalling.</span>
<span class="sd">                  * config version stamp -This field displays the version stamp</span>
<span class="sd">                    downloaded from the &lt;MAC&gt;.cnf.xml file of the endpoint. The</span>
<span class="sd">                    value will be updated only if the endpoint has successfully</span>
<span class="sd">                    inservice/registred. If the endpoint goes to out of service</span>
<span class="sd">                    then this field value will be cleared.</span>
<span class="sd">                  * config file version refer response - response code of the</span>
<span class="sd">                    Out of dialog REFER message sent for the version stamp</span>
<span class="sd">                    reporting. The value will be updated only if the endpoint</span>
<span class="sd">                    has successful inservice/registration. If the endpoint goes</span>
<span class="sd">                    to out of service, then this field value will be cleared.</span>
<span class="sd">                    Note: This field will not have significance for skinny</span>
<span class="sd">                    endpoints.</span>
<span class="sd">                  * register_supported - list of supported tags received in</span>
<span class="sd">                    200 OK response for initial register message.</span>
<span class="sd">                  * voicepush_delete_code - contains the HTTP response code</span>
<span class="sd">                    received for the DELETE devicetoken api</span>
<span class="sd">                  * voicepush_delete_error - the text contained in</span>
<span class="sd">                    error_description, if any, received for the DELETE</span>
<span class="sd">                    devicetoken api. For code 200, this is an empty string.</span>
<span class="sd">                  * voicepush_token_code - contains the HTTP response code</span>
<span class="sd">                    received for the PUT devicetoken api.</span>
<span class="sd">                  * voicepush_token_error - the text contained in</span>
<span class="sd">                    error_description, if any, received for the PUT</span>
<span class="sd">                    devicetoken api.For code 200, this is an empty string.</span>
<span class="sd">                  * last_lifecycle_event - this shows service control</span>
<span class="sd">                    notification actions.</span>
<span class="sd">                    `refer wiki doc &lt;https://wiki.cisco.com/display/CAMELOT/</span>
<span class="sd">                    Service+Control+Notification#ServiceControlNotification-</span>
<span class="sd">                    Featuredescription&gt;`_</span>
<span class="sd">                  * last_lifecycle_timestamp - time stamp of service control</span>
<span class="sd">                    notification actions.</span>
<span class="sd">                  * last SSL error - this shows most recent SSL error message</span>
<span class="sd">                    thrown for while making SSL connection</span>
<span class="sd">                  * negotiated_curves - this shows the most recent curve</span>
<span class="sd">                    negotiated for SSL connection.</span>
<span class="sd">                    `refer wiki doc &lt;https://wiki.cisco.com/display/CAMELOT/</span>
<span class="sd">                    Elliptic+Curve+Cryptography%28ECC%29+Support&gt;`_</span>
<span class="sd">                  * register_callid - callid used for active sip registration</span>

<span class="sd">        &gt;&gt;&gt; import camelot</span>
<span class="sd">        &gt;&gt;&gt; params = {&#39;sip.phone.ip&#39;:&#39;10.20.1.3&#39;,</span>
<span class="sd">                      &#39;sip.phone.tftpip&#39;:&#39;10.20.1.21&#39;,</span>
<span class="sd">                      &#39;sip.phone.deviceid&#39;:&#39;1&#39;}</span>
<span class="sd">        &gt;&gt;&gt; ep1 = camelot.create_new_endpoint(&#39;10.106.248.199&#39;, 5004, &#39;sipx&#39;,</span>
<span class="sd">                                              &#39;SEPBAACBAAC7001&#39;)</span>
<span class="sd">        &gt;&gt;&gt; ep1.config_ep_dict(params)</span>
<span class="sd">        {&#39;sip.phone.deviceid&#39;: &#39;1&#39;, &#39;sip.phone.ip&#39;: &#39;10.20.1.3&#39;,</span>
<span class="sd">         &#39;sip.phone.tftpip&#39;: &#39;10.20.1.21&#39;}</span>
<span class="sd">        &gt;&gt;&gt; ep1.get_info()</span>
<span class="sd">        {&#39;backup_cm&#39;: None,</span>
<span class="sd">         &#39;backup_cti&#39;: None,</span>
<span class="sd">         &#39;call_type&#39;: None,</span>
<span class="sd">         &#39;calls&#39;: &#39;1&#39;,</span>
<span class="sd">         &#39;central uds&#39;:&#39;&#39;,</span>
<span class="sd">         &#39;config download cipher&#39;:&#39;ECDHE-RSA-AES256-GCM-SHA384&#39;,</span>
<span class="sd">         &#39;config file version refer response&#39;: &#39;481&#39;,</span>
<span class="sd">         &#39;config file version stamp&#39; : &#39;&#39;,</span>
<span class="sd">         &#39;current_cti&#39;: None,</span>
<span class="sd">         &#39;current login&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;deploymentmodel&#39;: &#39;on-premise&#39;,</span>
<span class="sd">         &#39;description&#39;: &#39;SEPBAACBAAC7003,10.20.1.3,tcp;(tnp)&#39;,</span>
<span class="sd">         &#39;domain&#39;: None,</span>
<span class="sd">         &#39;esrstvernego&#39;: &#39;null&#39;,</span>
<span class="sd">         &#39;id&#39;: &#39;sipx1&#39;,</span>
<span class="sd">         &#39;ipv4_address&#39;: &#39;10.20.1.3&#39;,</span>
<span class="sd">         &#39;ipv6_address&#39;: None,</span>
<span class="sd">         &#39;ix_enabled&#39;: &#39;no&#39;,</span>
<span class="sd">         &#39;last_error&#39;: None,</span>
<span class="sd">         &#39;lines&#39;: &#39;1&#39;,</span>
<span class="sd">         &#39;preferred_mode&#39;: None,</span>
<span class="sd">         &#39;primary_cm&#39;: &#39;10.20.1.21&#39;,</span>
<span class="sd">         &#39;primary_cti&#39;: None,</span>
<span class="sd">         &#39;sip_port&#39;: &#39;51789&#39;,</span>
<span class="sd">         &#39;state&#39;: &#39;inservice&#39;,</span>
<span class="sd">         &#39;status&#39;: None,</span>
<span class="sd">         &#39;streams&#39;: &#39;2&#39;,</span>
<span class="sd">         &#39;type&#39;: &#39;sipx&#39;,</span>
<span class="sd">         &#39;userid&#39;: &#39;phoneuser&#39;,</span>
<span class="sd">         &#39;voice_mail_client_status&#39;: &#39;inactive&#39;,</span>
<span class="sd">         &#39;register_supported&#39;: [&#39;X-cisco-voicepush-enabled&#39;],</span>
<span class="sd">         &#39;voicepush_delete_code&#39;: &#39;204&#39;,</span>
<span class="sd">         &#39;voicepush_delete_error&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;voicepush_token_code&#39;: &#39;200&#39;,</span>
<span class="sd">         &#39;voicepush_token_error&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;last SSL error&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;negotiated_curves&#39;: &#39;P-256&#39;,</span>
<span class="sd">         &#39;last_lifecycle_event&#39;: &#39;service control action=reset&#39;,</span>
<span class="sd">         &#39;last_lifecycle_timestamp&#39;: &#39;2017-01-24T18:37:56.943-05:30&#39;,</span>
<span class="sd">         &#39;register_callid&#39;: &#39;2685789952040493@10.12.10.224&#39;}</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">GET_INFO</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.get_unity_info"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.get_unity_info">[docs]</a>    <span class="k">def</span> <span class="nf">get_unity_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Get information about an endpoint</span>

<span class="sd">        :returns: unity server information</span>

<span class="sd">        &gt;&gt;&gt; ep1.get_unity_info()</span>
<span class="sd">        {&#39;vvm subscription failurereason&#39;: &#39;&#39;,</span>
<span class="sd">        &#39;jsessionidsso&#39;: &#39;FBD3F308D5D7707E871EBC93A1AB362D&#39;,</span>
<span class="sd">        &#39;backup2 server port&#39;: &#39;0&#39;, &#39;backup2 server&#39;: &#39;&#39;,</span>
<span class="sd">        &#39;jsessionid&#39;: &#39;E9411EC633B0BFA93C09D987D8B1CC6C&#39;,</span>
<span class="sd">        &#39;primary server&#39;: &#39;cam-unity-2.camelot.test&#39;,</span>
<span class="sd">        &#39;primary server port&#39;: &#39;8443&#39;, &#39;active server&#39;:</span>
<span class="sd">        &#39;cam-unity-2.camelot.test&#39;, &#39;backup1 server port&#39;: &#39;0&#39;,</span>
<span class="sd">        &#39;vvm subscription status&#39;: &#39;active&#39;,</span>
<span class="sd">        &#39;backup1 server&#39;: &#39;&#39;, &#39;active server port&#39;: &#39;8443&#39;}</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">GET_UNITY_INFO</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.get_tftp_info"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.get_tftp_info">[docs]</a>    <span class="k">def</span> <span class="nf">get_tftp_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Get detailed informations about the tftp download operation.</span>

<span class="sd">        :returns: dictionary of tftp file download informations.\n</span>
<span class="sd">                  * downloaded - List of tftp files downloaded successfully.</span>
<span class="sd">                  * remote_port - List of tftp files downloaded successfully</span>
<span class="sd">                    and their remote ports.</span>
<span class="sd">                  * jabber_profile - Any error inforamtion in case</span>
<span class="sd">                    jabberProfile download failed:\n</span>
<span class="sd">                    * response - response info\n</span>
<span class="sd">                      * status_code - http error response code</span>
<span class="sd">                      * reason_phrase - http error response &quot;reason phrase&quot;</span>
<span class="sd">                        or &quot;connection failure&quot; for server connection fail</span>
<span class="sd">                        or &quot;reponse timeout&quot; for response timeout</span>
<span class="sd">                    * sign_algorithm - jabberProfile signed file</span>
<span class="sd">                      algorithm like &quot;MD-5&quot;/&quot;SHA-256&quot; etc.,</span>
<span class="sd">                      &quot;not avail&quot; if file not downloaded</span>
<span class="sd">                    * sign_verification - jabberProfile signed file</span>
<span class="sd">                      verfication state. like &quot;done&quot;/&quot;not done&quot;/&quot;errored&quot;</span>
<span class="sd">                      etc.,</span>
<span class="sd">                    * advanced_encryption_algorithms - values are as below\n</span>
<span class="sd">                      ITL file and finds 0x1c tag:\n</span>
<span class="sd">                      |  &lt;version&gt;      |  &lt;aea&gt;   |\n</span>
<span class="sd">                      |  &gt;= 0x01 0x01   |  True    |\n</span>
<span class="sd">                      |  &lt; 0x01 0x01    |  False   |\n</span>
<span class="sd">                      ITL file and finds no 0x1c tag:\n</span>
<span class="sd">                      set to &quot;not found&quot;</span>
<span class="sd">                    * ctl_checksum - Returns both MD5 and SHA1 checksum of the</span>
<span class="sd">                      CTL file downloaded</span>
<span class="sd">                    * itl_checksum - Returns both MD5 and SHA1 checksum of the</span>
<span class="sd">                      ITL file downloaded</span>
<span class="sd">                    * ext_itl_checksum - Returns both MD5 and SHA1 checksum of</span>
<span class="sd">                      the extended ITL file downloaded</span>
<span class="sd">                  * xmldefault - information on default config file download:\n</span>
<span class="sd">                    * error - error encountered\n</span>
<span class="sd">                    * response_code - status code of response\n</span>
<span class="sd">                    * response_phrase - reason phrase of response\n</span>
<span class="sd">                    * state - possible values are &quot;none&quot;,&quot;inprogress&quot;, and\n</span>
<span class="sd">                      &quot;success&quot;\n</span>
<span class="sd">                      and &quot;failed&quot;</span>
<span class="sd">                    * url - absolute url of XMLDefault file\n</span>
<span class="sd">                    * warning - warning header if present in the response\n</span>


<span class="sd">        &gt;&gt;&gt; ep1.get_tftp_info()</span>
<span class="sd">        Example is given below.</span>
<span class="sd">        {&#39;userLocalWinChar&#39;: &#39;iso-8859-1&#39;,</span>
<span class="sd">        &#39;load&#39;: &#39;sip9971.9-4-2SR2-2&#39;,</span>
<span class="sd">        &#39;CTLparsing&#39;: &#39;done&#39;,</span>
<span class="sd">        &#39;protocol&#39;: &#39;tftp&#39;,</span>
<span class="sd">        &#39;version&#39;: &#39;1459274194-6b4e3f15-66b5-440a-9055-5eb396c5dff6&#39;,</span>
<span class="sd">        &#39;fp_sign_verification&#39;: &#39;done&#39;,</span>
<span class="sd">        &#39;primary&#39;: &#39;10.12.10.74&#39;,</span>
<span class="sd">        &#39;time elapsed&#39;: &#39;83 ms&#39;,</span>
<span class="sd">        &#39;cfg_sign_verification&#39;: &#39;done&#39;,</span>
<span class="sd">        &#39;userLocalName&#39;: &#39;English_United_States&#39;,</span>
<span class="sd">        &#39;state&#39;: &#39;tftp done&#39;,</span>
<span class="sd">        &#39;dialplan_sign_verification&#39;: &#39;done&#39;,</span>
<span class="sd">        &#39;ctl_sign_verification&#39;: &#39;done&#39;,</span>
<span class="sd">        &#39;softkey_sign_algorithm&#39;: &#39;SHA-512&#39;,</span>
<span class="sd">        &#39;dialplan_sign_algorithm&#39;: &#39;SHA-512&#39;,</span>
<span class="sd">        &#39;itl_sign_verification&#39;: &#39;not done&#39;,</span>
<span class="sd">        &#39;downloaded&#39;: &#39;CTLFile.tlv SEPABBA99711001.cnf.xml</span>
<span class="sd">        sip9971.9-4-2SR2-2.loads DefaultFP0000000000-c7a6c673-7479</span>
<span class="sd">        -46b0-839e-014d3d093963.xml DR684abde0-6dbc-9515-dbab-</span>
<span class="sd">        b3b740147286.xml</span>
<span class="sd">        SK50719900-3bee-4594-bc3f-6400e1a33bf0.xml&#39;,</span>
<span class="sd">        &#39;cfg_sign_algorithm&#39;: &#39;SHA-512&#39;,</span>
<span class="sd">        &#39;networkLocal&#39;: &#39;United_States&#39;,</span>
<span class="sd">        &#39;ctl_sign_algorithm&#39;: &#39;SHA-512&#39;,</span>
<span class="sd">        &#39;remote_port&#39;: {&#39;CTLSEP886588656002.tlv&#39;: &#39;6970&#39;,</span>
<span class="sd">        &#39;ITLSEP886588656002.tlv&#39;: &#39;6970&#39;,</span>
<span class="sd">        &#39;SEP886588656002.cnf.xml.sgn&#39;: &#39;6971&#39;,</span>
<span class="sd">        &#39;SK93886772-e459-a46f-ff8d-e15df16797e8.xml.sgn&#39;: &#39;6970&#39;,</span>
<span class="sd">        &#39;ext_ITLSEP886588656002.tlv&#39;: &#39;6971&#39;,</span>
<span class="sd">        &#39;sip8845_65.12-1-1SR1-4.loads&#39;: &#39;6970&#39;},</span>
<span class="sd">        &#39;ctl_checksum&#39;: {&#39;MD5&#39;: &#39;516bd856a24e86a0e397396fe4e36175&#39;,</span>
<span class="sd">          &#39;SHA1&#39;: &#39;663846e9c81f10607e186ded77fbc4940926eac1&#39;},</span>
<span class="sd">        &#39;ext_itl_checksum&#39;: {&#39;MD5&#39;: &#39;84f957595ed53b9deb3b841e08ff6383&#39;,</span>
<span class="sd">          &#39;SHA1&#39;: &#39;519e55826dc2cd632914104f5b2907e66760a344&#39;},</span>
<span class="sd">        &#39;itl_checksum&#39;: {&#39;MD5&#39;: &#39;445a02684c228200aee59bdb8c351adf&#39;,</span>
<span class="sd">          &#39;SHA1&#39;: &#39;56789a614b951326d033c99c7e7cae0b57dd8d71&#39;},</span>
<span class="sd">        &#39;secondary&#39;: &#39;&#39;,</span>
<span class="sd">        &#39;config used&#39;: &#39;primary&#39;,</span>
<span class="sd">        &#39;fp_sign_algorithm&#39;: &#39;SHA-512&#39;,</span>
<span class="sd">        &#39;itl_sign_algorithm&#39;: &#39;not avail&#39;,</span>
<span class="sd">        &#39;softkey_sign_verification&#39;: &#39;done&#39;,</span>
<span class="sd">        &#39;tftp_encrypted&#39;: &#39;yes&#39;,</span>
<span class="sd">        &#39;jabber_profile&#39;: {&#39;response&#39; :{&#39;reason_phrase&#39;: &#39;Not Found&#39;,</span>
<span class="sd">        &#39;status_code&#39;: &#39;404&#39;},&#39;sign_algorithm&#39;: &#39;not avail&#39;,</span>
<span class="sd">        &#39;sign_verification&#39;: &#39;not done&#39;},</span>
<span class="sd">        &#39;XMLparsing&#39;: &#39;done&#39;,</span>
<span class="sd">        &#39;xmldefault&#39;: {&#39;error&#39;: &#39;&#39;,</span>
<span class="sd">        &#39;response_code&#39;: &#39;200&#39;,</span>
<span class="sd">        &#39;response_phrase&#39;: &#39;OK&#39;,</span>
<span class="sd">        &#39;state&#39;: &#39;success&#39;,</span>
<span class="sd">        &#39;url&#39;: &#39;http://10.12.10.9:6970/XMLDefault.cnf.xml&#39;,</span>
<span class="sd">        &#39;warning&#39;: &#39;&#39;}</span>
<span class="sd">        }&quot;</span>

<span class="sd">        &gt;&gt;&gt; ep1.get_tftp_info()[&#39;jabber_profile&#39;]</span>
<span class="sd">        Example &quot;response timeout&quot;</span>
<span class="sd">        {&#39;response&#39;:{&#39;reason_phrase&#39;: &#39;response timeout&#39;, &#39;status_code&#39;: &#39;&#39;},</span>
<span class="sd">        &#39;sign_algorithm&#39;: &#39;not avail&#39;,</span>
<span class="sd">        &#39;sign_verification&#39;: &#39;not done&#39;},</span>

<span class="sd">        &gt;&gt;&gt; ep1.get_tftp_info()[&#39;jabber_profile&#39;]</span>
<span class="sd">        Example &quot;connection failed&quot;</span>
<span class="sd">        {&#39;response&#39;:{&#39;reason_phrase&#39;: &#39;connection failed&#39;, &#39;status_code&#39;: &#39;&#39;},</span>
<span class="sd">        &#39;sign_algorithm&#39;: &#39;not avail&#39;,</span>
<span class="sd">        &#39;sign_verification&#39;: &#39;not done&#39;},</span>

<span class="sd">        &gt;&gt;&gt; ep1.get_tftp_info()[&#39;jabber_profile&#39;]</span>
<span class="sd">        Example &quot;200 OK&quot;</span>
<span class="sd">        {&#39;response&#39;:{&#39;reason_phrase&#39;: &#39;OK&#39;, &#39;status_code&#39;: &#39;200&#39;},</span>
<span class="sd">        &#39;sign_algorithm&#39;: &#39;SHA-512&#39;,</span>
<span class="sd">        &#39;sign_verification&#39;: &#39;done&#39;},</span>

<span class="sd">        &#39;&#39;&#39;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">GET_TFTP_INFO</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.get_location"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.get_location">[docs]</a>    <span class="k">def</span> <span class="nf">get_location</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Get detailed informations about the location based Refer response.</span>

<span class="sd">        :returns: dictionary of Refer Msg response paramters.\n</span>
<span class="sd">                  * backofftimer - used to give information about backofftimer.</span>
<span class="sd">                  * callid - callid of the Refer Msg</span>
<span class="sd">                  * state - Refer Msg current state</span>
<span class="sd">                  * sessionid - gives local and remote session id values</span>
<span class="sd">                  * response - Refer Msg output</span>
<span class="sd">                     * status-code: Refer Msg response code</span>
<span class="sd">                     * status-text: Refer Msg response status</span>
<span class="sd">                     * warning:Refer msg Warning header value if present</span>
<span class="sd">                     * Reason: Refer Msg Reason header value if present</span>

<span class="sd">        &gt;&gt;&gt; ep1.get_location()[0]</span>
<span class="sd">        [{u&#39;backoffTimer&#39;: u&#39;60&#39;,</span>
<span class="sd">          u&#39;callid&#39;: u&#39;f1a5e2cc-fc3323e-0-47d5cdd6@10.12.10.224&#39;,</span>
<span class="sd">            u&#39;response&#39;: {u&#39;reason&#39;: u&#39;&#39;,</span>
<span class="sd">            u&#39;status_code&#39;: u&#39;202&#39;,</span>
<span class="sd">            u&#39;status_text&#39;: u&#39;Accepted&#39;,</span>
<span class="sd">            u&#39;warning&#39;: u&#39;&#39;},</span>
<span class="sd">            u&#39;sessionid&#39;: {u&#39;local&#39;: u&#39;&#39;, u&#39;remote&#39;: u&#39;&#39;},</span>
<span class="sd">            u&#39;state&#39;: u&#39;complete&#39;}]</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">GET_LOCATION</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.get_sip_register"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.get_sip_register">[docs]</a>    <span class="k">def</span> <span class="nf">get_sip_register</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Get detailed information about sip registration request/response</span>
<span class="sd">        status of the primary/backup nodes.</span>

<span class="sd">        :returns:  List of entries of Sip Register Message of primary/backup</span>
<span class="sd">                   nodes\n</span>
<span class="sd">                  * address - Ipaddress of the register message.</span>
<span class="sd">                  * callid - callid of the Register message.</span>
<span class="sd">                  * cseq - cseq no of the Register message.</span>
<span class="sd">                  * hostname - hostname of the active CUCM node registered</span>
<span class="sd">                  * priority - registration priority of the node</span>
<span class="sd">                  * camelot_reason - connection down event because of</span>
<span class="sd">                    tcp Connection error/TLS negotiation failure/</span>
<span class="sd">                    Registration transaction timeout</span>
<span class="sd">                    Error reason with error code is updated in the field.</span>
<span class="sd">                  * response - Register Message Response output</span>
<span class="sd">                     * status-code: Register message response code</span>
<span class="sd">                     * status-text: Register message response status</span>
<span class="sd">                     * warning:Register msg response warning header if present</span>
<span class="sd">                     * reason:Register msg response reason header if present</span>
<span class="sd">                  * state - Sip Registration state.Possible values are</span>
<span class="sd">                    As soon as sip registration is triggered then &#39;state&#39;</span>
<span class="sd">                    value will be &quot;inservicepending.</span>
<span class="sd">                    When 200 ok received for register move the state to</span>
<span class="sd">                    &quot;inservice&quot;.</span>
<span class="sd">                    when Refresh register is triggered then state will be same</span>
<span class="sd">                    as &quot;inservice&quot;</span>
<span class="sd">                    When SIP De-Register is triggered move the state to</span>
<span class="sd">                    &quot;outofservicepending&quot;.</span>
<span class="sd">                    Move to &quot;outofservice&quot; when ever the register received</span>
<span class="sd">                    failure response,connection failed(or down),TLS negotiation</span>
<span class="sd">                    failed.(during initial connect time)</span>
<span class="sd">                    Move to &quot;outofservice&quot; to &quot;token_registration when Camelot</span>
<span class="sd">                    sends keep alive message or token_registration message</span>
<span class="sd">                    Whenregistration not invoked but in service called and</span>
<span class="sd">                    endpoint is doing login procedures then the state will be</span>
<span class="sd">                    empty.</span>

<span class="sd">        &gt;&gt;&gt; ep1.get_sip_register()</span>
<span class="sd">        [{u&#39;address&#39;: u&#39;&#39;,</span>
<span class="sd">          u&#39;callid&#39;: u&#39;106312335049562@10.12.10.224&#39;,</span>
<span class="sd">          u&#39;camelot_reason&#39;: u&#39;&#39;,</span>
<span class="sd">          u&#39;cseq&#39;: u&#39;101&#39;,</span>
<span class="sd">          u&#39;hostname&#39;: u&#39;cam-ccm-57.camsso.test&#39;,</span>
<span class="sd">          u&#39;port&#39;: u&#39;5061&#39;,</span>
<span class="sd">          u&#39;priority&#39;: u&#39;1&#39;,</span>
<span class="sd">          u&#39;response&#39;: {u&#39;reason&#39;: u&#39;&#39;,</span>
<span class="sd">          u&#39;status_code&#39;: u&#39;200&#39;,</span>
<span class="sd">          u&#39;status_text&#39;: u&#39;OK&#39;,</span>
<span class="sd">          u&#39;warning&#39;: u&#39;&#39;},</span>
<span class="sd">          u&#39;sessionid&#39;: u&#39;6432c5e5004050008000berep1200001;</span>
<span class="sd">          remote=00000000000000000000000000000000&#39;,</span>
<span class="sd">          u&#39;state&#39;: u&#39;inservice&#39;},</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">GET_SIP_REGISTER</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.get_bfcp_info"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.get_bfcp_info">[docs]</a>    <span class="k">def</span> <span class="nf">get_bfcp_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">call_ref</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;it retrives the bfcp protocol specific statistics</span>
<span class="sd">           information associated to the call reference.</span>

<span class="sd">        The following field/values are defined:</span>
<span class="sd">            * floor id - identifier of the floor</span>
<span class="sd">            * state - state of the floor. state value can be any one of the</span>
<span class="sd">              below strings.</span>
<span class="sd">              * &quot;&quot;</span>
<span class="sd">              * &quot;floor request sent&quot;</span>
<span class="sd">              * &quot;floor release request sent&quot;</span>
<span class="sd">              * &quot;floor pending status received&quot;</span>
<span class="sd">              * &quot;floor accepted status received&quot;</span>
<span class="sd">              * &quot;floor granted status received&quot;</span>
<span class="sd">              * &quot;floor denied status received&quot;</span>
<span class="sd">              * &quot;floor cancelled status received&quot;</span>
<span class="sd">              * &quot;floor released status received&quot;</span>
<span class="sd">              * &quot;floor revoked status received&quot;</span>
<span class="sd">              * &quot;floor request received&quot;</span>
<span class="sd">              * &quot;floor granted status sent&quot;</span>
<span class="sd">              * &quot;floor release request received&quot;</span>
<span class="sd">              * &quot;floor released status sent&quot;</span>
<span class="sd">              * &quot;floor pending status sent&quot;</span>
<span class="sd">              * &quot;floor accepted status sent&quot;</span>
<span class="sd">            * sent floorrequest primitives - overall sent floorrequest</span>
<span class="sd">              primitives associated to the call.</span>
<span class="sd">            * sent floorrelease primitives - overall sent floorrelease</span>
<span class="sd">              primitives associated to the call.</span>
<span class="sd">            * sent floorrequeststatus primitives - overall sent</span>
<span class="sd">              floorrequeststatus primitives associated to the call.</span>
<span class="sd">            * received floorrequest primitives - overall received floorrequest</span>
<span class="sd">              primitives associated to the call.</span>
<span class="sd">            * received floorrelease primitives - overall received floorrelease</span>
<span class="sd">              primitives associated to the call.</span>
<span class="sd">            * received floorrequeststatus primitives - overall received</span>
<span class="sd">              floorrequeststatus primitives associated to the call.</span>
<span class="sd">            * sent hello primitives - sent hello primitives</span>
<span class="sd">              associated to the call.</span>
<span class="sd">            * sent helloack primitives - sent helloack primitives</span>
<span class="sd">              associated to the call.</span>
<span class="sd">            * sent floorstatus primitives - sent floorstatus primitives</span>
<span class="sd">              associated to the call.</span>
<span class="sd">            * sent floorstatusack primitives - sent floorstatusack primitives</span>
<span class="sd">              associated to the call.</span>
<span class="sd">            * sent floorrequeststatusack primitives - sent</span>
<span class="sd">              floorrequeststatusack primitives</span>
<span class="sd">              associated to the call.</span>
<span class="sd">            * received hello primitives -  received hello primitives</span>
<span class="sd">              associated to the call.</span>
<span class="sd">            * received helloack primitives - received helloack</span>
<span class="sd">              primitives associated to the call.</span>
<span class="sd">            * received floorstatus primitives - received</span>
<span class="sd">              floorstatus primitives associated to the call.</span>
<span class="sd">            * received floorstatusack primitives - received</span>
<span class="sd">              floorstatusack primitives associated to the call.</span>
<span class="sd">            * received floorrequeststatusack primitives - received</span>
<span class="sd">              floorrequeststatusack primitives</span>
<span class="sd">              associated to the call.</span>

<span class="sd">        :parameter call_ref: call reference</span>

<span class="sd">        :returns: information about the bfcp protocol.</span>

<span class="sd">        &gt;&gt;&gt; ep1.get_bfcp_info(&#39;0xf4063230&#39;)</span>
<span class="sd">        {&#39;floor id&#39;: &#39;1&#39;,</span>
<span class="sd">         &#39;state&#39;: &#39;floor granted status received&#39;,</span>
<span class="sd">         &#39;sent floorrequest primitives&#39;: &#39;1&#39;,</span>
<span class="sd">         &#39;sent floorrelease primitives&#39;: &#39;0&#39;,</span>
<span class="sd">         &#39;sent floorrequeststatus primitives&#39;: &#39;0&#39;,</span>
<span class="sd">         &#39;received floorrequest primitives&#39;: &#39;0&#39;,</span>
<span class="sd">         &#39;received floorrelease primitives&#39;: &#39;0&#39;,</span>
<span class="sd">         &#39;received floorrequeststatus primitives&#39;: &#39;1&#39;,</span>
<span class="sd">         ....,</span>
<span class="sd">         ....}</span>
<span class="sd">         &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">call_ref</span> <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_valid_call_ref</span><span class="p">(</span><span class="n">call_ref</span><span class="p">):</span>
            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;get_bfcp_info: Invalid Call-reference passed&#39;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">GET_BFCP_INFO</span><span class="p">,</span> <span class="n">call_ref</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.get_call_crypto_info"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.get_call_crypto_info">[docs]</a>    <span class="k">def</span> <span class="nf">get_call_crypto_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">call_ref</span><span class="p">,</span> <span class="n">mtype</span><span class="o">=</span><span class="s1">&#39;audio&#39;</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s1">&#39;all&#39;</span><span class="p">,</span>
                             <span class="n">local</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Displays the remote and local crypto line information sent/rcvd from CUCM.</span>
<span class="sd">        Displays the remote and local crypto line information sent/rcvd</span>
<span class="sd">        from CUCM.</span>

<span class="sd">        :parameter call_ref:  call reference</span>
<span class="sd">        :parameter mtype:  type audio or video or fecc, default audio</span>
<span class="sd">        :parameter tag:  tag crypto to be displayed, default is all cryptos</span>
<span class="sd">        :parameter local:  if need to display configured cryptos</span>

<span class="sd">        :returns: Upon success, A dictionary of field:value pairs.</span>
<span class="sd">            Otherwise returns None.\n</span>
<span class="sd">            The current fields are support:\n</span>
<span class="sd">            * suite - local/remote SRTP crypto suite</span>
<span class="sd">            * tag - local/remote SRTP crypto tag</span>
<span class="sd">            * key salt - local/remote SRTP crypto key salt value</span>
<span class="sd">            * kdr - local/remote SRTP crypto session param kdr value</span>
<span class="sd">            * wsh - local/remote SRTP crypto session param wsh value</span>
<span class="sd">            * fec order - local/remote SRTP crypto session parm value</span>
<span class="sd">                            &#39;FEC_SRTP&#39; or &#39;SRTP_FEC&#39; or None</span>
<span class="sd">            * fec key - local/remote SRTP crypto session param fec key string</span>
<span class="sd">            * unencrypted srtp - local/remote SRTP crypto session param</span>
<span class="sd">                            present status in SDP.</span>
<span class="sd">                            &#39;1&#39; or &#39;&#39;</span>
<span class="sd">                            &#39;1&#39; means UNENCRYPTED-SRTP param is present in SDP.</span>
<span class="sd">            * unencrypted srtcp - local/remote SRTP crypto session param</span>
<span class="sd">                            present status in SDP.</span>
<span class="sd">                            &#39;1&#39; or &#39;&#39;</span>
<span class="sd">                            &#39;1&#39; means UNENCRYPTED-SRTCP param is present</span>
<span class="sd">                            in SDP.</span>
<span class="sd">            * unautheticated srtp - local/remote SRTP crypto session param</span>
<span class="sd">                            present status in SDP.</span>
<span class="sd">                            &#39;1&#39; or &#39;&#39;</span>
<span class="sd">                            &#39;1&#39; means UNAUTHENTICATED-SRTP param is present</span>
<span class="sd">                            in SDP.</span>

<span class="sd">        &gt;&gt;&gt; ep1.get_call_crypto_info(&#39;0xabcdabcd&#39;, mtype=&#39;audio&#39;, tag=&#39;2&#39;)</span>
<span class="sd">        {&#39;fec key&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;fec order&#39;: &#39;FEC_SRTP&#39;,</span>
<span class="sd">         &#39;kdr&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;key salt&#39;: &#39;3c68af0c6f0492729bc2...65eec3f1baf1677ca223&#39;,</span>
<span class="sd">         &#39;suite&#39;: &#39;AES_CM_128_HMAC_SHA1_32&#39;,</span>
<span class="sd">         &#39;tag&#39;: &#39;2&#39;,</span>
<span class="sd">         &#39;unauthenticated srtp&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;unencrypted srtcp&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;unencrypted srtp&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;wsh&#39;: &#39;&#39;}</span>
<span class="sd">        &gt;&gt;&gt; ep1.get_call_crypto_info(&#39;0xabcdabcd&#39;, mtype=&#39;audio&#39;) OR</span>
<span class="sd">        &gt;&gt;&gt; ep1.get_call_crypto_info(&#39;0xabcdabcd&#39;, mtype=&#39;audio&#39;, tag=&#39;all&#39;)</span>
<span class="sd">        [{&#39;fec key&#39;: &#39;&#39;,</span>
<span class="sd">          &#39;fec order&#39;: &#39;&#39;,</span>
<span class="sd">          &#39;kdr&#39;: &#39;&#39;,</span>
<span class="sd">          &#39;key salt&#39;: &#39;d3752308fac46ebc8acb...6f8b07098d879a3f59e1&#39;,</span>
<span class="sd">          &#39;suite&#39;: &#39;AEAD_AES_128_GCM&#39;,</span>
<span class="sd">          &#39;tag&#39;: &#39;1&#39;,</span>
<span class="sd">          &#39;unauthenticated srtp&#39;: &#39;&#39;,</span>
<span class="sd">          &#39;unencrypted srtcp&#39;: &#39;&#39;,</span>
<span class="sd">          &#39;unencrypted srtp&#39;: &#39;&#39;,</span>
<span class="sd">          &#39;wsh&#39;: &#39;128&#39;},</span>
<span class="sd">         {&#39;fec key&#39;: &#39;&#39;,</span>
<span class="sd">          &#39;fec order&#39;: &#39;&#39;,</span>
<span class="sd">          &#39;kdr&#39;: &#39;&#39;,</span>
<span class="sd">          &#39;key salt&#39;: &#39;067f0d27597adcbc2c66...5c8edae2948c711676fe&#39;,</span>
<span class="sd">          &#39;suite&#39;: &#39;AES_CM_128_HMAC_SHA1_32&#39;,</span>
<span class="sd">          &#39;tag&#39;: &#39;2&#39;,</span>
<span class="sd">          &#39;unauthenticated srtp&#39;: &#39;&#39;,</span>
<span class="sd">          &#39;unencrypted srtcp&#39;: &#39;&#39;,</span>
<span class="sd">          &#39;unencrypted srtp&#39;: &#39;&#39;,</span>
<span class="sd">          &#39;wsh&#39;: &#39;&#39;}]</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">call_ref</span> <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_valid_call_ref</span><span class="p">(</span><span class="n">call_ref</span><span class="p">):</span>
            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;call reference not valid&#39;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;mtype&#39;</span><span class="p">:</span> <span class="n">mtype</span><span class="p">,</span>
                  <span class="s1">&#39;tag&#39;</span><span class="p">:</span> <span class="n">tag</span><span class="p">,</span>
                  <span class="s1">&#39;local&#39;</span><span class="p">:</span> <span class="n">local</span><span class="p">}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span>
            <span class="n">camelot</span><span class="o">.</span><span class="n">GET_CALL_CRYPTO_INFO</span><span class="p">,</span> <span class="n">call_ref</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.get_info_ext"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.get_info_ext">[docs]</a>    <span class="k">def</span> <span class="nf">get_info_ext</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Retrieve current extended information about an endpoint.</span>

<span class="sd">        :returns: a list of extended information as following:\n</span>
<span class="sd">            * softkeys - list of currently available softkey labels.\n</span>
<span class="sd">            * prompt - last non call display prompt text.\n</span>
<span class="sd">            * notify - last display notify text. Note: in case of park notify</span>
<span class="sd">              display the parked number. In case SIPX: &quot;Parked At 88888&quot;.</span>
<span class="sd">              Incase Jabber Mobile: &quot;Parked On 88888&quot;.\n</span>
<span class="sd">            * speeddials - list of speed dial labels currently</span>
<span class="sd">              configured.\n</span>
<span class="sd">            * buttons -  list of labels/features currently configured on a</span>
<span class="sd">              79XXs line/feature buttons.\n</span>
<span class="sd">            * intercom - list of intercom button labels currently configured\n</span>
<span class="sd">            * mobileconnect - Displays the mobileconnect status of that</span>
<span class="sd">              endpoint.\n</span>
<span class="sd">            * mwi - state of message waiting indicator (lamp on or off).\n</span>
<span class="sd">            * mwi line - state of message waiting indicator per line.\n</span>
<span class="sd">            * mwistats - number of lamp on, lamp off, icon on, icon off</span>
<span class="sd">              messages received.\n</span>
<span class="sd">            * presence interface status - Gives the status of the presence</span>
<span class="sd">              interface.\n</span>
<span class="sd">            * Voice Mail client info - Extended protocol specific state</span>
<span class="sd">              information of the voice mail client.</span>
<span class="sd">            * mediastate - Gives the media state for an IP-STE endpoint.</span>
<span class="sd">              Possible values are:</span>
<span class="sd">                * audio (audio mode)</span>
<span class="sd">                * vbd (voice band data)</span>
<span class="sd">                * mr (modem relay).\n</span>
<span class="sd">            * mrstate - Gives the remote modem state for an IP-STE endpoint.</span>
<span class="sd">              Possible values are:\n</span>
<span class="sd">                * n/a - not applicable (media stream not in modem relay state)</span>
<span class="sd">                * init - remote transport protocol has been initialized</span>
<span class="sd">                * phyup - remote modem physical layer is up</span>
<span class="sd">                * connect - remote modem has connected</span>
<span class="sd">                * ratereg - remote modem renegotiating rate</span>
<span class="sd">                * retrain - remote modem retraining</span>
<span class="sd">            * ctrldevices - List of control devices configured in CUCM for</span>
<span class="sd">              the user associated with a CUPC-Deskphone. For all other</span>
<span class="sd">              endpoint types this information will be empty.</span>
<span class="sd">            * cumcopmode - Operational mode of the CUMC endpoint. Possible</span>
<span class="sd">              values are:\n</span>
<span class="sd">                * cuma -  CUMC endpoint will have CUMA server in the</span>
<span class="sd">                  middle.</span>
<span class="sd">                * standalone - CUMC endpoint communicates directly with</span>
<span class="sd">                  CUCM, no CUMA server in the middle.\n</span>
<span class="sd">            * mobileconnect - Displays the mobileconnect status of that</span>
<span class="sd">              endpoint. Supported values are: &quot;on&quot;, &quot;off&quot;, &quot;&quot;.\n</span>
<span class="sd">            * subsevtdialog - Displays the status of explicit subscribe of</span>
<span class="sd">              dialog event. possible values: &quot;active&quot;, &quot;terminated&quot;, &quot;pending&quot;</span>
<span class="sd">              Default value is &quot;&quot;.\n</span>
<span class="sd">            * subsevtpresence - Displays the status of explicit subscribe of</span>
<span class="sd">              dialog event. possible values: &quot;active&quot;, &quot;terminated&quot;, &quot;pending&quot;</span>
<span class="sd">              Default value is &quot;&quot;.\n</span>
<span class="sd">            * Feature Control Policy - Displays the status of parsing of</span>
<span class="sd">              feature control policy xml file. Possible values are:</span>
<span class="sd">              enabled/disabled.\n</span>

<span class="sd">        &gt;&gt;&gt; ep1.get_info_ext()</span>
<span class="sd">        {</span>
<span class="sd">         &#39;softkeys&#39;: [&#39;Redial&#39;, &#39;NewCall&#39;, &#39;CfwdAll&#39;],</span>
<span class="sd">         &#39;prompt&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;notify&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;speeddials&#39;: [&#39;@@SPEED_DIAL_6002_MOD&#39;, &#39;@@6003-BLF_SD&#39;],</span>
<span class="sd">         &#39;buttons&#39;: [&#39;6001&#39;, &#39;6101&#39;, &#39;SPEED_DIAL_6002_MOD&#39;, &#39;6003-BLF_SD&#39;],</span>
<span class="sd">         &#39;intercom&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;mwi&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;mwi line&#39;: [&#39;6001 off terminated&#39;, &#39;6101 off terminated&#39;],</span>
<span class="sd">         &#39;presence interface status&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;mediastate&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;mrstate&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;localmdm&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;remotemdm&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;orclc&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;smtlc&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;subsevtdialog&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;subsevtpresence&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;Voice Mail client info&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;ctrldevices&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;cumcopmode&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;mobileconnect&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;Feature Control Policy&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;mwi stats&#39;: {</span>
<span class="sd">         &#39;lamp on&#39;: 0,</span>
<span class="sd">         &#39;lamp off&#39;: 0,</span>
<span class="sd">         &#39;icon on&#39;: 0,</span>
<span class="sd">         &#39;icon off&#39;: 0,</span>
<span class="sd">        },</span>
<span class="sd">        }</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering get_info_ext function&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">GET_INFO_EXT</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.get_srst_info"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.get_srst_info">[docs]</a>    <span class="k">def</span> <span class="nf">get_srst_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Retrieves srst information from downloaded config file.</span>

<span class="sd">        :returns: a list of information as following:\n</span>
<span class="sd">            * ipv4 address1 - SRST node1 ipv4 address.\n</span>
<span class="sd">            * ipv6 address1 - SRST node1 ipv6 address.\n</span>
<span class="sd">            * port1 - SRST port1.</span>
<span class="sd">            * ipv4 address2 - SRST node2 ipv4 address.\n</span>
<span class="sd">            * ipv6 address2 - SRST node2 ipv6 address.\n</span>
<span class="sd">            * port2 - SRST port2.</span>
<span class="sd">            * ipv4 address3 - SRST node3 ipv4 address.\n</span>
<span class="sd">            * ipv6 address3 - SRST node3 ipv6 address.\n</span>
<span class="sd">            * port3 - SRST port3.\n</span>
<span class="sd">            * secure - yes if received isSecure is true otherwise no.\n</span>

<span class="sd">        &gt;&gt;&gt; ep1.get_srst_info()</span>
<span class="sd">        {&#39;ipv4 address1&#39;: &#39;10.12.10.68&#39;,</span>
<span class="sd">         &#39;ipv6 address2&#39;: &#39;2002:db8:c18:1:1001:1001:1001:68&#39;,</span>
<span class="sd">         &#39;port1&#39;: &#39;5060&#39;,</span>
<span class="sd">         &#39;ipv4 address2&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;ipv6 address2&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;port2&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;secure&#39;: &#39;no&#39;,</span>
<span class="sd">         &#39;ipv4 address3&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;ipv6 address3&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;port3&#39;: &#39;&#39;}</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering get_srst_info function&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">GET_SRST_INFO</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.get_dn"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.get_dn">[docs]</a>    <span class="k">def</span> <span class="nf">get_dn</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;get the display number</span>

<span class="sd">        :returns: returns dn of the endpoint</span>

<span class="sd">        &gt;&gt;&gt; ep1.get_dn()</span>
<span class="sd">        &#39;6001&#39;</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_lines</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">result</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Empty get_lines output, no associated DN found&#39;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="n">primary_line</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">primary_line</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;full_address&#39;</span><span class="p">):</span>
            <span class="n">full_address</span> <span class="o">=</span> <span class="n">primary_line</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;full_address&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;Line does not have attribute &quot;full_address&quot; &#39;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">&#39;@&#39;</span> <span class="ow">in</span> <span class="n">full_address</span><span class="p">:</span>
                <span class="n">ep_dn</span> <span class="o">=</span> <span class="n">full_address</span><span class="p">[:</span><span class="n">full_address</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39;@&#39;</span><span class="p">)]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">ep_dn</span> <span class="o">=</span> <span class="n">full_address</span>
            <span class="k">return</span> <span class="n">ep_dn</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;No DN allocated to the Endpoint&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.get_lines"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.get_lines">[docs]</a>    <span class="k">def</span> <span class="nf">get_lines</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Retrieve current information about the lines associated with an</span>
<span class="sd">        endpoint. Displaying all lines, if line is skipped in between is not</span>
<span class="sd">        supported.</span>

<span class="sd">        :returns: A variable sized list of camelot.response.Line object.</span>

<span class="sd">        Note: For siptrunk connection to two CUCMs(US287164), line_num is same</span>
<span class="sd">        as index from get_conn_info() output. Please refer</span>
<span class="sd">        https://wiki.cisco.com/display/CAMELOT/Simulated+SIP+Trunk#SimulatedSIPTrunk-SipTrunkconnectionstotwoCUCM&#39;s</span>

<span class="sd">        &gt;&gt;&gt; ep1.get_lines()</span>
<span class="sd">        {&#39;full_address&#39;: &#39;7003@10.20.1.21:5060&#39;, &#39;line_num&#39;: &#39;1&#39;}</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering get_lines function&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">GET_LINES</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.get_calls"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.get_calls">[docs]</a>    <span class="k">def</span> <span class="nf">get_calls</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Retrieve current calls associated with an endpoint.</span>

<span class="sd">        :returns: A variable sized list. Each element in the list is a</span>
<span class="sd">                    camelot.response.Call object with following attributes:\n</span>
<span class="sd">            * call_ref: call reference of call</span>
<span class="sd">            * Line: line associated with call</span>
<span class="sd">            * state: current state of call</span>
<span class="sd">            * line_ref - line reference of line associated with call</span>
<span class="sd">            * state - current state of call</span>
<span class="sd">            * Id - call id of the call</span>

<span class="sd">        Note: For siptrunk connection to two CUCMs(US287164), line is same</span>
<span class="sd">        as index from get_conn_info() output. Please refer</span>
<span class="sd">        https://wiki.cisco.com/display/CAMELOT/Simulated+SIP+Trunk#SimulatedSIPTrunk-SipTrunkconnectionstotwoCUCM&#39;s</span>

<span class="sd">        &gt;&gt;&gt; ep1.get_calls()</span>
<span class="sd">        Out[55]:</span>
<span class="sd">        [{</span>
<span class="sd">         &#39;call_ref&#39;: &#39;0xeff5c034&#39;,</span>
<span class="sd">         &#39;CallState&#39;: &#39;connected&#39;,</span>
<span class="sd">         &#39;state&#39;: &#39;connected&#39;,</span>
<span class="sd">         &#39;line_ref&#39;: &#39;1&#39;,</span>
<span class="sd">         &#39;Line&#39;: &#39;1&#39;,</span>
<span class="sd">         &#39;Ref&#39;: &#39;0xeff5c034&#39;,</span>
<span class="sd">         &#39;Id&#39;: &#39;0xeff5c034&#39;,</span>
<span class="sd">        }]</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering get_calls function&#39;</span><span class="p">)</span>
        <span class="n">key_list</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;callingname&quot;</span><span class="p">,</span> <span class="s2">&quot;callingaddress&quot;</span><span class="p">,</span> <span class="s2">&quot;calledaddress&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;calledname&quot;</span><span class="p">,</span> <span class="s2">&quot;callref&quot;</span><span class="p">]</span>
        <span class="n">key</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;type_val&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">kargs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">key_list</span><span class="p">:</span>
            <span class="n">kargs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;key&#39;</span><span class="p">:</span> <span class="n">key</span><span class="p">,</span>
                     <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="n">value</span><span class="p">}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">GET_CALLS</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.get_streams"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.get_streams">[docs]</a>    <span class="k">def</span> <span class="nf">get_streams</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mifc_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">additional_parms</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Return the media streams associated with an endpoint.</span>

<span class="sd">        Retrieve current information about media streams associated with the</span>
<span class="sd">        endpoint. -mifctype is an optional argument to retrieve streams</span>
<span class="sd">        related to a specific media interface. When -mifctype is omitted,</span>
<span class="sd">        all streams present on endpoint are retrived.</span>

<span class="sd">        :parameter mifc_type: mifctype is an optional argument to retrieve</span>
<span class="sd">            streams related to a specific media interface.\n</span>
<span class="sd">            Following are valid values of mediainterfacetype those can go</span>
<span class="sd">            with:\n</span>
<span class="sd">            * line - Retrieves all streams (i.e., audio,</span>
<span class="sd">              video and data) related to line&#39;s</span>
<span class="sd">              media interface.</span>
<span class="sd">            * phoneconfcap - Retrieves all streams (i.e., audio) related to</span>
<span class="sd">              phone&#39;s conferencing capabilities. Use this option to retrieve</span>
<span class="sd">              streams related to barge, agent greeting or whisper coaching.</span>
<span class="sd">            * recordnearend - Retrieves all streams related to recording near</span>
<span class="sd">              end</span>
<span class="sd">            * recordfarend - Retrieves all streams related to recording far end</span>

<span class="sd">        :parameter additional_parms: additional_parms is an optional argument</span>
<span class="sd">            which by default will be true it returns current information about</span>
<span class="sd">            media streams associated with the endpoint. If the</span>
<span class="sd">            additional_param specified as false it return only the keys in the</span>
<span class="sd">            order returned by the Camelot server.</span>

<span class="sd">        :returns: Returns a variable sized list. Each element in the list is</span>
<span class="sd">            also a dictionay with follwoing params:\n</span>
<span class="sd">            * stream-ref - stream reference used to identify this</span>
<span class="sd">              stream in methods</span>
<span class="sd">            * call-ref - call reference of call this stream is/was</span>
<span class="sd">              associated with 0 if unknown</span>
<span class="sd">            * type - one of stream: audio, video, bfcp or data</span>
<span class="sd">            * direction - direction of stream: inbound or outbound</span>
<span class="sd">            * state - media stream state\n</span>
<span class="sd">              * opening - media stream opening</span>
<span class="sd">              * negotiating; media mux negotiation in progress</span>
<span class="sd">              * timedout - media mux negotiation timed out and no</span>
<span class="sd">                media traffic allowed</span>
<span class="sd">              * opened - media stream is open</span>
<span class="sd">              * controlled - media transmission is suppressed</span>
<span class="sd">              * closing - media stream is closing</span>
<span class="sd">              * closed - media stream is closed</span>
<span class="sd">              * mifctype - media interface type to which the stream belongs</span>
<span class="sd">                to. This would be one of line, phoneconfcap,</span>
<span class="sd">                recordnearend or recordfarend</span>

<span class="sd">        &gt;&gt;&gt; ep1.get_streams()</span>
<span class="sd">        [{&#39;CallId&#39;: &#39;0xf1517838&#39;,</span>
<span class="sd">          &#39;Direction&#39;: &#39;Rx&#39;,</span>
<span class="sd">          &#39;RcvrCodec&#39;: &#39;g711u&#39;,</span>
<span class="sd">          &#39;RemoteAddr&#39;: &#39;10.20.1.3:51867&#39;,</span>
<span class="sd">          &#39;StreamStatus&#39;: &#39;Active&#39;,</span>
<span class="sd">          &#39;StrmID&#39;: &#39;0x0b5b1288&#39;},</span>
<span class="sd">         {&#39;CallId&#39;: &#39;0xf1517838&#39;,</span>
<span class="sd">          &#39;Direction&#39;: &#39;Tx&#39;,</span>
<span class="sd">          &#39;RemoteAddr&#39;: &#39;10.20.1.3:40383&#39;,</span>
<span class="sd">          &#39;SenderCodec&#39;: &#39;g711u&#39;,</span>
<span class="sd">          &#39;StreamStatus&#39;: &#39;Active&#39;,</span>
<span class="sd">          &#39;StrmID&#39;: &#39;0x0b5e6c78&#39;}]</span>

<span class="sd">        &gt;&gt;&gt; ep1.get_streams(None, False)</span>
<span class="sd">         [{</span>
<span class="sd">             &#39;stream_ref&#39;: &#39;0x0a57c898&#39;,</span>
<span class="sd">             &#39;call_ref&#39;: &#39;0xf185a030&#39;,</span>
<span class="sd">             &#39;type&#39;: &#39;audio&#39;,</span>
<span class="sd">             &#39;direction&#39;: &#39;inbound&#39;,</span>
<span class="sd">             &#39;state&#39;: &#39;open&#39;,</span>
<span class="sd">             &#39;mifctype&#39;: &#39;line&#39;,</span>
<span class="sd">        }, {</span>
<span class="sd">             &#39;stream_ref&#39;: &#39;0x0a6e5328&#39;,</span>
<span class="sd">             &#39;call_ref&#39;: &#39;0xf185a030&#39;,</span>
<span class="sd">             &#39;type&#39;: &#39;video&#39;,</span>
<span class="sd">             &#39;direction&#39;: &#39;inbound&#39;,</span>
<span class="sd">             &#39;state&#39;: &#39;open&#39;,</span>
<span class="sd">             &#39;mifctype&#39;: &#39;line&#39;,</span>
<span class="sd">        }]</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering get_streams function&#39;</span><span class="p">)</span>
        <span class="n">stream_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">GET_STREAMS</span><span class="p">)</span>
        <span class="n">ret_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">additional_parms</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">stream_list</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">stream</span> <span class="ow">in</span> <span class="n">stream_list</span><span class="p">:</span>
                    <span class="n">ret_stream</span> <span class="o">=</span> <span class="p">{}</span>
                    <span class="n">ret_stream</span><span class="p">[</span><span class="s1">&#39;StrmID&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">stream</span><span class="p">[</span><span class="s1">&#39;stream_ref&#39;</span><span class="p">]</span>
                    <span class="n">ret_stream</span><span class="p">[</span><span class="s1">&#39;CallId&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">stream</span><span class="p">[</span><span class="s1">&#39;call_ref&#39;</span><span class="p">]</span>
                    <span class="n">ret_stream</span><span class="p">[</span><span class="s1">&#39;Type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">stream</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span>
                    <span class="n">stream_info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_stream_info</span><span class="p">(</span><span class="n">stream</span><span class="p">[</span><span class="s1">&#39;stream_ref&#39;</span><span class="p">])</span>
                    <span class="n">ret_stream</span><span class="p">[</span><span class="s1">&#39;RemoteAddr&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">stream_info</span><span class="p">[</span><span class="s1">&#39;address&#39;</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">stream</span><span class="p">[</span><span class="s1">&#39;state&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;open&#39;</span><span class="p">:</span>
                        <span class="n">ret_stream</span><span class="p">[</span><span class="s1">&#39;StreamStatus&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Active&#39;</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">ret_stream</span><span class="p">[</span><span class="s1">&#39;StreamStatus&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Not Ready&#39;</span>
                    <span class="k">if</span> <span class="n">stream</span><span class="p">[</span><span class="s1">&#39;direction&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;inbound&#39;</span><span class="p">:</span>
                        <span class="n">ret_stream</span><span class="p">[</span><span class="s1">&#39;Direction&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Rx&#39;</span>
                        <span class="n">ret_stream</span><span class="p">[</span><span class="s1">&#39;RcvrCodec&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">stream_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;codec&#39;</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="n">stream</span><span class="p">[</span><span class="s1">&#39;direction&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;outbound&#39;</span><span class="p">:</span>
                        <span class="n">ret_stream</span><span class="p">[</span><span class="s1">&#39;Direction&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Tx&#39;</span>
                        <span class="n">ret_stream</span><span class="p">[</span><span class="s1">&#39;SenderCodec&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">stream_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;codec&#39;</span><span class="p">)</span>

                    <span class="n">ret_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ret_stream</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">ret_list</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">stream_list</span></div>

<div class="viewcode-block" id="CamelotEndpoint.get_stream_info"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.get_stream_info">[docs]</a>    <span class="k">def</span> <span class="nf">get_stream_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stream_ref</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Get information about a media stream.</span>

<span class="sd">        :parameter stream_ref: stream reference</span>

<span class="sd">        :returns: Upon success, A dictionary of field:value pairs.</span>
<span class="sd">                    Otherwise returns None</span>
<span class="sd">            * local_address - Shows Local ipaddress in ipaddress:port format</span>
<span class="sd">              for both inbound and outbound streams</span>
<span class="sd">            * remote_address - Shows Remote ipaddress in ipaddress:port format</span>
<span class="sd">              for both inbound and outbound streams</span>
<span class="sd">            * stream reference - stream reference of stream</span>
<span class="sd">            * call reference - call reference stream is/was associated with,</span>
<span class="sd">              0 if unknown</span>
<span class="sd">            * type - type of media stream, audio, video, data , bfcp or ix.</span>
<span class="sd">            * transport - media stream&#39;s transport,</span>
<span class="sd">              e.g. udp, tcp, rtp, srtp, t1, e1,udp/udt</span>
<span class="sd">            * direction -  direction of stream, inbound or outbound</span>
<span class="sd">            * state - state of media stream.</span>
<span class="sd">            * circuit -  TBD-circuit identifier for TDM, could be aggregate</span>
<span class="sd">              collection of circuits</span>
<span class="sd">            * date - date (mm/dd/yyyy) of when stream was opened</span>
<span class="sd">            * start - time stamp, hh:mm:ss:mmm, of when stream was opened</span>
<span class="sd">            * end -time stamp, hh:mm:ss:mmm, of when stream was closed</span>
<span class="sd">            * codec - coder/decoder, e.g. g711u, g711a, g729, g7221_32,</span>
<span class="sd">              g7221_24, h261, opus, mp4a-latm, h264, h265, &quot;&quot;* etc.</span>
<span class="sd">            * payloadtype -   payloadtype number for the codec</span>
<span class="sd">            * bit rate - bit rate in Kbps</span>
<span class="sd">            * packet size - size in milliseconds of packets</span>
<span class="sd">              (only for RTP audio streams)</span>
<span class="sd">            * frame rate  - video frame rate (only for video RTP streams)</span>
<span class="sd">            * frame format -video frame format (only for video RTP streams)</span>
<span class="sd">            * picture format customXMax - video frame format representing</span>
<span class="sd">              the number of pixels in x axis (only for video RTP streams)</span>
<span class="sd">            * picture format customYMax - video frame format representing</span>
<span class="sd">              the number of pixels in y axis (only for video RTP streams)</span>
<span class="sd">            * status - status or description of last asynchronous error</span>
<span class="sd">              occurring on the stream</span>
<span class="sd">            * recording - url of file containing recording if recording was</span>
<span class="sd">              initiated on stream (inbound streams only)</span>
<span class="sd">            * h264Profile - Profile used for H.264 video.</span>
<span class="sd">            * h264Level - Level used for H.264 video.</span>
<span class="sd">              Returns: 1, 1.1, 1.2 etc., as per below table.</span>
<span class="sd">              This is according to Annex A of ITU-T Rec. H.264</span>
<span class="sd">            * h264PacketizationMode - Packetization mode for used for</span>
<span class="sd">              H.264 video.</span>
<span class="sd">              Returns: Single NAL Unit(0), Non-interleaved(1), Interleaved(2).</span>
<span class="sd">            * h264ParameterSets - Encoding SPS(sequence),PPS(picture) parameter</span>
<span class="sd">              sets used for H.264 video.</span>
<span class="sd">            * mifctype - Media interface type to which the stream belongs to.</span>
<span class="sd">              This would be one of line, phoneconfcap, recordnearend</span>
<span class="sd">              or recordfarend</span>
<span class="sd">            * mux status - This field gives the mux negotiation status.</span>
<span class="sd">              This field is displayed only for outbound stream.</span>
<span class="sd">            * ixconnection - Negotiated conection value for IX media.</span>
<span class="sd">              Example new, existing.</span>
<span class="sd">            * ixsetup - ixmap attribute value for IX media.</span>
<span class="sd">              Example active, passive, holdconn or actpass.</span>
<span class="sd">            * ixImapVal - Negotiated setup value for IX media.</span>
<span class="sd">              Example ping, XCCP, MSCP, client sideor serverside.</span>
<span class="sd">            * content - Content of the video. Example slides, speaker,</span>
<span class="sd">              content , main or alt</span>
<span class="sd">            * floorctrl - It tells the role of the end point.</span>
<span class="sd">              It is related to bfcp. c-only, s-only, c-s  or empty string</span>
<span class="sd">            * setup - It is related to bfcp. Values are active, passive,</span>
<span class="sd">              actpass, holdconn or empty string</span>
<span class="sd">            * userid - It is related to bfcp. Identifier for the client.</span>
<span class="sd">              It is a string variable</span>
<span class="sd">            * confid - It is related to bfcp. Conference id.</span>
<span class="sd">            * floorid -It is related to bfcp.</span>
<span class="sd">              It is a list each element with floorid and associated stream</span>
<span class="sd">              label(s).Example:-  {floorid  {1  {10  11}}  {2  { 12  13}} }</span>
<span class="sd">            * label - Pointer to a media stream</span>
<span class="sd">            * v150fw payload - payload number for v150fw codec.</span>
<span class="sd">            * v150NoAudio payload - payload number for NoAudio codec</span>
<span class="sd">            * fingerprint data -  fingerprint attribute value</span>
<span class="sd">            * sprt payload -  payload number of sprt.</span>
<span class="sd">            * rfc2833payloadtype -  payload number of telephone-event</span>
<span class="sd">            * rfc2833fmtpparams -  list of event values in fmtp attribute</span>
<span class="sd">              for telephone-event payload</span>
<span class="sd">        &gt;&gt;&gt; ep1.get_stream_info(&#39;0xe7c5d024&#39;)</span>
<span class="sd">        {&#39;address&#39;: &#39;10.12.10.113:45142&#39;,</span>
<span class="sd">         &#39;bit rate&#39;: &#39;64&#39;,</span>
<span class="sd">         &#39;call reference&#39;: &#39;0xf0424034&#39;,</span>
<span class="sd">         &#39;circuit&#39;: &#39;0&#39;,</span>
<span class="sd">         &#39;codec&#39;: &#39;g711u&#39;,</span>
<span class="sd">         &#39;confid&#39;: &#39;0&#39;,</span>
<span class="sd">         &#39;content&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;date&#39;: &#39;06/11/2019&#39;,</span>
<span class="sd">         &#39;direction&#39;: &#39;inbound&#39;,</span>
<span class="sd">         &#39;end&#39;: &#39;00:00:00:000&#39;,</span>
<span class="sd">         &#39;fingerprint data&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;floorId&#39;: {&#39;0&#39;: [&#39;0&#39;]},</span>
<span class="sd">         &#39;floorctrl&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;fmtpinterleaving&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;fmtpmodechangecapability&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;fmtpmodechangeperiod&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;fmtpmodeset&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;fmtpoctetalign&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;fmtprobustsorting&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;frame format&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;frame rate&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;h264Level&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;h264PacketizationMode&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;h264ParameterSets&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;h264Profile&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;h265Level&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;ixconnection&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;ixmapval&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;ixsetup&#39;: &#39;invalid&#39;,</span>
<span class="sd">         &#39;label&#39;: &#39;0&#39;,</span>
<span class="sd">         &#39;local_address&#39;: &#39;10.12.10.113:45142&#39;,</span>
<span class="sd">         &#39;mifctype&#39;: &#39;line&#39;,</span>
<span class="sd">         &#39;mst-mode&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;mux status&#39;: &#39;disabled&#39;,</span>
<span class="sd">         &#39;packet size&#39;: &#39;20&#39;,</span>
<span class="sd">         &#39;payloadtype&#39;: &#39;0&#39;,</span>
<span class="sd">         &#39;picture format customXMax&#39;: &#39;0&#39;,</span>
<span class="sd">         &#39;picture format customYMax&#39;: &#39;0&#39;,</span>
<span class="sd">         &#39;recording&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;remote source&#39;: &#39;10.12.10.213:52083&#39;,</span>
<span class="sd">         &#39;remote_address&#39;: &#39;10.12.10.213:52083&#39;,</span>
<span class="sd">         &#39;rfc2833fmtpparams&#39;: &#39;0-15&#39;,</span>
<span class="sd">         &#39;rfc2833payloadtype&#39;: &#39;101&#39;,</span>
<span class="sd">         &#39;rtcp-fb-mst&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;setup&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;simulcast codecs&#39;: {},</span>
<span class="sd">         &#39;sprop-source-id&#39;: &#39;0&#39;,</span>
<span class="sd">         &#39;sprt payload&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;start&#39;: &#39;20:03:27:142&#39;,</span>
<span class="sd">         &#39;state&#39;: &#39;open&#39;,</span>
<span class="sd">         &#39;status&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;stream reference&#39;: &#39;0xe7c5d024&#39;,</span>
<span class="sd">         &#39;transport&#39;: &#39;srtp&#39;,</span>
<span class="sd">         &#39;type&#39;: &#39;audio&#39;,</span>
<span class="sd">         &#39;uc-mode&#39;: &#39;0&#39;,</span>
<span class="sd">         &#39;userid&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;v150NoAudio payload&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;v150fw payload&#39;: &#39;&#39;}</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering method get_stream_info()&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">GET_STREAM_INFO</span><span class="p">,</span> <span class="n">stream_ref</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.get_xulpfecuc_info"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.get_xulpfecuc_info">[docs]</a>    <span class="k">def</span> <span class="nf">get_xulpfecuc_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stream_ref</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Get information about xulpfecuc codec info.</span>

<span class="sd">        :parameter stream_ref: stream reference</span>

<span class="sd">        :returns: Upon success, A dictionary of field:value pairs.</span>
<span class="sd">                    Otherwise returns None</span>

<span class="sd">        &gt;&gt;&gt; ep1.get_xulpfecuc_info(&#39;0xf2c01bf0&#39;)</span>
<span class="sd">        {&#39;payload &#39;: &#39;124 &#39;,</span>
<span class="sd">         &#39;multissrc&#39;: &#39;1&#39;,</span>
<span class="sd">         &#39;maxesel&#39;: &#39;1400&#39;,</span>
<span class="sd">         &#39;m&#39;: &#39;8&#39;,</span>
<span class="sd">         &#39;maxn&#39;: &#39;32&#39;}</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering method get_stream_info()&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">GET_XULPFECUC_INFO</span><span class="p">,</span> <span class="n">stream_ref</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.get_stream_info_ext"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.get_stream_info_ext">[docs]</a>    <span class="k">def</span> <span class="nf">get_stream_info_ext</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stream_ref</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Get extended information about a media stream.</span>
<span class="sd">        Get extended information about the specified media stream.</span>

<span class="sd">        :parameter stream_ref:  stream reference</span>

<span class="sd">        :returns: Upon success, A dictionary of field:value pairs.</span>
<span class="sd">            Otherwise returns None.\n</span>
<span class="sd">            The current fields are support:\n</span>
<span class="sd">            * session key - SRTP session key generated for the given</span>
<span class="sd">              open (inbound / outbound) stream. Returns &#39;none&#39; for closed /</span>
<span class="sd">              non-secure streams.</span>
<span class="sd">            * packets received - number of RTP packets received (</span>
<span class="sd">              inbound RTP streams only)</span>
<span class="sd">            * packets dropped - number of inbound RTP packets dropped (inbound</span>
<span class="sd">              RTP streams only)</span>
<span class="sd">            * packets outoforder - number of inbound RTP packets received</span>
<span class="sd">              out of order (inbound RTP streams only)</span>
<span class="sd">            * average jitter - average jitter of inbound RTP packets (</span>
<span class="sd">              inbound RTP streams only)</span>
<span class="sd">            * maximum latency - maximum latency of inbound RTP packets (inbound</span>
<span class="sd">              RTP streams only)</span>
<span class="sd">            * packets sent - number of RTP packets sent (outbound RTP streams</span>
<span class="sd">              only)</span>
<span class="sd">            * remote source - IP and port of source of last inbound packet</span>
<span class="sd">            * tag - negotiated SRTP crypto tag</span>
<span class="sd">            * suite - negotiated SRTP crypto suite</span>
<span class="sd">            * key salt - negotiated SRTP crypto key salt value</span>
<span class="sd">            * kdr - negotiated SRTP crypto session param kdr</span>
<span class="sd">            * wsh - negotiated SRTP crypto session param wsh</span>
<span class="sd">            * fec order - negotiated SRTP crypto session parm value</span>
<span class="sd">                            &#39;FEC_SRTP&#39; &#39;SRTP_FEC&#39; &#39;&#39;</span>
<span class="sd">            * fec key - negotiated SRTP crypto session param fec key</span>
<span class="sd">            * unencrypted srtp - negotiated SRTP crypto session param value</span>
<span class="sd">                            &#39;1&#39; or &#39;&#39;</span>
<span class="sd">            * unencrypted srtcp - negotiated SRTP crypto session param value</span>
<span class="sd">                            &#39;1&#39; or &#39;&#39;</span>
<span class="sd">            * unautheticated srtp - negotiated SRTP crypto session param value</span>
<span class="sd">                            &#39;1&#39; or &#39;&#39;</span>

<span class="sd">        &gt;&gt;&gt; ep1.dial(ep2)</span>
<span class="sd">        &gt;&gt;&gt; ep1.get_streams()</span>
<span class="sd">        [{&#39;CallId&#39;: &#39;0xf1517838&#39;,</span>
<span class="sd">          &#39;Direction&#39;: &#39;Rx&#39;,</span>
<span class="sd">          &#39;RcvrCodec&#39;: &#39;g711u&#39;,</span>
<span class="sd">          &#39;RemoteAddr&#39;: &#39;10.20.1.3:51867&#39;,</span>
<span class="sd">          &#39;StreamStatus&#39;: &#39;Active&#39;,</span>
<span class="sd">          &#39;stream_ref&#39;: &#39;0x0b5b1288&#39;},</span>
<span class="sd">         {&#39;CallId&#39;: &#39;0xf1517838&#39;,</span>
<span class="sd">          &#39;Direction&#39;: &#39;Tx&#39;,</span>
<span class="sd">          &#39;RemoteAddr&#39;: &#39;10.20.1.3:40383&#39;,</span>
<span class="sd">          &#39;SenderCodec&#39;: &#39;g711u&#39;,</span>
<span class="sd">          &#39;StreamStatus&#39;: &#39;Active&#39;,</span>
<span class="sd">          &#39;stream_ref&#39;: &#39;0x0b5e6c78&#39;}]</span>
<span class="sd">        &gt;&gt;&gt; ep1.get_stream_info_ext(ep1.get_streams()[0][&#39;stream_ref&#39;])</span>
<span class="sd">        {&#39;average jitter&#39;: &#39;0&#39;,</span>
<span class="sd">         &#39;map&#39;: &#39;0&#39;,</span>
<span class="sd">         &#39;maximum latency&#39;: &#39;0&#39;,</span>
<span class="sd">         &#39;packets dropped&#39;: &#39;0&#39;,</span>
<span class="sd">         &#39;packets outoforder&#39;: &#39;0&#39;,</span>
<span class="sd">         &#39;packets received&#39;: &#39;0&#39;,</span>
<span class="sd">         &#39;remote source&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;session key&#39;: &#39;none&#39;,</span>
<span class="sd">         &#39;tag&#39;: &#39;3&#39;,</span>
<span class="sd">         &#39;suite&#39;: &#39;AEAD_AES_128_GCM&#39;,</span>
<span class="sd">         &#39;key salt&#39;: &#39;356429e7e3c83b7c7dc78b5e51c8cfe15c661cb1&#39;,</span>
<span class="sd">         &#39;kdr&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;wsh&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;fec order&#39;: &#39;FEC_SRTP&#39;,</span>
<span class="sd">         &#39;fec key&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;unencrypted srtcp&#39;: &#39;1&#39;,</span>
<span class="sd">         &#39;unencrypted srtp&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;unautheticated srtp&#39;: &#39;&#39;}</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">stream_ref</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;get_stream_info_ext: invalid stream reference&#39;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">GET_STREAM_INFO_EXT</span><span class="p">,</span> <span class="n">stream_ref</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.get_call_info"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.get_call_info">[docs]</a>    <span class="k">def</span> <span class="nf">get_call_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">call_ref</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Get information about a call</span>

<span class="sd">        :returns: Upon success, A dictionary of field:value pairs.</span>
<span class="sd">            Otherwise returns None.\n</span>
<span class="sd">            The current fields are support:\n</span>
<span class="sd">            * last_refresh_status - If UPDATE is sent or received as part of</span>
<span class="sd">              session refresh, it will display &quot;update sent&quot; or</span>
<span class="sd">              &quot;update received&quot;. &quot;update sent&quot; is possible if the endpoint&#39;s</span>
<span class="sd">              role (refresher tag in sip message) is UAC and Originator of</span>
<span class="sd">              the call, or role is UAS as an call terminating end point.</span>
<span class="sd">            * midcall_pc_failures - number of attempts made for path</span>
<span class="sd">              confirmation during mid-call</span>
<span class="sd">            * sip_remote_session_id -it displays the value of remote session-id</span>
<span class="sd">              available in the SIP Session-ID header. The remote session id is</span>
<span class="sd">              nothing but the value available in remote parameter of the</span>
<span class="sd">              Session-ID header.</span>
<span class="sd">            * disconnect_reason -  keyword indicating reason for disconnect.</span>
<span class="sd">              possible values:\n</span>
<span class="sd">              * cleared - call cleared normally, i.e. disconnected from</span>
<span class="sd">                connected state by the endpoint</span>
<span class="sd">              * cleared by peer - call cleared normally, i.e. disconnected from</span>
<span class="sd">                connected state by the remote end or CCM</span>
<span class="sd">              * abandoned - call abandoned, i.e. disconnected during outbound</span>
<span class="sd">                or inbound call setup</span>
<span class="sd">              * abandoned by peer - call abandoned, i.e. disconnected during</span>
<span class="sd">                outbound or inbound call setup by remote end or CCM</span>
<span class="sd">              * glare - glare detected</span>
<span class="sd">              * busy - remote party busy</span>
<span class="sd">              * reorder - reorder tone detected</span>
<span class="sd">              * protocol - a protocol error occurred</span>
<span class="sd">              * no answer - remote end did not answer</span>
<span class="sd">              * no dial tone - dial tone was not detected</span>
<span class="sd">              * media - media streams could not get established</span>
<span class="sd">              * out of service - endpoint went out of service</span>
<span class="sd">              * path confirmation failure - auto path confirmation failed</span>
<span class="sd">              * supplementary service failure - an auto supplementary service</span>
<span class="sd">                failed.</span>
<span class="sd">              * ua preemption  - MLPP ua preemption</span>
<span class="sd">              Please refer wiki  for more details of disconnect_reason</span>
<span class="sd">           `&lt;https://wiki.cisco.com/display/CAMELOT/Disconnect+Reason+%2C+Cause+Code+and+SIP+Reason+Header+in+Camelot&gt;`_</span>
<span class="sd">            * stun_response_code - stun binding response code.</span>
<span class="sd">            * connect_time - time in milliseconds call has been or was</span>
<span class="sd">              connected</span>
<span class="sd">            * divert_destination - idivert destination number</span>
<span class="sd">            * direction - direction of call, inbound, outbound</span>
<span class="sd">            * cut-through_time - time in milliseconds from answer or resume a</span>
<span class="sd">              call to outbound audio channel opened</span>
<span class="sd">            * original_called_redirecting_reason - code for original called</span>
<span class="sd">              party redirecting   reason</span>
<span class="sd">            * session_refresher - Displays the negotiated Session refresher</span>
<span class="sd">              role.  Possible values are UAC or UAS.</span>
<span class="sd">            * video_midcall_pc_attempts - number of attempts made for video</span>
<span class="sd">              path confirmation during midcall</span>
<span class="sd">            * cause_code - disconnect cause code if supported by protocol</span>
<span class="sd">              (e.g. q931 cause code)</span>
<span class="sd">            * callsetup_pc_attempts - number of attempts made for path</span>
<span class="sd">              confirmation during callsetup</span>
<span class="sd">            * confidential_access_level_text - resolved CAL(Confidential</span>
<span class="sd">              Access Level) text.</span>
<span class="sd">            * precedence_domain - precedence domain of call (integer)</span>
<span class="sd">            * recording_type - information regarding what type of recording</span>
<span class="sd">              is in progress</span>
<span class="sd">            * sip_local_session_id - it displays the value of local session</span>
<span class="sd">              id available in the SIP Session-ID header. The local session-id</span>
<span class="sd">              is nothing but the value available in Session-ID header and it</span>
<span class="sd">              will not include the value of remote parameter.</span>
<span class="sd">            * end - timestamp, hh:mm:ss:mmm of when call was disconnected</span>
<span class="sd">              (i.e. entered disconnected state).</span>
<span class="sd">            * tx_subject - For the UAC the &#39;tx subject&#39; will be the string</span>
<span class="sd">              set on the endpoint by set_call_subject. If the UAS has no</span>
<span class="sd">              subject set via set_call_subject, the &#39;tx_subject&#39; will be equal</span>
<span class="sd">              to the &#39;rx_subject&#39;.</span>
<span class="sd">            * start - timestamp, hh:mm:ss:mmm, of when call was initiated</span>
<span class="sd">            * called_mail_box - called party voice mail box</span>
<span class="sd">            * customdata -</span>
<span class="sd">            * last_redirecting_name - last redirecting party name</span>
<span class="sd">            * state - current state of call</span>
<span class="sd">            * original_called_name - original called party name</span>
<span class="sd">            * last_pathconf_trigger - the reason for the last path conf</span>
<span class="sd">              trigger. This could be either callsetup or midcall</span>
<span class="sd">            * called_address - called party address</span>
<span class="sd">                For outbound call it will be having RPID(with party=called)</span>
<span class="sd">                user info, if no RPID it will be taken from Dialed number.</span>
<span class="sd">                For inbound call will have local DN.</span>
<span class="sd">                For user=phone or tel URL, the host portion will be excluded.</span>
<span class="sd">            * video_callsetup_pc_failures - number of video path confirmation</span>
<span class="sd">              failures for callsetup video path confirmation attempts</span>
<span class="sd">            * disconnect_time - time in milliseconds from disconnect to</span>
<span class="sd">              disconnect acknowledgement</span>
<span class="sd">            * midcall_pc_successes - number of path confirmation successes for</span>
<span class="sd">              midcall path confirmation attempts</span>
<span class="sd">            * dialtone_time - time in milliseconds from state offhook to state</span>
<span class="sd">              dialtone</span>
<span class="sd">            * last_redirecting_reason - code for last redirecting reason</span>
<span class="sd">            * calling_mail_box - calling party voice mail box</span>
<span class="sd">            * last_media_error - information regarding a media error.</span>
<span class="sd">              Currently it is shown only when UPM is enabled.</span>
<span class="sd">            * active_media - active media in the call eg-&#39;audio video&#39;.</span>
<span class="sd">            * recording_status - information regarding status of the recording.</span>
<span class="sd">            * remote_call - This field will indicate the remote call</span>
<span class="sd">              information. It will display &quot;private&quot; for a private call and</span>
<span class="sd">              empty by default. The possible values are:</span>
<span class="sd">              * default</span>
<span class="sd">              * private</span>
<span class="sd">            * rx_subject - For UAC &#39;rx subject&#39; will be the value of the</span>
<span class="sd">              Subject header received in the incoming sip messages. For the</span>
<span class="sd">              UAS the &#39;rx subject&#39; will be the subject header that it received</span>
<span class="sd">              in the request.</span>
<span class="sd">            * video_pc_status - status of video call or description of last</span>
<span class="sd">              asynchronous error.</span>
<span class="sd">            * callid - The callid corresponding to this call.</span>
<span class="sd">            * video_midcall_pc_successes - number of video path confirmation</span>
<span class="sd">              successes for midcall video path confirmation attempts</span>
<span class="sd">            * call_security_status - call security possible values:\n</span>
<span class="sd">              * status</span>
<span class="sd">              * unknown</span>
<span class="sd">              * not authenticated</span>
<span class="sd">              * authenticated</span>
<span class="sd">              * encrypted</span>
<span class="sd">              * secured media</span>
<span class="sd">            * remote_xciscotenant - it displays the remote tenant value</span>
<span class="sd">              received in RPID.</span>
<span class="sd">            * midcall_pc_attempts - number of attempts made for path</span>
<span class="sd">              confirmation during midcall</span>
<span class="sd">            * original_called_address - original called party address</span>
<span class="sd">            * session_refresh_timer - Displays the negotiated Session Refresh</span>
<span class="sd">              timer</span>
<span class="sd">            * calling_address - calling party address</span>
<span class="sd">                For outbound call it will be having local phone DN.</span>
<span class="sd">                For inbound call will be having RPID(with party=calling)</span>
<span class="sd">                user info, if no RPID it will taken from the FROM header.</span>
<span class="sd">                For user=phone or tel URL, the host portion will be excluded.</span>
<span class="sd">            * isfocus - &quot;true&quot; is isfocus tag is present in contact header</span>
<span class="sd">              &quot;false&quot; is absent.</span>
<span class="sd">            * date - date (mm/dd/yyyy) of when call was initiated</span>
<span class="sd">            * video_callsetup_pc_attempts -</span>
<span class="sd">            * calling_name - number of attempts made for video path</span>
<span class="sd">              confirmation during callsetup</span>
<span class="sd">            * setup_time - time in milliseconds from addressing end to</span>
<span class="sd">              ring-back</span>
<span class="sd">            * movetomobile_mobileconnect - mobile connect is &quot;on&quot; or &quot;off&quot;.</span>
<span class="sd">            * reinvite_status - after start_share/stop_share values is</span>
<span class="sd">              progressing after sending ACK status is completed.</span>
<span class="sd">            * script_start_time - sss script execution start time.</span>
<span class="sd">            * last_redirecting_address - last redirecting address</span>
<span class="sd">            * network_domain - network domain of the call</span>
<span class="sd">            * callsetup_pc_failures - number of path confirmation failures</span>
<span class="sd">              for callsetup path confirmation attempts</span>
<span class="sd">            * type - display type of call, in, out, or forward</span>
<span class="sd">            * last_redirecting_mail_box - last redirecting party voice mail box</span>
<span class="sd">            * callsetup_pc_successes - number of attempts made for path</span>
<span class="sd">              confirmation during callsetup</span>
<span class="sd">            * video_midcall_pc_failures - number of video path confirmation</span>
<span class="sd">              failures for midcall video path confirmation attempts</span>
<span class="sd">            * newdirection -</span>
<span class="sd">            * called_name - called party name</span>
<span class="sd">            * video_last_pathconf_trigger - the reason for the video last path</span>
<span class="sd">              conf trigger. This could be either callsetup or midcall</span>
<span class="sd">            * precedence_level - precedence level of call. Possible values</span>
<span class="sd">              are:\n</span>
<span class="sd">              * flash override</span>
<span class="sd">              * flash</span>
<span class="sd">              * immediate</span>
<span class="sd">              * priority</span>
<span class="sd">              * routine</span>
<span class="sd">            * status - status of call or description of last asynchronous error</span>
<span class="sd">            * failure_status - shows the first call failure status only for the</span>
<span class="sd">              auto operations and event based scripting.</span>
<span class="sd">            * termination_status_line - any non-2xx final response or CANCEL</span>
<span class="sd">              in there for INVITE.</span>
<span class="sd">            * remoteinuse_events - counter indicating the number of times the</span>
<span class="sd">              call has transitioned to the remoteinuse state</span>
<span class="sd">            * local_xciscotenant - it displays the local tenant value received</span>
<span class="sd">              in request uri.</span>
<span class="sd">            * call_reference - call reference.</span>
<span class="sd">            * line_reference - line reference of line associated with call</span>
<span class="sd">            * multipart_xml_body - it displays the xml body from received</span>
<span class="sd">              INVITE message if high level Content-Type is &quot;multipart/mixed;</span>
<span class="sd">              boundary=uniqueBoundary&quot; and low level Content-Type is</span>
<span class="sd">              &quot;application/cisco-media-playback+xml&quot;</span>
<span class="sd">            * movetomobile_status - shows the status of movetomobile operation.</span>
<span class="sd">            * original_called_mail_box - original called party voice mail box</span>
<span class="sd">            * stun_status - stun binding status.values: &#39;success&#39; or &#39;failed&#39;.</span>
<span class="sd">            * reason_header - reason header from SIP error response or BYE.</span>
<span class="sd">            * warning_header - warning header from SIP error response or BYE.</span>
<span class="sd">            * video_callsetup_pc_successes - number of video path confirmation</span>
<span class="sd">              successes for callsetup video path confirmation attempts</span>
<span class="sd">            * replaces - the call_ref of the call this call_ref replaced.</span>
<span class="sd">              The value can be used in get_call_info to retrieve information</span>
<span class="sd">              about the initial call. Valid value present for a get_call_info</span>
<span class="sd">              of a current active (&#39;connected&#39;) call.</span>
<span class="sd">            * replaced_by - the call_ref of the call that replaced this</span>
<span class="sd">              call_ref. The value can be used in get_call_info to retrieve</span>
<span class="sd">              information of the current active call. Valid value present for</span>
<span class="sd">              a get_call_info of a previous inactive (&#39;disconnected&#39;) call.</span>
<span class="sd">            * ice - This field will have ice vqmetrics information for</span>
<span class="sd">              audio stream in the format of ice=mmm:xxx:nnn:tttt e.g</span>
<span class="sd">              ice:host:0:0.If endpoint is not ice enabled value is none.</span>
<span class="sd">              where:\n</span>
<span class="sd">              * mmm: Mode. One of ice|lite|none|unk.Default value is unk</span>
<span class="sd">              * xxx: Type of candidate selected host/relay/srflx/prflx</span>
<span class="sd">              * nnn: max time(ms)for connectivity check on that path.Default</span>
<span class="sd">                value is 0</span>
<span class="sd">              * ttt: time(ms)for the full ICE negotiation to complete.Default</span>
<span class="sd">                value is 0</span>
<span class="sd">            * calling_privacy - Contains the privacy received in</span>
<span class="sd">              Remote-Party-ID header where party is calling.</span>
<span class="sd">            * called_privacy - Contains the privacy received in</span>
<span class="sd">              Remote-Party-ID header where party is called.</span>

<span class="sd">        &gt;&gt;&gt; ep1.get_call_info(call_ref=&#39;0xf356f034&#39;)</span>
<span class="sd">        {&#39;active_media&#39;: &#39;audio &#39;,</span>
<span class="sd">         &#39;call_reference&#39;: &#39;0xf356f034&#39;,</span>
<span class="sd">         &#39;call_security_status&#39;: &#39;not authenticated&#39;,</span>
<span class="sd">         &#39;called_address&#39;: &#39;710002&#39;,</span>
<span class="sd">         &#39;called_mail_box&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;called_name&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;callid&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;calling_address&#39;: &#39;710001&#39;,</span>
<span class="sd">         &#39;calling_mail_box&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;calling_name&#39;: &#39;710001&#39;,</span>
<span class="sd">         &#39;callsetup_pc_attempts&#39;: &#39;0&#39;,</span>
<span class="sd">         &#39;callsetup_pc_failures&#39;: &#39;0&#39;,</span>
<span class="sd">         &#39;callsetup_pc_successes&#39;: &#39;0&#39;,</span>
<span class="sd">         &#39;cause_code&#39;: &#39;0&#39;,</span>
<span class="sd">         &#39;confidential_access_level_text&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;connect_time&#39;: &#39;0&#39;,</span>
<span class="sd">         &#39;customdata&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;cut-through_time&#39;: &#39;0&#39;,</span>
<span class="sd">         &#39;date&#39;: &#39;04/06/2017&#39;,</span>
<span class="sd">         &#39;dialtone_time&#39;: &#39;0&#39;,</span>
<span class="sd">         &#39;direction&#39;: &#39;outbound&#39;,</span>
<span class="sd">         &#39;disconnect_reason&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;reason_header&#39;: &#39;Q.850;cause=1&#39;,</span>
<span class="sd">         &#39;warning_header&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;disconnect_time&#39;: &#39;0&#39;,</span>
<span class="sd">         &#39;ice&#39;:&#39;mmm:xxx:nnn:ttt&#39;</span>
<span class="sd">         &#39;divert_destination&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;end&#39;: &#39;00:00:00:000&#39;,</span>
<span class="sd">         &#39;failure_status&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;isfocus&#39;: &#39;false&#39;,</span>
<span class="sd">         &#39;last_media_error&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;last_pathconf_trigger&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;last_redirecting_address&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;last_redirecting_mail_box&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;last_redirecting_name&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;last_redirecting_reason&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;last_refresh_status&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;line_reference&#39;: &#39;1&#39;,</span>
<span class="sd">         &#39;local_xciscotenant&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;midcall_pc_attempts&#39;: &#39;0&#39;,</span>
<span class="sd">         &#39;midcall_pc_failures&#39;: &#39;0&#39;,</span>
<span class="sd">         &#39;midcall_pc_successes&#39;: &#39;0&#39;,</span>
<span class="sd">         &#39;movetomobile_mobileconnect&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;movetomobile_status&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;multipart_xml_body&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;network_domain&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;newdirection&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;original_called_address&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;original_called_mail_box&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;original_called_name&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;original_called_redirecting_reason&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;precedence_domain&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;precedence_level&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;recording_status&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;recording_type&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;reinvite_status&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;remote_call&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;remote_xciscotenant&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;remoteinuse_events&#39;: &#39;0&#39;,</span>
<span class="sd">         &#39;rx_subject&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;script_start_time&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;session_refresh_timer&#39;: &#39;None&#39;,</span>
<span class="sd">         &#39;session_refresher&#39;: &#39;none&#39;,</span>
<span class="sd">         &#39;setup_time&#39;: &#39;33&#39;,</span>
<span class="sd">         &#39;sip_local_session_id&#39;: &#39;1d08a99f004050008000aaaa99710001&#39;,</span>
<span class="sd">         &#39;sip_remote_session_id&#39;: &#39;1d08a99f004050008000aaaa99710002&#39;,</span>
<span class="sd">         &#39;start&#39;: &#39;15:47:26:810&#39;,</span>
<span class="sd">         &#39;state&#39;: &#39;connected&#39;,</span>
<span class="sd">         &#39;status&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;stun_response_code&#39;: &#39;0&#39;,</span>
<span class="sd">         &#39;stun_status&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;tx_subject&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;type&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;video_callsetup_pc_attempts&#39;: &#39;0&#39;,</span>
<span class="sd">         &#39;video_callsetup_pc_failures&#39;: &#39;0&#39;,</span>
<span class="sd">         &#39;video_callsetup_pc_successes&#39;: &#39;0&#39;,</span>
<span class="sd">         &#39;video_last_pathconf_trigger&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;video_midcall_pc_attempts&#39;: &#39;0&#39;,</span>
<span class="sd">         &#39;video_midcall_pc_failures&#39;: &#39;0&#39;,</span>
<span class="sd">         &#39;video_midcall_pc_successes&#39;: &#39;0&#39;,</span>
<span class="sd">         &#39;video_pc_status&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;replaces&#39;: &#39;0xf01b0034&#39;,</span>
<span class="sd">         &#39;replaced_by&#39;: &#39;&#39;,</span>
<span class="sd">         &#39;calling_privacy&#39;: &#39;full&#39;.</span>
<span class="sd">         &#39;called_privacy&#39;: &#39;name&#39;}</span>

<span class="sd">        &gt;&gt;&gt; Example for replaces/replaced_by:</span>
<span class="sd">        -Initial call is callref_1, INVITE dialog D1</span>
<span class="sd">        -Restich occurs</span>
<span class="sd">        -INVITE w/ Replace dialog D2 replaces D1; callref_2 created for D2.</span>
<span class="sd">        &gt;&gt;&gt; ep1.get_calls()</span>
<span class="sd">        [{&#39;Ref&#39;:&#39;callref_2&#39;, &#39;CallState&#39;: &#39;connected&#39;}</span>
<span class="sd">         {&#39;Ref&#39;:&#39;callref_1&#39;, &#39;CallState&#39;: &#39;disconnected&#39;}]</span>
<span class="sd">        &gt;&gt;&gt; ep1.get_call_info(call_ref=&#39;callref_1&#39;)</span>
<span class="sd">        get_call_info(callref_1)</span>
<span class="sd">        {&#39;state&#39;: &#39;disconnected&#39;, &#39;replaces&#39;: &#39;&#39;, &#39;replaced_by&#39;: &#39;callref_2&#39;}</span>
<span class="sd">        &gt;&gt;&gt; ep1.get_call_info(call_ref=&#39;callref_2&#39;)</span>
<span class="sd">        {&#39;state&#39;: &#39;connected&#39;, &#39;replaces&#39;:&#39;callref_1&#39;, &#39;replaced_by&#39;: &#39;&#39;}</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">call_ref</span> <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_valid_call_ref</span><span class="p">(</span><span class="n">call_ref</span><span class="p">):</span>
            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;call reference not valid&#39;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="n">key</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">key_list</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;callingname&quot;</span><span class="p">,</span> <span class="s2">&quot;callingaddress&quot;</span><span class="p">,</span> <span class="s2">&quot;calledaddress&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;calledname&quot;</span><span class="p">,</span> <span class="s2">&quot;callref&quot;</span><span class="p">]</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">key_list</span><span class="p">:</span>
            <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;key&#39;</span><span class="p">:</span> <span class="n">key</span><span class="p">}</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering get_call_info function&#39;</span><span class="p">)</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">GET_CALL_INFO</span><span class="p">,</span> <span class="n">call_ref</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ret</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;divert destination&#39;</span><span class="p">):</span>
            <span class="n">ret</span><span class="p">[</span><span class="s1">&#39;divert destination&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ret</span><span class="p">[</span><span class="s1">&#39;divert destination&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_remove_undscr_tngpi</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_remove_undscr_tngpi</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mod_dict</span><span class="p">):</span>
        <span class="n">new_dict</span> <span class="o">=</span> <span class="n">common_utils</span><span class="o">.</span><span class="n">CamelotOrderedDict</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">mod_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="s1">&#39; &#39;</span> <span class="ow">in</span> <span class="n">key</span><span class="o">.</span><span class="n">strip</span><span class="p">():</span>
                <span class="n">new_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
                <span class="n">new_dict</span><span class="p">[</span><span class="n">key</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">)]</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">new_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">return</span> <span class="n">new_dict</span>

<div class="viewcode-block" id="CamelotEndpoint.get_call_info_ext"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.get_call_info_ext">[docs]</a>    <span class="k">def</span> <span class="nf">get_call_info_ext</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">call_ref</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Get extended, protocol-specific information about a call</span>

<span class="sd">        :returns: Upon success, A dictionary of field:value pairs.</span>
<span class="sd">            Otherwise returns None.\n</span>
<span class="sd">            The current fields are support:\n</span>
<span class="sd">            * h235_encryption_algorithm - DES, Triple DES, AES</span>
<span class="sd">            * prompt - last non call display prompt text</span>
<span class="sd">            * attribute - Attribute shows SIP protocol specific call-info</span>
<span class="sd">              headers up to 5.</span>
<span class="sd">            * holdreversionreq - Shows holdreversionreq REFER xml info.</span>
<span class="sd">            * x_farendrefci - CUCM call ID of the call leg opposite to the</span>
<span class="sd">              recording triggering side.</span>
<span class="sd">            * x_nearendguid - Cisco Guid (available only when nearend is the</span>
<span class="sd">              forking gateway).</span>
<span class="sd">            * participant - This field represent the type of recording emulator</span>
<span class="sd">              endpoint. Possible values are &quot;nearend&quot; or &quot;farend&quot;.</span>
<span class="sd">            * cumccallmode - Indicates the DVO call mode ( lcr, forward or</span>
<span class="sd">              reverse)</span>
<span class="sd">            * selected - 1 indicating that call has been selected, 0 if not</span>
<span class="sd">              selected, see &quot;select&quot;</span>
<span class="sd">            * x_farenddevice - Device name of the far end party.</span>
<span class="sd">            * monitor_DN - If this is a monitoring call, this field provides</span>
<span class="sd">              the DN that is being monitored. Otherwise, an empty string will</span>
<span class="sd">              be displayed</span>
<span class="sd">            * x_farendclusterid - clusterid of far end party.</span>
<span class="sd">            * x_refci - CUCM call ID of the recording triggering side call leg</span>
<span class="sd">              in the triggering cluster.</span>
<span class="sd">            * history_info - History-info header content strings for</span>
<span class="sd">              NativeIMSClient call forward scenario</span>
<span class="sd">            * softkeys - list of currently available softkey labels</span>
<span class="sd">            * monitor_mode - If this is a monitoring call, the value will be</span>
<span class="sd">              either Monitoring or Coaching. Otherwise, an empty string will</span>
<span class="sd">              be displayed</span>
<span class="sd">            * x_nearendclusterid - clusterid of near end party.</span>
<span class="sd">            * x_farendaddr - Directory number of the far end party.</span>
<span class="sd">            * x_farendguid - Cisco Guid (available only when farend is the</span>
<span class="sd">              forking gateway).</span>
<span class="sd">            * did - Enterprise Feature Access Number/DID# provided by CUCM</span>
<span class="sd">              that is used in DialViaOffice forward call.</span>
<span class="sd">              See dial_via_office() api.</span>
<span class="sd">            * x_nearendaddr - Directory number of the near end party.</span>
<span class="sd">            * x_nearenddevice - Device name of the near end party.</span>
<span class="sd">            * protocol_disc_reason - Provides the protocol specific disconnect</span>
<span class="sd">              reason. Currently updated only for QBE protocol.</span>
<span class="sd">            * dtmf_digits - DTMF digits received for a connected call.</span>
<span class="sd">              Currently updated only for CTI/CSFD endpoints. This data reset</span>
<span class="sd">              happens after call transition to connected state from any other</span>
<span class="sd">              state. Invalid DTMF digit will be shown as space character.</span>

<span class="sd">        &gt;&gt;&gt; ep1.get_call_info_ext(list_ep1[0].call_ref)</span>
<span class="sd">        {&#39;attribute&#39;: &#39;{{</span>
<span class="sd">                        {call-info}</span>
<span class="sd">                        {{1}{&lt;urn:x-cisco-remotecc:callinfo&gt;;</span>
<span class="sd">                             security= NotAuthenticated; orientation= to;</span>
<span class="sd">                        gci= 1-43776; call-instance= 1}}</span>
<span class="sd">                        {{2}{}}</span>
<span class="sd">                        {{3}{}}</span>
<span class="sd">                        {{4}{}}</span>
<span class="sd">                        {{5}{}}}}&#39;,</span>
<span class="sd">        &#39;holdreversionreq&#39;: &#39;{ &#39;dialogid&#39;: {</span>
<span class="sd">                        &#39;callid&#39;: &#39;30939b80-66e1dadc-317-2d050505@5.5.5.45&#39;,</span>
<span class="sd">                        &#39;localtag&#39;: &#39;59767ab7-7931-49bc-8b8e-166d4f2cee02&#39;,</span>
<span class="sd">                        &#39;remotetag&#39;: &#39;001795f9d7d300501fbe011f-2e95a245&#39;</span>
<span class="sd">                        },</span>
<span class="sd">                        &#39;revertinterval&#39; : 30</span>
<span class="sd">                        }</span>
<span class="sd">         &#39;cumccallmode&#39;: None,</span>
<span class="sd">         &#39;did&#39;: None,</span>
<span class="sd">         &#39;h235_encryption_algorithm&#39;: None,</span>
<span class="sd">         &#39;history_info&#39;: None,</span>
<span class="sd">         &#39;monitor_DN&#39;: None,</span>
<span class="sd">         &#39;monitor_mode&#39;: None,</span>
<span class="sd">         &#39;participant&#39;: None,</span>
<span class="sd">         &#39;prompt&#39;: &#39;to 7004&#39;,</span>
<span class="sd">         &#39;protocol_disc_reason&#39;: None,</span>
<span class="sd">         &#39;selected&#39;: &#39;0&#39;,</span>
<span class="sd">         &#39;softkeys&#39;: &#39;Hold EndCall Trnsfer Park Confrn ConfList Select&#39;,</span>
<span class="sd">         &#39;x_farendaddr&#39;: None,</span>
<span class="sd">         &#39;x_farendclusterid&#39;: None,</span>
<span class="sd">         &#39;x_farenddevice&#39;: None,</span>
<span class="sd">         &#39;x_farendguid&#39;: None,</span>
<span class="sd">         &#39;x_farendrefci&#39;: None,</span>
<span class="sd">         &#39;x_nearendaddr&#39;: None,</span>
<span class="sd">         &#39;x_nearendclusterid&#39;: None,</span>
<span class="sd">         &#39;x_nearenddevice&#39;: None,</span>
<span class="sd">         &#39;x_nearendguid&#39;: None,</span>
<span class="sd">         &#39;x_refci&#39;: None}</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">call_ref</span> <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_valid_call_ref</span><span class="p">(</span><span class="n">call_ref</span><span class="p">):</span>
            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;call reference not valid&#39;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering get_call_info_ext function&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">GET_CALL_INFO_EXT</span><span class="p">,</span> <span class="n">call_ref</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.place_call"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.place_call">[docs]</a>    <span class="k">def</span> <span class="nf">place_call</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dial_str</span><span class="o">=</span><span class="s1">&#39;null&#39;</span><span class="p">,</span> <span class="n">line_ref</span><span class="o">=</span><span class="s1">&#39;0&#39;</span><span class="p">,</span> <span class="n">calling</span><span class="o">=</span><span class="s1">&#39;null&#39;</span><span class="p">,</span>
                   <span class="n">call_type</span><span class="o">=</span><span class="s1">&#39;0&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Set up a call.</span>

<span class="sd">        :parameter dial_str: called party address (DN or URI)</span>
<span class="sd">        :parameter line_ref: line for outbound call</span>
<span class="sd">        :parameter calling: calling party address</span>
<span class="sd">        :parameter call_type: It would define the type of call</span>

<span class="sd">         * if call_type value is &quot;all&quot;,camelot will send all</span>
<span class="sd">           configured m-lines on the endpoint and this is the default.</span>
<span class="sd">         * call_type value can be any combination of the following tokens:</span>
<span class="sd">            * audio</span>
<span class="sd">            * video</span>
<span class="sd">            * bfcp</span>
<span class="sd">            * slides</span>
<span class="sd">            * fecc</span>
<span class="sd">            * ix</span>
<span class="sd">           Tokens in the call_type value should be separated</span>
<span class="sd">           with the character &#39;+&#39;.</span>

<span class="sd">        :returns: Upon success, the call&#39;s call reference. Otherwise</span>
<span class="sd">                    camelot.CamelotError would be raised</span>

<span class="sd">        Note: For siptrunk connection to two CUCMs(US287164), line_ref is same</span>
<span class="sd">        as index from get_conn_info(), for any outbound call. Please refer</span>
<span class="sd">        https://wiki.cisco.com/display/CAMELOT/Simulated+SIP+Trunk#SimulatedSIPTrunk-SipTrunkconnectionstotwoCUCM&#39;s</span>

<span class="sd">        &gt;&gt;&gt; ep1.place_call(&#39;7002&#39;)</span>
<span class="sd">        &#39;0aef0000&#39;</span>
<span class="sd">        &gt;&gt;&gt; ep1.place_call(call_type=&#39;audio+video&#39;)</span>
<span class="sd">        &#39;0aef0002&#39;</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering place_call function&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">line_ref</span><span class="p">:</span>
            <span class="n">line_ref</span> <span class="o">=</span> <span class="s1">&#39;0&#39;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">dial_str</span><span class="p">:</span>
            <span class="n">dial_str</span> <span class="o">=</span> <span class="s1">&#39;null&#39;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">call_type</span><span class="p">:</span>
            <span class="n">call_type</span> <span class="o">=</span> <span class="s1">&#39;0&#39;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">calling</span><span class="p">:</span>
            <span class="n">calling</span> <span class="o">=</span> <span class="s1">&#39;null&#39;</span>
        <span class="n">dialstr</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;dialstr&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">dialstr</span> <span class="ow">and</span> <span class="n">dialstr</span> <span class="o">!=</span> <span class="s1">&#39;null&#39;</span><span class="p">:</span>
            <span class="n">dial_str</span> <span class="o">=</span> <span class="n">dialstr</span>
        <span class="n">kargs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;called&#39;</span><span class="p">:</span> <span class="n">dial_str</span><span class="p">,</span>
                 <span class="s1">&#39;lineref&#39;</span><span class="p">:</span> <span class="n">line_ref</span><span class="p">,</span>
                 <span class="s1">&#39;calling&#39;</span><span class="p">:</span> <span class="n">calling</span><span class="p">,</span>
                 <span class="s1">&#39;calltype&#39;</span><span class="p">:</span> <span class="n">call_type</span><span class="p">}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span>
            <span class="n">camelot</span><span class="o">.</span><span class="n">PLACE_CALL</span><span class="p">,</span> <span class="o">**</span><span class="n">kargs</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_device_dial</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dialstr</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Checks call info to determine whether to use &#39;dial&#39; api</span>
<span class="sd">        or &#39;placecall&#39; api</span>

<span class="sd">        :parameter  dialstr: Carries the string to dial</span>
<span class="sd">        :returns: True if successful else False</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">calls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_calls</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">calls</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">call</span> <span class="ow">in</span> <span class="n">calls</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">call</span><span class="p">[</span><span class="s1">&#39;CallState&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;dialtone&#39;</span><span class="p">:</span>
                    <span class="n">call_ref</span> <span class="o">=</span> <span class="n">call</span><span class="p">[</span><span class="s1">&#39;Ref&#39;</span><span class="p">]</span>
                    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dial</span><span class="p">(</span><span class="n">dialstr</span><span class="p">,</span> <span class="n">call_ref</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">place_call</span><span class="p">(</span><span class="n">dialstr</span><span class="p">)</span>

<div class="viewcode-block" id="CamelotEndpoint.dial"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.dial">[docs]</a>    <span class="k">def</span> <span class="nf">dial</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dial_str</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">call_ref</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">calling</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Initiate call addressing for the specified call using the endpoint&#39;s</span>
<span class="sd">        default method of sending addresses and/or digits.  This method can</span>
<span class="sd">        be used to provide addressing information for a new outbound call</span>
<span class="sd">        or for sending digits to an IVR application during a connected call.</span>

<span class="sd">        For a new outbound call, this method will typically be called when the</span>
<span class="sd">        call progresses to the offhook and/or dialtone state.  Upon</span>
<span class="sd">        successful initiation of dialing and dial tone has been removed,</span>
<span class="sd">        the call progresses to the dialing state.  After addressing is</span>
<span class="sd">        complete and has been accepted by the remote end, the call</span>
<span class="sd">        progresses to the proceeding state.  Once the remote end is</span>
<span class="sd">        alerted of the new call and ring-back detected the call progresses</span>
<span class="sd">        to the alerting state.  After the remote end answers the call, the</span>
<span class="sd">        call progresses to the connected state.</span>

<span class="sd">        If the line upon which the call is placed does not have a fixed calling</span>
<span class="sd">        party address, one can be optionally specified via the calling</span>
<span class="sd">        argument.</span>
<span class="sd">        dialstr argument can take DN or URI.</span>
<span class="sd">        The complete called party address does not necessarily have to be sent</span>
<span class="sd">        in one method invocation. Rather, this method can be called several</span>
<span class="sd">        times in succession to send the complete called party address.</span>
<span class="sd">        Also, depending on the specific call control protocol, digits may</span>
<span class="sd">        be sent through the signaling or bearer channel.  Abbreviated</span>
<span class="sd">        dialing macros can not be used with the dial method.</span>

<span class="sd">        :parameter dial_str: can take DN or URI.</span>
<span class="sd">        :parameter call_ref: call reference of the call (:py:meth:`get_calls`)</span>
<span class="sd">        :parameter calling: calling party address</span>

<span class="sd">        :returns: Upon success returns call reference, and in case of</span>
<span class="sd">                    error/exception CamelotError exception is raised</span>

<span class="sd">        Making a new outgoing call</span>

<span class="sd">        &gt;&gt;&gt; call_ref = ep1.offhook()</span>
<span class="sd">        &gt;&gt;&gt; ep1.get_calls()</span>
<span class="sd">        [{&#39;CallState&#39;: &#39;dialtone&#39;,</span>
<span class="sd">          &#39;Id&#39;: &#39;0xf0c76340&#39;,</span>
<span class="sd">          &#39;Line&#39;: &#39;1&#39;,</span>
<span class="sd">          &#39;Ref&#39;: &#39;0xf0c76340&#39;}]</span>
<span class="sd">        &gt;&gt;&gt; ep1.dial(ep2.get_number(), call_ref)</span>
<span class="sd">        True</span>
<span class="sd">        &gt;&gt;&gt; ep1.get_calls()</span>
<span class="sd">        [{&#39;CallState&#39;: &#39;alerting&#39;,</span>
<span class="sd">          &#39;Id&#39;: &#39;0xf0c76340&#39;,</span>
<span class="sd">          &#39;Line&#39;: &#39;1&#39;,</span>
<span class="sd">          &#39;Ref&#39;: &#39;0xf0c76340&#39;}]</span>
<span class="sd">        &gt;&gt;&gt; ep2.get_calls()</span>
<span class="sd">        [{&#39;CallState&#39;: &#39;incoming&#39;,</span>
<span class="sd">          &#39;Id&#39;: &#39;0xa55fa60&#39;,</span>
<span class="sd">          &#39;Line&#39;: &#39;1&#39;,</span>
<span class="sd">          &#39;Ref&#39;: &#39;0xa55fa60&#39;}]</span>

<span class="sd">        Sending DTMF digits on a connected call</span>

<span class="sd">        &gt;&gt;&gt; ep1.dial(ep2)</span>
<span class="sd">        &lt;Call &lt;Device Camelot SEPBAACBAAC7001&gt; &lt;-&gt; &lt;Device Camelot SEPAAAABBBB</span>
<span class="sd">        6941&gt;&gt;</span>
<span class="sd">        &gt;&gt;&gt; ep1.get_calls()</span>
<span class="sd">        [{&#39;CallState&#39;: &#39;connected&#39;,</span>
<span class="sd">          &#39;Id&#39;: &#39;0xb34d948&#39;,</span>
<span class="sd">          &#39;Line&#39;: &#39;1&#39;,</span>
<span class="sd">          &#39;Ref&#39;: &#39;0xb34d948&#39;}]</span>
<span class="sd">        &gt;&gt;&gt; ep1.dial(&#39;123&#39;, &#39;0xb34d948&#39;)</span>
<span class="sd">        True</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering dial function&#39;</span><span class="p">)</span>
        <span class="n">dialstr</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;dialstr&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">dialstr</span><span class="p">:</span>
            <span class="n">dial_str</span> <span class="o">=</span> <span class="n">dialstr</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">call_ref</span> <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_valid_call_ref</span><span class="p">(</span><span class="n">call_ref</span><span class="p">):</span>
            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;call reference not valid&#39;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="n">kargs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;called&#39;</span><span class="p">:</span> <span class="n">dial_str</span><span class="p">,</span>
                 <span class="s1">&#39;calling&#39;</span><span class="p">:</span> <span class="n">calling</span><span class="p">}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span>
            <span class="n">camelot</span><span class="o">.</span><span class="n">DIAL</span><span class="p">,</span> <span class="n">call_ref</span><span class="p">,</span> <span class="o">**</span><span class="n">kargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.answer"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.answer">[docs]</a>    <span class="k">def</span> <span class="nf">answer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">call_ref</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Initiate answering of an inbound call by sending an answer protocol</span>
<span class="sd">        message.  When an inbound call is first detected, the call is in the</span>
<span class="sd">        seizure state.  If the protocol has to receive address digits, it then</span>
<span class="sd">        transitions to the recdigits state.  Once all addressing information is</span>
<span class="sd">        received, the call transitions to the incoming state.  At this point</span>
<span class="sd">        it can be answered.  Upon method invocation, the call transitions to</span>
<span class="sd">        the answering state and then to the connected state.</span>

<span class="sd">        :parameter call_ref: call reference</span>

<span class="sd">        :returns: Upon success, True is returned.  Otherwise False</span>

<span class="sd">        &gt;&gt;&gt; ep1.answer(&#39;0xe8faf034&#39;)</span>
<span class="sd">        True</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">call_ref</span> <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_valid_call_ref</span><span class="p">(</span><span class="n">call_ref</span><span class="p">):</span>
            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;call reference not valid&#39;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering answer function&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">ANSWER_CALL</span><span class="p">,</span> <span class="n">call_ref</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.endcall"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.endcall">[docs]</a>    <span class="k">def</span> <span class="nf">endcall</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">call_ref</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Sends an endcall protocol message to disconnect a call.</span>
<span class="sd">        If successful, the call transitions to the disconnecting state and</span>
<span class="sd">        then to the disconnected state</span>

<span class="sd">        :parameter call_ref: call reference</span>
<span class="sd">        :parameter timeout: delay in seconds to call endcall</span>

<span class="sd">        :returns: Upon success, True is returned.  Otherwise False</span>
<span class="sd">        &gt;&gt;&gt; ep1.endcall(&#39;0xf01ae034&#39;)</span>
<span class="sd">        True</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering endcall function&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">call_ref</span> <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_valid_call_ref</span><span class="p">(</span><span class="n">call_ref</span><span class="p">):</span>
            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;call reference not valid&#39;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">END_CALL</span><span class="p">,</span> <span class="n">call_ref</span><span class="p">,</span> <span class="n">timeout</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.start_capf"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.start_capf">[docs]</a>    <span class="k">def</span> <span class="nf">start_capf</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">auth_str</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;start_capf Initiate certificate update using CAPF.</span>
<span class="sd">         Initiate a certificate update process with the CAPF service.</span>
<span class="sd">         If an authentication string is provided it will be used to</span>
<span class="sd">         authenticate the endpoint to the CAPF service in case the</span>
<span class="sd">         endpoints authentication mode is set to 1 (string).</span>
<span class="sd">         The command will trigger a new SSL connection setup to the CAPF</span>
<span class="sd">         server and start the protocol.</span>

<span class="sd">        :parameter auth_str: endpoint to server authentication string.</span>

<span class="sd">        :returns: Upon success, True is returned.  Otherwise False.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering start_capf function&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">START_CAPF</span><span class="p">,</span> <span class="n">auth_str</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.stop_capf"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.stop_capf">[docs]</a>    <span class="k">def</span> <span class="nf">stop_capf</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;stopcapf  Terminate a running CAPF session.</span>
<span class="sd">         Terminates a running CAPF session. Invoking this command will</span>
<span class="sd">         cause closing the SSL connection to the CAPF server and release</span>
<span class="sd">         all related resources.</span>

<span class="sd">        :returns: Upon success, True is returned.  Otherwise False</span>

<span class="sd">        &gt;&gt;&gt; ep1.stop_capf()</span>
<span class="sd">        True</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering stop_capf function&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">STOP_CAPF</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.get_capf_info"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.get_capf_info">[docs]</a>    <span class="k">def</span> <span class="nf">get_capf_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Retrieve current information about a CAPF session.</span>

<span class="sd">        :returns: A dictionary of field:value pairs.</span>
<span class="sd">            The following fields are defined:</span>

<span class="sd">            :state: the current state of the CAPF session. \</span>
<span class="sd">                   below are possible values :-</span>

<span class="sd">                   :idle: CAPF session not started</span>
<span class="sd">                   :connecting: attempt to conntect to the CAPF service</span>
<span class="sd">                   :connected: connection established waiting for server    \</span>
<span class="sd">                               messages</span>
<span class="sd">                   :server busy: server busy, session timed out</span>
<span class="sd">                   :authenticating: endpoint attempts to authenticate itself \</span>
<span class="sd">                                   to the server</span>
<span class="sd">                   :generating key: endpoint is in the process of generating \</span>
<span class="sd">                                   a key or has sent the key to the server</span>
<span class="sd">                   :encrypting: endpoint is in the process of encrypting the \</span>
<span class="sd">                                responding to servers encrypt requests.</span>
<span class="sd">                   :storing certificate: endpoint is in process of storing   \</span>
<span class="sd">                                         the new certificate and responding to\</span>
<span class="sd">                                         the server</span>
<span class="sd">                   :deleting certificate: endpoint is in the process of      \</span>
<span class="sd">                                          deleting a certificate and         \</span>
<span class="sd">                                          responding to the server</span>
<span class="sd">                   :complete: the certficate update process has completed    \</span>
<span class="sd">                             successfully and a new certificate is stored</span>
<span class="sd">                   :aborted: the certificate update process has been aborted \</span>
<span class="sd">                            due to an abort message from the server</span>
<span class="sd">                   :stopped: user has requested to stop the session</span>
<span class="sd">                   :error state: an error has occurred during the certificate\</span>
<span class="sd">                                upgrade session.  The last error field should\</span>
<span class="sd">                                contain relevant information regarding the   \</span>
<span class="sd">                                error.</span>
<span class="sd">            :last error: contains an error description in case an error     \</span>
<span class="sd">                         occurs during the certificate upgrade process. In  \</span>
<span class="sd">                         case of no error the field value will be empty.</span>
<span class="sd">                         Below are the possible values :</span>

<span class="sd">                   :socket: a socket error has occurred                    \</span>
<span class="sd">                            (e.g. failed connecting)</span>
<span class="sd">                   :ssl: failed initializing SSL context</span>
<span class="sd">                   :authentication: failed authentication phase</span>
<span class="sd">                   :server busy: failed processing retry later message</span>
<span class="sd">                   :key generation: failed generating new key pair</span>
<span class="sd">                   :encrypting: failed processing encrypt request</span>
<span class="sd">                   :certificate store: failed processing certificate store \</span>
<span class="sd">                                       request.</span>
<span class="sd">                   :general: default error value</span>
<span class="sd">            :key_pair_gen: information related to key_gen request handling.</span>
<span class="sd">                           Following are the fields and the values</span>

<span class="sd">                   :key_type: key type received in key_gen request.        \</span>
<span class="sd">                             Values are RSA or ECDSA</span>
<span class="sd">                   :key_size: key size received in key_gen request for RSA \</span>
<span class="sd">                              Example: 2048</span>
<span class="sd">                   :ec_curve_id: curve name received in key_gen request for\</span>
<span class="sd">                                 ECDSA keys.Example: P-384</span>
<span class="sd">                   :reason: failure reason while generating key_gen response\</span>
<span class="sd">                            Example: mandatory_IE_missing</span>
<span class="sd">                   :status: status indicating if key_gen request was handled\</span>
<span class="sd">                           succesfully. Possible values: &quot;Success&quot;,&quot;Failure&quot;</span>
<span class="sd">            :sign_csr: contains information about capf details used in \</span>
<span class="sd">                       sign_csr request processing. It contains two fields \</span>
<span class="sd">                       digest algorithm &amp; reason.</span>

<span class="sd">                :digest_algorithm: it specifies the type of digest algorithm\</span>
<span class="sd">                                   to be used in generating the signature \</span>
<span class="sd">                                   of certificate request.possible values :-</span>

<span class="sd">                    :sha1: if digest alorigthm used in CSR request is \</span>
<span class="sd">                           of type SHA1</span>
<span class="sd">                    :sha256: if digest alorigthm used in CSR request is of \</span>
<span class="sd">                             type SHA256</span>
<span class="sd">                    :sha384: if digest alorigthm used in CSR request is of \</span>
<span class="sd">                             type SHA384</span>
<span class="sd">                    :sha512: if digest alorigthm used in CSR request is of \</span>
<span class="sd">                             type SHA512</span>
<span class="sd">                    :Invalid algorithm, Type not supported: if digest \</span>
<span class="sd">                                                            alorigthm used\</span>
<span class="sd">                                                            in CSR request\</span>
<span class="sd">                                                            is of Reserved,\</span>
<span class="sd">                                                            Invalid, \</span>
<span class="sd">                                                            Unsupported type</span>

<span class="sd">                :reason: contains an appropriate reason description in case\</span>
<span class="sd">                         of any failure / error occurs during sign_csr\</span>
<span class="sd">                         request processing. possible values :-</span>

<span class="sd">                      :&quot;&quot;: no problem in processing request</span>
<span class="sd">                      :success: process completed successfully</span>
<span class="sd">                      :unspecified: failed in initializing for CSR request</span>
<span class="sd">                      :resource_not_available: failed processing due to\</span>
<span class="sd">                                             internal resource unavailability\</span>
<span class="sd">                      :mandatory_IE_missing: failed to collect required IE\</span>
<span class="sd">                                           details for request processing</span>
<span class="sd">                      :internal_failure: for any failure within application on\</span>
<span class="sd">                                       processing request like not able to \</span>
<span class="sd">                                       send csr req, Digest msg create fail,\</span>
<span class="sd">                                       Digest Init fail etc.</span>
<span class="sd">                      :cert_update_fail: failed while updating the certificate\</span>
<span class="sd">                                       for request</span>
<span class="sd">                      :invalid_encrypt_operation: failed on encoding the \</span>
<span class="sd">                                                certificate with sign details\</span>
<span class="sd">                      :invalid_digest_algorithm: failed due to invalid digest\</span>
<span class="sd">                                               type received for csr request</span>
<span class="sd">                      :signature operation: failed on digest updation with\</span>
<span class="sd">                                            final sign data</span>

<span class="sd">        &gt;&gt;&gt; ep1.get_capf_info()</span>
<span class="sd">        {&#39;last error&#39;: &#39;&#39;, &#39;state&#39;: &#39;complete&#39;,</span>
<span class="sd">         &#39;key_pair_gen&#39;: {&#39;key_type&#39;: &#39;RSA&#39;, &#39;status&#39;: &#39;success&#39;,</span>
<span class="sd">             &#39;reason&#39;: &#39;&#39;, &#39;key_size&#39;: &#39;2048&#39;, &#39;ec_curve_name&#39;: &#39;&#39;},</span>
<span class="sd">         &#39;sign_csr&#39;: {&#39;digest_algorithm&#39;: &#39;sha384&#39;, &#39;reason&#39;: &#39;success&#39;}}</span>

<span class="sd">        &gt;&gt;&gt; ep1.get_capf_info()</span>
<span class="sd">        {&#39;last error&#39;: &#39;&#39;, &#39;state&#39;: &#39;complete&#39;,</span>
<span class="sd">         &#39;key_pair_gen&#39;: {&#39;key_type&#39;: &#39;ECDSA&#39;, &#39;status&#39;: &#39;success&#39;,</span>
<span class="sd">             &#39;reason&#39;: &#39;&#39;, &#39;key_size&#39;: &#39;&#39;, &#39;ec_curve_name&#39;: &#39;P-384&#39;},</span>
<span class="sd">         &#39;sign_csr&#39;: {&#39;digest_algorithm&#39;: &#39;sha384&#39;, &#39;reason&#39;: &#39;success&#39;}}</span>

<span class="sd">        &gt;&gt;&gt; ep1.get_capf_info()</span>
<span class="sd">        {&#39;last error&#39;: &#39;sign_csr_error, &#39;state&#39;: &#39;error state&#39;,</span>
<span class="sd">         &#39;key_pair_gen&#39;: {&#39;key_type&#39;: &#39;ECDSA&#39;, &#39;status&#39;: &#39;success&#39;,</span>
<span class="sd">             &#39;reason&#39;: &#39;&#39;, &#39;key_size&#39;: &#39;&#39;, &#39;ec_curve_name&#39;: &#39;P-384&#39;},</span>
<span class="sd">         &#39;sign_csr&#39;: {&#39;digest_algorithm&#39;: &#39;sha384&#39;,</span>
<span class="sd">             &#39;reason&#39;: &#39;invalid_encrypt_operation&#39;}}</span>

<span class="sd">         &gt;&gt;&gt; ep1.get_capf_info()</span>
<span class="sd">        {&#39;last error&#39;: &#39;sign_csr_error, &#39;state&#39;: &#39;error state&#39;,</span>
<span class="sd">         &#39;key_pair_gen&#39;: {&#39;key_type&#39;: &#39;RSA&#39;, &#39;status&#39;: &#39;success&#39;,</span>
<span class="sd">             &#39;reason&#39;: &#39;&#39;, &#39;key_size&#39;: &#39;&#39;, &#39;ec_curve_name&#39;: &#39;P-384&#39;},</span>
<span class="sd">         &#39;sign_csr&#39;: {&#39;digest_algorithm&#39;: &#39;sha384&#39;,</span>
<span class="sd">             &#39;reason&#39;: &#39;invalid_encrypt_operation&#39;}}</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">GET_CAPF_INFO</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.hedge_revoke_oauth"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.hedge_revoke_oauth">[docs]</a>    <span class="k">def</span> <span class="nf">hedge_revoke_oauth</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">token_type</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;It will be used to delete access_token or refresh_token, based on</span>
<span class="sd">         the given input.</span>

<span class="sd">        :parameter token_type: type of the token.</span>
<span class="sd">         Below are the possible values: \n</span>
<span class="sd">         * refresh_token</span>
<span class="sd">         * access_token</span>
<span class="sd">         * none (default value)</span>

<span class="sd">        :returns: Upon success, True is returned.  Otherwise False</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering hedge_revoke_oauth function&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">HEDGE_REVOKE_OAUTH</span><span class="p">,</span> <span class="n">token_type</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.fax_switchto"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.fax_switchto">[docs]</a>    <span class="k">def</span> <span class="nf">fax_switchto</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">call_ref</span><span class="p">,</span> <span class="n">fax_type</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Initiates switching to particular media for fax calls</span>

<span class="sd">        :parameter call_ref: call reference</span>
<span class="sd">        :parameter fax_type: type of fax mechanism used. Below</span>
<span class="sd">         is the possible value currently\n</span>
<span class="sd">         * T38_Relay(This is not case sensitive)</span>

<span class="sd">        :returns: Upon success, True is returned.  Otherwise False</span>
<span class="sd">                  For more reference on use of API please check</span>
<span class="sd">                  &#39;https://wiki.cisco.com/display/CAMELOT/FAX+T</span>
<span class="sd">                  .38+Support&#39;</span>

<span class="sd">        &gt;&gt;&gt; ep1.fax_switchto()</span>
<span class="sd">        True</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering fax_switchto function&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">call_ref</span> <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_valid_call_ref</span><span class="p">(</span><span class="n">call_ref</span><span class="p">):</span>
            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;call reference not valid&#39;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">fax_type</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;fax type is not available&#39;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">FAX_SWITCHTO</span><span class="p">,</span> <span class="n">call_ref</span><span class="p">,</span> <span class="n">fax_type</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.hold"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.hold">[docs]</a>    <span class="k">def</span> <span class="nf">hold</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">call_ref</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Initiates placing a call on hold</span>

<span class="sd">        :parameter call_ref: call reference</span>
<span class="sd">        :parameter timeout: delay to call hold</span>

<span class="sd">        :returns: Upon success, True is returned.  Otherwise False</span>

<span class="sd">        &gt;&gt;&gt; ep1.hold()</span>
<span class="sd">        &#39;true&#39;</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering hold function&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">call_ref</span> <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_valid_call_ref</span><span class="p">(</span><span class="n">call_ref</span><span class="p">):</span>
            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;call reference not valid&#39;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">HOLD</span><span class="p">,</span> <span class="n">call_ref</span><span class="p">,</span> <span class="n">timeout</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.resume"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.resume">[docs]</a>    <span class="k">def</span> <span class="nf">resume</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">call_ref</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Initiates call resume for a held call</span>

<span class="sd">        :parameter call_ref: call reference</span>
<span class="sd">        :parameter timeout: delay the resume operation in seconds</span>

<span class="sd">        :returns: Upon success, True is returned.  Otherwise False</span>

<span class="sd">        &gt;&gt;&gt; ep1.resume()</span>
<span class="sd">        True</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering hold function&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">call_ref</span> <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_valid_call_ref</span><span class="p">(</span><span class="n">call_ref</span><span class="p">):</span>
            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;call reference not valid&#39;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">RESUME</span><span class="p">,</span> <span class="n">call_ref</span><span class="p">,</span> <span class="n">timeout</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.transfer"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.transfer">[docs]</a>    <span class="k">def</span> <span class="nf">transfer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">call_ref</span><span class="p">,</span> <span class="n">transfer_mode</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">line_ref</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Initiate/complete a call transfer.</span>

<span class="sd">        To complete the transfer of a call, this method needs to be invoked</span>
<span class="sd">        twice.  The first invocation puts the specified call on hold awaiting</span>
<span class="sd">        transfer.  A new outbound call is automatically generated, which will</span>
<span class="sd">        be destination of the transfer.  After setting up this new call,</span>
<span class="sd">        invoke transfer a second time to complete the transfer.  The previous</span>
<span class="sd">        call that was put on hold is automatically disconnected. If the mode</span>
<span class="sd">        is not specified the default mode of transfer is consultative. Specify</span>
<span class="sd">        the mode to be used for transfer when the feature is initiated. Mode</span>
<span class="sd">        should not be specified when transfer is invoked for the second time</span>
<span class="sd">        to complete it. In case mode is specified when completing the transfer,</span>
<span class="sd">        it is ignored. Refer Appendix D for more information on Connected</span>
<span class="sd">        transfer mode.</span>

<span class="sd">        The lineref parameter is used to perform Connected transfer across</span>
<span class="sd">        lines on RT endpoints. By default the lineref of the current call will</span>
<span class="sd">        be used if this parameter is not specified. The lineref parameter</span>
<span class="sd">        should be specified only when the mode is connected. In case lineref</span>
<span class="sd">        is specified when mode is not connected, it will be ignored. Also</span>
<span class="sd">        lineref should be specified only for the first invocation of transfer,</span>
<span class="sd">        if it is specified while completing the transfer it will be ignored.</span>

<span class="sd">        :parameter call_ref: call reference</span>
<span class="sd">        :parameter transfer_mode: mode for the transfer either consultative or</span>
<span class="sd">                                    connected</span>
<span class="sd">        :parameter line_ref: lineref for outbound new call for transfer</span>

<span class="sd">        :returns: Upon successful initiation/completion of the transfer True.</span>
<span class="sd">                    Otherwise camelot.CamelotError</span>

<span class="sd">        &gt;&gt;&gt; ep1.transfer()</span>
<span class="sd">        True</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering transfer function&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">call_ref</span> <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_valid_call_ref</span><span class="p">(</span><span class="n">call_ref</span><span class="p">):</span>
            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;call reference not valid&#39;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="n">line_reference</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;line_reference&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">line_reference</span><span class="p">:</span>
            <span class="n">line_ref</span> <span class="o">=</span> <span class="n">line_reference</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;mode&#39;</span><span class="p">:</span> <span class="n">transfer_mode</span><span class="p">,</span>
                  <span class="s1">&#39;lineref&#39;</span><span class="p">:</span> <span class="n">line_ref</span><span class="p">}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">TRANSFER</span><span class="p">,</span> <span class="n">call_ref</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.conference"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.conference">[docs]</a>    <span class="k">def</span> <span class="nf">conference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">call_ref</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">line_ref</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Add a call to a conference</span>

<span class="sd">        Initiate/add a call to a conference.  If the specified call is not a</span>
<span class="sd">        conference call, then invocation of this method changes the specified</span>
<span class="sd">        call to a conference call, puts it on hold, and automatically</span>
<span class="sd">        generates a new outbound call.  Client code can then setup this new</span>
<span class="sd">        call and execute conference a second time to add the new call to the</span>
<span class="sd">        existing conference. This will resume the conference call and</span>
<span class="sd">        disconnect the new call. If the mode is not specified the default mode</span>
<span class="sd">        of conference is consultative. Specify the mode to be used for</span>
<span class="sd">        conference when the feature is initiated. Mode should not be specified</span>
<span class="sd">        when conference is invoked for the second time to complete it. In case</span>
<span class="sd">        mode is specified when completing the conference, it is ignored.</span>
<span class="sd">        Refer Appendix D for more information on connected conference mode.</span>

<span class="sd">        The lineref parameter is used to perform Connected conference across</span>
<span class="sd">        lines on RT endpoints. By default the lineref of the current call will</span>
<span class="sd">        be used if this parameter is not specified. The lineref parameter</span>
<span class="sd">        should be specified only when the mode is connected. In case lineref</span>
<span class="sd">        is specified when mode is not connected, it will be ignored. Also</span>
<span class="sd">        lineref should be specified only for the first invocation of</span>
<span class="sd">        conference, if it is specified while completing the conference it will</span>
<span class="sd">        be ignored.</span>

<span class="sd">        :parameter call_ref: call reference</span>
<span class="sd">        :parameter mode: mode for the transfer either consultative or</span>
<span class="sd">                         connected.</span>
<span class="sd">        :parameter line_ref: lineref for outbound new call for transfer</span>

<span class="sd">        :returns: Upon successful initiation/completion of the transfer True.</span>
<span class="sd">                    Otherwise camelot.CamelotError</span>

<span class="sd">        &gt;&gt;&gt; ep1.conference(call_ref=&#39;0xe805bb1c&#39;)</span>
<span class="sd">        True</span>

<span class="sd">        (!) Note conference() do not work for legacy SIP phones</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering conference function&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">call_ref</span> <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_valid_call_ref</span><span class="p">(</span><span class="n">call_ref</span><span class="p">):</span>
            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;call reference not valid&#39;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="n">transfer_mode</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;transfer_mode&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">line_reference</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;line_reference&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">transfer_mode</span><span class="p">:</span>
            <span class="n">mode</span> <span class="o">=</span> <span class="n">transfer_mode</span>
        <span class="k">if</span> <span class="n">line_reference</span><span class="p">:</span>
            <span class="n">line_ref</span> <span class="o">=</span> <span class="n">line_reference</span>
        <span class="n">kargs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;mode&#39;</span><span class="p">:</span> <span class="n">mode</span><span class="p">,</span>
                 <span class="s1">&#39;lineref&#39;</span><span class="p">:</span> <span class="n">line_ref</span><span class="p">}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">CONFERENCE</span><span class="p">,</span> <span class="n">call_ref</span><span class="p">,</span> <span class="o">**</span><span class="n">kargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.start_call_events"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.start_call_events">[docs]</a>    <span class="k">def</span> <span class="nf">start_call_events</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Enable call events</span>

<span class="sd">        :returns: Upon success, True is returned.Otherwise camelot.CamelotError</span>

<span class="sd">        &gt;&gt;&gt; ep1.start_call_events()</span>
<span class="sd">        True</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering start_call_events function&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">START_CALL_EVENTS</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.stop_call_events"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.stop_call_events">[docs]</a>    <span class="k">def</span> <span class="nf">stop_call_events</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;diable call events</span>

<span class="sd">        :returns: Upon success, True is returned.Otherwise camelot.CamelotError</span>

<span class="sd">        &gt;&gt;&gt; ep1.stop_call_events()</span>
<span class="sd">        True</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering stop_call_events function&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">STOP_CALL_EVENTS</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.start_callback_events"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.start_callback_events">[docs]</a>    <span class="k">def</span> <span class="nf">start_callback_events</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Enable call events</span>

<span class="sd">        :returns: Upon success, True is returned.Otherwise camelot.CamelotError</span>

<span class="sd">        &gt;&gt;&gt; ep1.start_callback_events()</span>
<span class="sd">        True</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering start_callback_events function&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">START_CALLBACK_EVENTS</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.stop_callback_events"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.stop_callback_events">[docs]</a>    <span class="k">def</span> <span class="nf">stop_callback_events</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;diable call events</span>

<span class="sd">        :returns: Upon success, True is returned.Otherwise camelot.CamelotError</span>

<span class="sd">        &gt;&gt;&gt; ep1.stop_callback_events()</span>
<span class="sd">        True</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering stop_callback_events function&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">STOP_CALLBACK_EVENTS</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.start_user_events"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.start_user_events">[docs]</a>    <span class="k">def</span> <span class="nf">start_user_events</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Enable user events</span>

<span class="sd">        :returns: Upon success, True is returned.Otherwise camelot.CamelotError</span>

<span class="sd">        &gt;&gt;&gt; ep1.start_user_events()</span>
<span class="sd">        True</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering start_user_events function&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">START_USER_EVENTS</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.stop_user_events"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.stop_user_events">[docs]</a>    <span class="k">def</span> <span class="nf">stop_user_events</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Disable user events</span>

<span class="sd">        :returns: Upon success, True is returned.Otherwise camelot.CamelotError</span>

<span class="sd">        &gt;&gt;&gt; ep1.stop_user_events()</span>
<span class="sd">        True</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering stop_user_events function&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">STOP_USER_EVENTS</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.start_stream_events"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.start_stream_events">[docs]</a>    <span class="k">def</span> <span class="nf">start_stream_events</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Enable stream_events</span>

<span class="sd">        :returns: Upon success, True is returned.Otherwise camelot.CamelotError</span>

<span class="sd">        &gt;&gt;&gt; ep1.start_stream_events()</span>
<span class="sd">        True</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering start_stream_events function&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">START_STREAM_EVENTS</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.stop_stream_events"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.stop_stream_events">[docs]</a>    <span class="k">def</span> <span class="nf">stop_stream_events</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Disable stream_events</span>

<span class="sd">        :returns: Upon success, True is returned.Otherwise camelot.CamelotError</span>

<span class="sd">        &gt;&gt;&gt; ep1.stop_stream_events()</span>
<span class="sd">        True</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering stop_stream_events function&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">STOP_STREAM_EVENTS</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.start_station_events"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.start_station_events">[docs]</a>    <span class="k">def</span> <span class="nf">start_station_events</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Enable collection of station events</span>

<span class="sd">        :returns: Upon success, True is returned.Otherwise camelot.CamelotError</span>

<span class="sd">        &gt;&gt;&gt; ep1.start_station_events()</span>
<span class="sd">        True</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering start_station_events function&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">START_STATION_EVENTS</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.stop_station_events"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.stop_station_events">[docs]</a>    <span class="k">def</span> <span class="nf">stop_station_events</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Disables collection of station events</span>

<span class="sd">        :returns: Upon success, True is returned.Otherwise camelot.CamelotError</span>

<span class="sd">        &gt;&gt;&gt; ep1.stop_station_events()</span>
<span class="sd">        True</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering start_station_events function&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">STOP_STATION_EVENTS</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.start_info_events"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.start_info_events">[docs]</a>    <span class="k">def</span> <span class="nf">start_info_events</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event_type</span><span class="o">=</span><span class="s1">&#39;state&#39;</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Enable collection of info events of specifide type</span>

<span class="sd">        :parameter event_type: event type can be one of the following:\n</span>
<span class="sd">                                * state\n</span>
<span class="sd">                                * calls\n</span>
<span class="sd">                                * streams\n</span>
<span class="sd">                                * primarycm\n</span>
<span class="sd">                                * backupcm\n</span>
<span class="sd">                                * bcgready\n</span>
<span class="sd">                                * lostconn\n</span>
<span class="sd">                                * transports\n</span>

<span class="sd">        :returns: Upon success, True is returned.Otherwise camelot.CamelotError</span>

<span class="sd">        &gt;&gt;&gt; ep1.start_info_events()</span>
<span class="sd">        True</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering start_info_events function&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">START_INFO_EVENTS</span><span class="p">,</span> <span class="n">event_type</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.stop_info_events"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.stop_info_events">[docs]</a>    <span class="k">def</span> <span class="nf">stop_info_events</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event_type</span><span class="o">=</span><span class="s1">&#39;state&#39;</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Disables collection of info events of specifide type</span>

<span class="sd">        :returns: Upon success, True is returned.Otherwise camelot.CamelotError</span>

<span class="sd">        &gt;&gt;&gt; ep1.stop_info_events()</span>
<span class="sd">        True</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering stop_info_events function&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">STOP_INFO_EVENTS</span><span class="p">,</span> <span class="n">event_type</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.start_call_info_events"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.start_call_info_events">[docs]</a>    <span class="k">def</span> <span class="nf">start_call_info_events</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">call_ref</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Enables collection of the call info events for a call</span>

<span class="sd">        :parameter call_ref: reference of the call for which event collection</span>
<span class="sd">            to be enabled</span>

<span class="sd">        &gt;&gt;&gt; ep1.start_call_info_events()</span>
<span class="sd">        True</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Registering for Callinfoevent on&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">call_ref</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;Can not register to callinfo events,&#39;</span>
                      <span class="s1">&#39; No call_ref provided&#39;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;callstate&#39;</span><span class="p">,</span>
                  <span class="s1">&#39;state&#39;</span><span class="p">:</span> <span class="s1">&#39;on&#39;</span><span class="p">}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">CALL_INFO_EVENT</span><span class="p">,</span> <span class="n">call_ref</span><span class="p">,</span>
                                   <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.stop_call_info_events"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.stop_call_info_events">[docs]</a>    <span class="k">def</span> <span class="nf">stop_call_info_events</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">call_ref</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Disables collection of the call info events for a call</span>

<span class="sd">        :parameter call_ref: reference of the call for which event collection</span>
<span class="sd">            to be disabled</span>

<span class="sd">        &gt;&gt;&gt; ep1.stop_call_info_events()</span>
<span class="sd">        True</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">call_ref</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;Cant un-register callinfo events, No call_ref provided&#39;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;callstate&#39;</span><span class="p">,</span>
                  <span class="s1">&#39;state&#39;</span><span class="p">:</span> <span class="s1">&#39;off&#39;</span><span class="p">}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">CALL_INFO_EVENT</span><span class="p">,</span> <span class="n">call_ref</span><span class="p">,</span>
                                   <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.start_stream_info_events"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.start_stream_info_events">[docs]</a>    <span class="k">def</span> <span class="nf">start_stream_info_events</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stream_ref</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Enables the collection of streaminfo events whenever media stream</span>
<span class="sd">         changes state</span>

<span class="sd">        :parameter stream_ref: stream reference</span>
<span class="sd">        :returns: True on success, Error message on failure</span>

<span class="sd">        &gt;&gt;&gt; ep1.start_stream_info_events()</span>
<span class="sd">        True</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Registering for streaminfoevent on&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_valid_call_ref</span><span class="p">(</span><span class="n">stream_ref</span><span class="p">):</span>
            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;Can not register to streaminfo events,&#39;</span>
                      <span class="s1">&#39; No stream_ref provided&#39;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;streamstate&#39;</span><span class="p">,</span>
                  <span class="s1">&#39;state&#39;</span><span class="p">:</span> <span class="s1">&#39;on&#39;</span><span class="p">}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">STREAM_INFO_EVENT</span><span class="p">,</span> <span class="n">stream_ref</span><span class="p">,</span>
                                   <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.stop_stream_info_events"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.stop_stream_info_events">[docs]</a>    <span class="k">def</span> <span class="nf">stop_stream_info_events</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stream_ref</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Deactivates new streaminfo event generation.</span>

<span class="sd">        :parameter stream_ref: stream reference</span>
<span class="sd">        :returns: True on success, Error message on failure</span>

<span class="sd">        &gt;&gt;&gt; ep1.stop_stream_info_events()</span>
<span class="sd">        True</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_valid_call_ref</span><span class="p">(</span><span class="n">stream_ref</span><span class="p">):</span>
            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;Can not un-register streaminfo events,&#39;</span>
                      <span class="s1">&#39; No stream_ref provided&#39;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;streamstate&#39;</span><span class="p">,</span>
                  <span class="s1">&#39;state&#39;</span><span class="p">:</span> <span class="s1">&#39;off&#39;</span><span class="p">}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">STREAM_INFO_EVENT</span><span class="p">,</span> <span class="n">stream_ref</span><span class="p">,</span>
                                   <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.start_transport_info_events"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.start_transport_info_events">[docs]</a>    <span class="k">def</span> <span class="nf">start_transport_info_events</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">transport_ref</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;enables the collectoin of transportinfo events.</span>

<span class="sd">         A transport event occurs as long as the transport has 1 or more</span>
<span class="sd">         protocol messages to pass to the client.</span>

<span class="sd">        :parameter transport_ref: transport reference of the transport</span>

<span class="sd">        :returns: True on success, Error message on failure</span>

<span class="sd">        &gt;&gt;&gt; ep1.start_transport_info_events()</span>
<span class="sd">        True</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_valid_call_ref</span><span class="p">(</span><span class="n">transport_ref</span><span class="p">):</span>
            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;Cant register to transport info events, No &#39;</span>
                      <span class="s1">&#39;transport_ref provided&#39;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="n">decimal_val</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">transport_ref</span><span class="p">,</span> <span class="mi">16</span><span class="p">)</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;transportstate&#39;</span><span class="p">,</span>
                  <span class="s1">&#39;state&#39;</span><span class="p">:</span> <span class="s1">&#39;on&#39;</span><span class="p">}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">TRANSPORT_INFO_EVENT</span><span class="p">,</span> <span class="n">decimal_val</span><span class="p">,</span>
                                   <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.stop_transport_info_events"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.stop_transport_info_events">[docs]</a>    <span class="k">def</span> <span class="nf">stop_transport_info_events</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">transport_ref</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Disables the collectoin of transportinfo events.</span>
<span class="sd">        :parameter transport_ref: transport reference of the transport</span>

<span class="sd">        :returns: True on success, Error message on failure</span>
<span class="sd">        &gt;&gt;&gt; ep1.stop_transport_info_events()</span>
<span class="sd">        True</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_valid_call_ref</span><span class="p">(</span><span class="n">transport_ref</span><span class="p">):</span>
            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;Cant unregister transport info events, No transport_ref&#39;</span>
                      <span class="s1">&#39; provided&#39;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="n">decimal_val</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">transport_ref</span><span class="p">,</span> <span class="mi">16</span><span class="p">)</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;transportstate&#39;</span><span class="p">,</span>
                  <span class="s1">&#39;state&#39;</span><span class="p">:</span> <span class="s1">&#39;off&#39;</span><span class="p">}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">TRANSPORT_INFO_EVENT</span><span class="p">,</span> <span class="n">decimal_val</span><span class="p">,</span>
                                   <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.start_trace_events"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.start_trace_events">[docs]</a>    <span class="k">def</span> <span class="nf">start_trace_events</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Activate trace collection with an optional filter mask.</span>

<span class="sd">        :parameter mask:  bit mask, Enables trace collection based on the</span>
<span class="sd">            specified bit mask.  If the bit mask argument is omitted, this</span>
<span class="sd">            command simply returns the current bitmask value.  Bit mask values</span>
<span class="sd">            are tool-specific.\n</span>
<span class="sd">            For Camelot the values are:\n</span>
<span class="sd">            * 0x0 - Disable all trace logging</span>
<span class="sd">            * 0x1 - Enable collection of error traces</span>
<span class="sd">            * 0x2 - Enable collection of  second level error traces</span>
<span class="sd">            * 0x4 - Enable collection of informational traces</span>
<span class="sd">            * 0x8 - Enable collection of level 1 debug traces</span>
<span class="sd">            * 0x10 - Enable collection of level 2 debug traces</span>
<span class="sd">            * 0x20 - Enable collection of level 3 debug traces</span>
<span class="sd">            * 0x40 - Enable collection of level 4 debug traces</span>
<span class="sd">            * 0x80 - Enable collection of IP-STE debug traces</span>

<span class="sd">        :returns: The current trace filter bit mask</span>

<span class="sd">        &gt;&gt;&gt; ep1.start_trace_events(&#39;0X1&#39;)</span>
<span class="sd">        &#39;0X1&#39;</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering start_trace_events function&#39;</span><span class="p">)</span>
        <span class="n">mask</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">mask</span><span class="p">)</span>
        <span class="n">trace_masks</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0x0&#39;</span><span class="p">,</span> <span class="s1">&#39;0x1&#39;</span><span class="p">,</span> <span class="s1">&#39;0x2&#39;</span><span class="p">,</span> <span class="s1">&#39;0x4&#39;</span><span class="p">,</span>
                       <span class="s1">&#39;0x8&#39;</span><span class="p">,</span> <span class="s1">&#39;0x10&#39;</span><span class="p">,</span> <span class="s1">&#39;0x20&#39;</span><span class="p">,</span> <span class="s1">&#39;0x40&#39;</span><span class="p">,</span> <span class="s1">&#39;0x80&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">mask</span> <span class="ow">or</span> <span class="n">mask</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">trace_masks</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;Cant register to Trace events, Not a valid Mask&#39;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">START_TRACE_EVENTS</span><span class="p">,</span> <span class="n">mask</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.stop_trace_events"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.stop_trace_events">[docs]</a>    <span class="k">def</span> <span class="nf">stop_trace_events</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Deactivates trace collection</span>

<span class="sd">        :returns: Trace event status</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering stop_trace_events function&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">STOP_TRACE_EVENTS</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.start_transport_events"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.start_transport_events">[docs]</a>    <span class="k">def</span> <span class="nf">start_transport_events</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">transport_ref</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;enables the collectoin of transport events.</span>

<span class="sd">         A transport event occurs as long as the transport has 1 or more</span>
<span class="sd">         protocol messages to pass to the client.</span>

<span class="sd">        :parameter transport_ref: transport reference of the transport</span>

<span class="sd">        :returns: True on success, Error message on failure</span>

<span class="sd">        &gt;&gt;&gt; ep1.start_transport_events()</span>
<span class="sd">        True</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering start_transport_events function&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_valid_call_ref</span><span class="p">(</span><span class="n">transport_ref</span><span class="p">):</span>
            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;Cant register to transport events, No transport_ref &#39;</span>
                      <span class="s1">&#39;provided&#39;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span>
            <span class="n">camelot</span><span class="o">.</span><span class="n">START_TRANSPORT_EVENTS</span><span class="p">,</span> <span class="n">transport_ref</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.stop_transport_events"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.stop_transport_events">[docs]</a>    <span class="k">def</span> <span class="nf">stop_transport_events</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">transport_ref</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Disables the collectoin of transport events.</span>
<span class="sd">        :parameter transport_ref: transport reference of the transport</span>

<span class="sd">        :returns: True on success, Error message on failure</span>

<span class="sd">        &gt;&gt;&gt; ep1.stop_transport_events()</span>
<span class="sd">        True</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering stop_transport_events function&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">transport_ref</span> <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_valid_call_ref</span><span class="p">(</span><span class="n">transport_ref</span><span class="p">):</span>
            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;Cant stop transport events, No transport_ref &#39;</span>
                      <span class="s1">&#39;provided&#39;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span>
            <span class="n">camelot</span><span class="o">.</span><span class="n">STOP_TRANSPORT_EVENTS</span><span class="p">,</span> <span class="n">transport_ref</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.is_endpoint_bcg_ready"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.is_endpoint_bcg_ready">[docs]</a>    <span class="k">def</span> <span class="nf">is_endpoint_bcg_ready</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns if the end point bcg is ready</span>
<span class="sd">        :returns: 1 if bcg is ready</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering is_endpoint_bcg_ready function&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">ISENDPOINTBCGREADY</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.place_script"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.place_script">[docs]</a>    <span class="k">def</span> <span class="nf">place_script</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">shandle</span><span class="o">=</span><span class="s1">&#39;null&#39;</span><span class="p">,</span> <span class="n">sargs</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">scripttype</span><span class="o">=</span><span class="s1">&#39;tcl&#39;</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Place script</span>

<span class="sd">        :parameter shandle: handled returned by loadsss</span>
<span class="sd">        :paramter sargs: arguments to the sss script</span>
<span class="sd">         else respective error will be returned.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering place_script function&#39;</span><span class="p">)</span>
        <span class="n">sArgs</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">if</span> <span class="n">shandle</span> <span class="o">!=</span> <span class="s1">&#39;null&#39;</span><span class="p">:</span>
            <span class="n">hex_val</span> <span class="o">=</span> <span class="n">shandle</span><span class="p">[</span><span class="mi">2</span><span class="p">:]</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">c</span> <span class="ow">in</span> <span class="n">string</span><span class="o">.</span><span class="n">hexdigits</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">hex_val</span><span class="p">):</span>
                <span class="k">return</span> <span class="s1">&#39;Invalid string handle&#39;</span>
        <span class="k">if</span> <span class="n">scripttype</span> <span class="ow">is</span> <span class="s2">&quot;tcl&quot;</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">sargs</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">return</span> <span class="s2">&quot;Invalid argument format - argument must be space separated&quot;</span>
        <span class="k">if</span> <span class="n">scripttype</span> <span class="ow">is</span> <span class="s2">&quot;python&quot;</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">sargs</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="k">return</span> <span class="s2">&quot;Invalid argument format - argument must be in list&quot;</span>
        <span class="k">if</span> <span class="n">scripttype</span> <span class="ow">is</span> <span class="s2">&quot;tcl&quot;</span><span class="p">:</span>
            <span class="n">sArgs</span> <span class="o">=</span> <span class="n">sargs</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">sargs</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">sargs</span><span class="p">)):</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">sargs</span><span class="p">[</span><span class="n">key</span><span class="p">])</span> <span class="ow">is</span> <span class="n">CamelotEndpoint</span><span class="p">):</span>
                        <span class="n">sargs</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">:</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="s2">&quot;endpoint&quot;</span><span class="p">,</span>
                                                <span class="n">sargs</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">get_ref</span><span class="p">())</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">sargs</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">:</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
                                                <span class="n">sargs</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>

                <span class="n">sArgs</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">sargs</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">sArgs</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">PLACE_SCRIPT</span><span class="p">,</span> <span class="n">shandle</span><span class="p">,</span> <span class="n">sArgs</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.get_script_info"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.get_script_info">[docs]</a>    <span class="k">def</span> <span class="nf">get_script_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">shandle</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;get sss script info</span>

<span class="sd">        :parameter ip: ip address of Camelot server</span>
<span class="sd">        :parameter port: listening port of Camelot server</span>
<span class="sd">        :parameter shandle: script handled returned by loadsss</span>

<span class="sd">        :returns: dictionary of sss script information</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering into get_script_info function&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">GET_SCRIPT_INFO</span><span class="p">,</span> <span class="n">shandle</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.get_ref"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.get_ref">[docs]</a>    <span class="k">def</span> <span class="nf">get_ref</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns the camelot specific reference of an endpoint</span>

<span class="sd">        :returns: returns and endpoint referance in the format</span>
<span class="sd">        ::camelot::camelot_Server_ip:camelot_server_port:index</span>

<span class="sd">        &gt;&gt;&gt; serv = camelot.create_camelot_server(&#39;10.12.10.180&#39;, &#39;5001&#39;)</span>
<span class="sd">        &gt;&gt;&gt; ep = serv.create_new_endpoint()</span>
<span class="sd">        &gt;&gt;&gt; ep.get_camelot_endpoint_ref()</span>
<span class="sd">        &#39;::camelot::10.12.10.180:5001:00000006&#39;</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="s1">&#39;::camelot::</span><span class="si">{}</span><span class="s1">:</span><span class="si">{}</span><span class="s1">:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_get_server_conn</span><span class="p">()</span><span class="o">.</span><span class="n">server_ip</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_get_server_conn</span><span class="p">()</span><span class="o">.</span><span class="n">server_port</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ep_id</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.get_call_stats"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.get_call_stats">[docs]</a>    <span class="k">def</span> <span class="nf">get_call_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">clear</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;get call stat</span>

<span class="sd">        :parameter clear: return and clear the buffer</span>

<span class="sd">        :returns: the call statistic in dict</span>

<span class="sd">        &gt;&gt;&gt; ep.get_call_stats()</span>
<span class="sd">        {</span>
<span class="sd">        &#39;outbound&#39;: &#39;0&#39;,</span>
<span class="sd">        &#39;inbound&#39;: &#39;1&#39;,</span>
<span class="sd">        &#39;connects&#39;: &#39;1&#39;,</span>
<span class="sd">        &#39;disconnects&#39;: &#39;1&#39;,</span>
<span class="sd">        &#39;failures&#39;: &#39;0&#39;,</span>
<span class="sd">        &#39;cleared&#39;: &#39;0&#39;,</span>
<span class="sd">        &#39;cleared by peer&#39;: &#39;1&#39;,</span>
<span class="sd">        &#39;glare&#39;: &#39;0&#39;,</span>
<span class="sd">        &#39;no dial tone&#39;: &#39;0&#39;,</span>
<span class="sd">        &#39;busy&#39;: &#39;0&#39;,</span>
<span class="sd">        &#39;reorder&#39;: &#39;0&#39;,</span>
<span class="sd">        &#39;setup timeout&#39;: &#39;0&#39;,</span>
<span class="sd">        &#39;protocol error&#39;: &#39;0&#39;,</span>
<span class="sd">        &#39;no answer&#39;: &#39;0&#39;,</span>
<span class="sd">        &#39;abandoned&#39;: &#39;0&#39;,</span>
<span class="sd">        &#39;abandoned by peer&#39;: &#39;0&#39;,</span>
<span class="sd">        &#39;out of service&#39;: &#39;0&#39;,</span>
<span class="sd">        &#39;media error&#39;: &#39;0&#39;,</span>
<span class="sd">        &#39;supp. service error&#39;: &#39;0&#39;,</span>
<span class="sd">        &#39;callsetup path conf. error&#39;: [u&#39;{Audio} 0&#39;, u&#39;{Video} 0&#39;],</span>
<span class="sd">        &#39;midcall path conf. error&#39;: [u&#39;{Audio} 0&#39;, u&#39;{Video} 0&#39;],</span>
<span class="sd">        &#39;script error&#39;: &#39;0&#39;,</span>
<span class="sd">        &#39;current calls&#39;: [u&#39;outbound 0&#39;, u&#39;offhook 0&#39;, u&#39;dialtone 0&#39;,</span>
<span class="sd">        u&#39;dialing 0&#39;, u&#39;proceeding 0&#39;, u&#39;alerting 0&#39;, u&#39;seizure 0&#39;,</span>
<span class="sd">        u&#39;recdigits 0&#39;, u&#39;incoming 0&#39;, u&#39;answering 0&#39;, u&#39;rejecting 0&#39;,</span>
<span class="sd">        u&#39;connected 0&#39;, u&#39;held 0&#39;, u&#39;remoteinuse 0&#39;,</span>
<span class="sd">        u&#39;disconnecting 0&#39;, u&#39;disconnected 1&#39;],</span>
<span class="sd">        &#39;missedcallinfo&#39;: [u&#39;missedcalls 0&#39;],</span>
<span class="sd">        &#39;placedcallinfo&#39;: [u&#39;placedcalls 0&#39;]</span>
<span class="sd">        }</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering into get_call_stats function&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">GET_CALL_STATS</span><span class="p">,</span> <span class="n">clear</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.set_client_data"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.set_client_data">[docs]</a>    <span class="k">def</span> <span class="nf">set_client_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Associates an arbitrary string to an endpoint</span>

<span class="sd">        :parameter data: arbitrary string to associate with endpoint</span>

<span class="sd">        :returns: The newly assigned string</span>

<span class="sd">        &gt;&gt;&gt; ep.set_client_data(&#39;phone1&#39;)</span>
<span class="sd">        phone1</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering into set_client_data function&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">SET_CLIENT_DATA</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.get_client_data"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.get_client_data">[docs]</a>    <span class="k">def</span> <span class="nf">get_client_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Returns endpoint&#39;s assigned client string</span>

<span class="sd">        :returns: The endpoint&#39;s assigned arbitrary client string</span>

<span class="sd">        &gt;&gt;&gt; ep.get_client_data()</span>
<span class="sd">        phone1</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering into get_client_data function&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">GET_CLIENT_DATA</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.set_client_desc"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.set_client_desc">[docs]</a>    <span class="k">def</span> <span class="nf">set_client_desc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;This command saves an arbitrary string description on the endpoint.</span>
<span class="sd">        This description cannot be used to retrieve or lookup the endpoint.</span>
<span class="sd">        To remove the saved string from the endpoint, omit the desc argument.</span>
<span class="sd">        Saved description can be retrieved using the command get_client_desc</span>

<span class="sd">        :parameter desc: arbitrary string to associate with endpoint</span>

<span class="sd">        :returns: The newly saved string</span>

<span class="sd">        &gt;&gt;&gt; ep.set_client_desc(&#39;phone1&#39;)</span>
<span class="sd">        phone1</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering into set_client_desc function&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">desc</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;empty description is passed&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">SET_CLIENT_DESC</span><span class="p">,</span> <span class="n">desc</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.get_client_desc"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.get_client_desc">[docs]</a>    <span class="k">def</span> <span class="nf">get_client_desc</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Retrieve the arbitrary string description saved using setclientdesc</span>

<span class="sd">        :returns: The saved arbitrary client string</span>

<span class="sd">        &gt;&gt;&gt; ep.get_client_desc()</span>
<span class="sd">        phone1</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering into get_client_desc function&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">GET_CLIENT_DESC</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.set_call_subject"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.set_call_subject">[docs]</a>    <span class="k">def</span> <span class="nf">set_call_subject</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="s1">&#39;null&#39;</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Sets the SIP Subject header value for the next call</span>
<span class="sd">         initiated on the endpoint.</span>

<span class="sd">        :parameter subject: value string. Default value empty string</span>

<span class="sd">        :returns: same set value string</span>

<span class="sd">        &gt;&gt;&gt; ep.set_call_subject(&#39;Message from PhoneA&#39;)</span>
<span class="sd">        Message from PhoneA</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">subject</span><span class="p">:</span>
            <span class="n">subject</span> <span class="o">=</span> <span class="s1">&#39;null&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">SET_CALL_SUBJECT</span><span class="p">,</span> <span class="n">subject</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.get_call_subject"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.get_call_subject">[docs]</a>    <span class="k">def</span> <span class="nf">get_call_subject</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Get the SIP Subject header value set by set_call_subject api</span>
<span class="sd">         for the endpoint.</span>

<span class="sd">        :returns: subject string set by set_call_subject() or empty string</span>

<span class="sd">        &gt;&gt;&gt; ep.get_call_subject()</span>
<span class="sd">        Message from PhoneA</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">GET_CALL_SUBJECT</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.get_methods"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.get_methods">[docs]</a>    <span class="k">def</span> <span class="nf">get_methods</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Returns all supported methods</span>

<span class="sd">        :returns: Returns list of all methods supported/implemented</span>
<span class="sd">                  by this endpoint.</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">mlist</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getmembers</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">endpoint</span><span class="o">.</span><span class="n">CamelotEndpoint</span><span class="p">,</span>
                                    <span class="n">predicate</span><span class="o">=</span><span class="n">inspect</span><span class="o">.</span><span class="n">ismethod</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">l</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;__init__&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;_binary_to_boolean&#39;</span><span class="p">,</span> <span class="s1">&#39;_convert_hex_to_int&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;_is_valid_call_ref&#39;</span><span class="p">,</span> <span class="s1">&#39;_is_valid_decimal&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;_is_valid_integer&#39;</span><span class="p">,</span> <span class="s1">&#39;_query_camelot&#39;</span><span class="p">):</span>
                <span class="n">mlist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">l</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">mlist</span></div>

<div class="viewcode-block" id="CamelotEndpoint.get_uris"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.get_uris">[docs]</a>    <span class="k">def</span> <span class="nf">get_uris</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">uri</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">primary</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Returns list of directory uri(s) associated with the line(s)</span>

<span class="sd">        :parameter line: Specifying the line argument with the value between</span>
<span class="sd">         1 to 200 returs the directory uri(s) associated with the specified</span>
<span class="sd">         lineIndex</span>
<span class="sd">        :parameter primary: returns only the primary directory uri of all the</span>
<span class="sd">         line or specific line if the line argument is also specified.</span>
<span class="sd">        :parameter uri: If specified with the lineIndex returns only the uri</span>
<span class="sd">         name of the particular uri index of that line.</span>

<span class="sd">        Note: uri option cannot be given with primary argument.</span>
<span class="sd">        And uri must be used along with line.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="n">line</span> <span class="o">&gt;</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">camelot</span><span class="o">.</span><span class="n">CamelotError</span><span class="p">(</span><span class="s1">&#39;Invalid line index passed&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">line</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">uri</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">camelot</span><span class="o">.</span><span class="n">CamelotError</span><span class="p">(</span><span class="s1">&#39;Uri cannot be specified without line&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">primary</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">uri</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">camelot</span><span class="o">.</span><span class="n">CamelotError</span><span class="p">(</span><span class="s1">&#39;Uri cannot be specified with primary&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">primary</span><span class="p">:</span>
            <span class="n">primary</span> <span class="o">=</span> <span class="s1">&#39;primary&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">primary</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span>

        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;uri&#39;</span><span class="p">:</span> <span class="n">uri</span><span class="p">,</span>
                  <span class="s1">&#39;primary&#39;</span><span class="p">:</span> <span class="n">primary</span><span class="p">}</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">GET_URIS</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.get_rtp_rx_stats"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.get_rtp_rx_stats">[docs]</a>    <span class="k">def</span> <span class="nf">get_rtp_rx_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stream_type</span><span class="o">=</span><span class="s1">&#39;audio&#39;</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Returns the RTP Rx statistics information</span>

<span class="sd">        :parameter stream_type:  stream_type of stream. Possible values \n</span>
<span class="sd">            * audio - statistics with respect to audio stream (default)</span>
<span class="sd">            * video - statistics with rspect to video stream</span>

<span class="sd">        :returns: dictionary of informations mentioned below \n</span>
<span class="sd">            Audio Statistics field: \n</span>
<span class="sd">            * duration - Total number of seconds since beginning of reception</span>
<span class="sd">            * pktrcvd - Total number of RTP packets received</span>
<span class="sd">            * octrcvd - Total number of RTP payload octets received</span>
<span class="sd">                        (not including RTP header).</span>
<span class="sd">            * latepkt - Total number of late RTP packets received.</span>
<span class="sd">            * lostpkt - Total number of lost RTP packets received</span>
<span class="sd">                        (not including late RTP packets).</span>
<span class="sd">            * avgjitter - An estimate of the statistical variance of the</span>
<span class="sd">                        RTP packet inter-arrival time measured in timestamp</span>
<span class="sd">                        units and calculated according to RFC 1889.</span>
<span class="sd">            * vqmetrics - The VQ metrics are a free form text field.</span>
<span class="sd">                            In order to support extensions to this without</span>
<span class="sd">                            modifying the SIP header, the value of the VQ</span>
<span class="sd">                            metrics will be copied into the CMR exactly as it</span>
<span class="sd">                            appears in the SIP message. Since the VQ metrics</span>
<span class="sd">                            need to be copied directly into the CMR, the</span>
<span class="sd">                            following format will be used in the</span>
<span class="sd">                            SIP message: VqMetrics=&#39;&lt;metrics&gt;&#39;\n</span>
<span class="sd">            Video Statistics field: \n</span>
<span class="sd">            * duration - Total number of seconds since beginning of reception\n</span>
<span class="sd">            * numpktrcvd - Total number of RTP packets received\n</span>
<span class="sd">            * numoctrcvd - Total number of RTP payload octets received</span>
<span class="sd">                           (not including RTP header).\n</span>
<span class="sd">            * numlostpkt - Total number of lost RTP packets received</span>
<span class="sd">                           (not including late RTP packets).\n</span>
<span class="sd">            * avgjitter - Average jitter.  An estimate of the statistical</span>
<span class="sd">                         variance of the RTP packet inter-arrival time measured</span>
<span class="sd">                         in timestamp units.\n</span>
<span class="sd">            * content - Identifies the type of received video stream.</span>
<span class="sd">                        The possible values can be \n</span>
<span class="sd">                        * main</span>
<span class="sd">                        * speaker</span>
<span class="sd">                        * slides</span>
<span class="sd">            * roundtriptime - Round Trip Time. Useful for figuring out how fast</span>
<span class="sd">                             recovery can happen and to ensure within</span>
<span class="sd">                             expected bound.\n</span>
<span class="sd">            * onewaydelay - One Way Delay.  Only available if endpoints are</span>
<span class="sd">                            time synchronized (same NTP source).</span>
<span class="sd">                            otherwise &#39;NA&#39;\n</span>
<span class="sd">            * CiscoRxVM - This field is a combination of certain other</span>
<span class="sd">                          parameters which user can configure them sperately,</span>
<span class="sd">                          but when displaying this field all the related fields</span>
<span class="sd">                          wil be combined and displayed as a complete string.</span>
<span class="sd">                          For example, CS, SCS, DSCP, etc., can be configured</span>
<span class="sd">                          separately.  Refer sip.rtpstats configuration</span>
<span class="sd">                          parameter. For example \n</span>
<span class="sd">                          CiscoRxVM=&#39;CS=xxx;SCS=xxx;DSCP=xxx;DSCPunad=xxx;</span>
<span class="sd">                          RxFramesLost=xxx;RxCodec=xxx;RxBw=xxx;RxBwMax=xxx;</span>
<span class="sd">                          RxReso=xxx;RxFrameRate=xxx; PRPL=xxx;PostFEC=xxx&#39;\n</span>
<span class="sd">            * ice      - if Ice enabled Ice info in format mmm:xxx:nnn:tttt\n</span>
<span class="sd">                        * mmm: Mode.One of ice|lite|none|unk.Default value unk</span>
<span class="sd">                        * xxx:Type of candidate selected host/relay/srflx/prflx</span>
<span class="sd">                        * nnn: Max time(ms)for connectivity check on that path</span>
<span class="sd">                          Default value is 0</span>
<span class="sd">                        * ttt: time(ms)for the full ICE negotiation to complete</span>
<span class="sd">                          Default value is 0\n</span>
<span class="sd">        &gt;&gt;&gt; ep1.get_rtp_rx_stats()</span>
<span class="sd">        {&#39;avgjitter&#39;: &#39;0&#39;,</span>
<span class="sd">         &#39;duration&#39;: &#39;0&#39;,</span>
<span class="sd">         &#39;latepkt&#39;: &#39;0&#39;,</span>
<span class="sd">         &#39;lostpkt&#39;: &#39;0&#39;,</span>
<span class="sd">         &#39;octrcvd&#39;: &#39;0&#39;,</span>
<span class="sd">         &#39;pktrcvd&#39;: &#39;0&#39;}</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">GET_RTP_RX_STAT</span><span class="p">,</span> <span class="n">stream_type</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.get_rtp_tx_stats"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.get_rtp_tx_stats">[docs]</a>    <span class="k">def</span> <span class="nf">get_rtp_tx_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stream_type</span><span class="o">=</span><span class="s1">&#39;audio&#39;</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Returns the   Gets the RTP Tx statistics.</span>

<span class="sd">        :parameter stream_type:  stream_type of stream. Possible values \n</span>
<span class="sd">            * audio - statistics with respect to audio stream (default)</span>
<span class="sd">            * video - statistics with rspect to video stream</span>

<span class="sd">        :returns: dictionary of informations mentioned below \n</span>
<span class="sd">            Audio Statistics field: \n</span>
<span class="sd">            * duration - Total number of seconds since beginning of reception</span>
<span class="sd">            * pktsent - TTotal number of RTP packets transmitted</span>
<span class="sd">            * octsent -Total number of RTP payload octets transmitted</span>
<span class="sd">                        (not including RTP header).</span>
<span class="sd">            Video Statistics field: \n</span>
<span class="sd">            * duration - Total number of seconds since beginning of reception</span>
<span class="sd">            * numpktsent - Total number of RTP packets transmitted</span>
<span class="sd">            * numoctsent - Total number of RTP payload octets transmitted</span>
<span class="sd">                           (not including RTP header).</span>
<span class="sd">            * content - Identifies the type of transmitted video stream.</span>
<span class="sd">                        The possible values can be \n</span>
<span class="sd">                        * main</span>
<span class="sd">                        * speaker</span>
<span class="sd">                        * slides</span>
<span class="sd">            * roundtriptime - Round Trip Time. Useful for figuring out how fast</span>
<span class="sd">                             recovery can happen and to ensure within</span>
<span class="sd">                             expected bound.</span>
<span class="sd">            * onewaydelay - One Way Delay.  Only available if endpoints are</span>
<span class="sd">                            time synchronized (same NTP source).</span>
<span class="sd">                            otherwise &#39;NA&#39;</span>
<span class="sd">            * CiscoRxVM - This field is a combination of certain other</span>
<span class="sd">                          parameters which user can configure them sperately,</span>
<span class="sd">                          but when displaying this field all the related fields</span>
<span class="sd">                          wil be combined and displayed as a complete string.</span>
<span class="sd">                          For example, TxCode,TxNW, etc., can be configured</span>
<span class="sd">                          separately.  Refer sip.rtpstats configuration</span>
<span class="sd">                          parameter. For example \n</span>
<span class="sd">                          CiscoTxVM=&#39;TxCodec=xxx;TxBw=xxx;TxBwMax=xxx;</span>
<span class="sd">                          TxReso=xxx;TxFrameRate=xxx&#39;\n</span>

<span class="sd">        &gt;&gt;&gt; ep1.get_rtp_tx_stats()</span>
<span class="sd">        {&#39;duration&#39;: &#39;0&#39;,</span>
<span class="sd">         &#39;octsent&#39;: &#39;0&#39;,</span>
<span class="sd">         &#39;pktsent&#39;: &#39;0&#39;}</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">GET_RTP_TX_STAT</span><span class="p">,</span> <span class="n">stream_type</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.get_user_info"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.get_user_info">[docs]</a>    <span class="k">def</span> <span class="nf">get_user_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">jid</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">username</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                      <span class="n">emailid</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">phonenumber</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Shows the entire contact list for a jabber end point. Any one of the</span>
<span class="sd">        parameters should be provided to return the contact list otherwise</span>
<span class="sd">        returns error string.</span>

<span class="sd">        :parameter jid: Jid of the buddy</span>
<span class="sd">        :parameter username: username of the buddy</span>
<span class="sd">        :parameter emailid: emailid of the buddy</span>
<span class="sd">        :parameter phonenumber:  phone number of the buddy</span>

<span class="sd">        :returns: information of the buddy in key-value pair</span>
<span class="sd">                  format as a dictionary.</span>

<span class="sd">        &gt;&gt;&gt; ep1.get_user_info(&#39;regep3200003@camelot.test&#39;)</span>
<span class="sd">        {</span>
<span class="sd">        &#39;department&#39;: &#39;sales&#39;,</span>
<span class="sd">        &#39;directoryuri&#39;: &#39;&#39;,</span>
<span class="sd">        &#39;displayname&#39;: &#39;&#39;,</span>
<span class="sd">        &#39;email&#39;: &#39;regep3200003@camelot.test&#39;,</span>
<span class="sd">        &#39;firstname&#39;: &#39;reg&#39;,</span>
<span class="sd">        &#39;homenumber&#39;: &#39;&#39;,</span>
<span class="sd">        &#39;id&#39;: &#39;7457aa7c-0a39-c88c-14ac-fedbd031368c&#39;,</span>
<span class="sd">        &#39;lastname&#39;: &#39;ep3200003&#39;,</span>
<span class="sd">        &#39;manager&#39;: &#39;&#39;,</span>
<span class="sd">        &#39;middlename&#39;: &#39;&#39;,</span>
<span class="sd">        &#39;mobilenumber&#39;: &#39;&#39;,</span>
<span class="sd">        &#39;msuri&#39;: &#39;&#39;,</span>
<span class="sd">        &#39;nickname&#39;: &#39;&#39;,</span>
<span class="sd">        &#39;pager&#39;: &#39;&#39;,</span>
<span class="sd">        &#39;phonenumber&#39;: &#39;&#39;,</span>
<span class="sd">        &#39;title&#39;: &#39;regep3200003&#39;,</span>
<span class="sd">        &#39;username&#39;: &#39;regep3200003&#39;</span>
<span class="sd">        }</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="n">username</span><span class="p">,</span>
                  <span class="s1">&#39;emailid&#39;</span><span class="p">:</span> <span class="n">emailid</span><span class="p">,</span>
                  <span class="s1">&#39;phonenumber&#39;</span><span class="p">:</span> <span class="n">phonenumber</span><span class="p">}</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">GET_USER_INFO</span><span class="p">,</span> <span class="n">jid</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.gen_cert_key"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.gen_cert_key">[docs]</a>    <span class="k">def</span> <span class="nf">gen_cert_key</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Initiate certificate/key generation for secured connection</span>

<span class="sd">        Creates certificate and key files within the current endpoint&#39;s context</span>
<span class="sd">        During registration, secured endpoints require certificate and key</span>
<span class="sd">        files. Certificates are generated in the server&#39;s /lib/certificates</span>
<span class="sd">        directory. Keys are generated in the server&#39;s /lib/clientkeys directory</span>
<span class="sd">        In order for CCM to recognize these files, the user must copy the file</span>
<span class="sd">        with the .0 extension to the server&#39;s /lib/certsigner directory and to</span>
<span class="sd">        the CCM&#39;s certificate directory, \Program Files\Cisco\Certificates.</span>
<span class="sd">        Once the certificate and key are generated for an endpoint, they may</span>
<span class="sd">        be reused in subsequent registrations.</span>

<span class="sd">        returns: True on successful execution of the command, else</span>
<span class="sd">        will print error statement.</span>

<span class="sd">        &gt;&gt;&gt; ep1.gen_cert_key()</span>
<span class="sd">        True</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering method gen_cert_key().&#39;</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">GEN_CERT_KEY</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">result</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">result</span></div>

<div class="viewcode-block" id="CamelotEndpoint.get_cert_info"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.get_cert_info">[docs]</a>    <span class="k">def</span> <span class="nf">get_cert_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;It displays various fields of an X509 certificate file.</span>

<span class="sd">        :parameter file_name: Its a optional parameter which</span>
<span class="sd">         indicates the file name (with absolute path) of the</span>
<span class="sd">         certificate file. If not provided , the command will</span>
<span class="sd">         pickup default endpoint certificate.This certifcate file</span>
<span class="sd">         should be of X509 format.</span>

<span class="sd">        :returns: On success a json string with following fields :\n</span>
<span class="sd">               * sign_algorithm - name of the signature algorithm.</span>
<span class="sd">                 For example, ecdsa-with-SHA1</span>
<span class="sd">               * key_algorithm - name of the public key algorithm.</span>
<span class="sd">                 For example, id-ecPublicKey</span>
<span class="sd">               * key_curve - name of the EC curvename of the certificate</span>
<span class="sd">                 For example, P-384</span>
<span class="sd">                 This info is relevant only when key is ECDSA</span>
<span class="sd">               * key_length - bit size of the public key</span>
<span class="sd">                 For example, 4096 (for RSA)</span>
<span class="sd">               * file_name - name (absolute path) of the certificate file</span>
<span class="sd">               * parse_error - error message in case of any failure</span>
<span class="sd">                 For example:\n</span>
<span class="sd">                 * failed to open certificate file</span>
<span class="sd">                 * parsing X509 certificate failed</span>


<span class="sd">        &gt;&gt;&gt; ep.get_cert_info()</span>
<span class="sd">        {&quot;certificate_data&quot;:</span>
<span class="sd">          {&quot;sign_algorithm&quot;: &quot;sha1WithRSAEncryption&quot;,</span>
<span class="sd">              &quot;key_algorithm&quot;: &quot;id-ecPublicKey&quot;,</span>
<span class="sd">              &quot;key_curve&quot;: &quot;P-384&quot;, &quot;key_length&quot;: &quot;256&quot;</span>
<span class="sd">             },</span>
<span class="sd">         &quot;file_name&quot;:</span>
<span class="sd">         &quot;/usr/local/camelot/lib/certificates/SEPDAAADAAA6002.cer&quot;,</span>
<span class="sd">         &quot;parse_error&quot;:&quot;&quot;</span>
<span class="sd">         }</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">GET_CERT_INFO</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.get_vmws_info"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.get_vmws_info">[docs]</a>    <span class="k">def</span> <span class="nf">get_vmws_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;returns the current voice mail web service information</span>

<span class="sd">        :returns: A variable sized list of dictionaries with {field value}</span>
<span class="sd">        pairs containing extended information about the vmws.</span>
<span class="sd">        * state - login/logout state with unity server.</span>
<span class="sd">        Below are the possible values:\n</span>
<span class="sd">         * &quot;&quot; - initial value</span>
<span class="sd">         * login pending - login is invoked, waiting for the response.</span>
<span class="sd">         * login completed - login is completed successfully.</span>
<span class="sd">         * login failed - login is failed successfully.</span>
<span class="sd">         * logout pending - logout function is invoked,</span>
<span class="sd">         waiting for the response.</span>
<span class="sd">         * logout completed - logout is completed successfully.</span>
<span class="sd">         * logout failed - logout is failed successfully.</span>
<span class="sd">         * get message count pending - /GetMessageCounts request is</span>
<span class="sd">         invoked, waiting for the response</span>
<span class="sd">         * get message count completed - successful response is received</span>
<span class="sd">         for /GetMessageCounts</span>
<span class="sd">         * get message count failed - failed response is received</span>
<span class="sd">         for /GetMessageCounts</span>
<span class="sd">         * get messages pending - /GetMessages request is invoked,</span>
<span class="sd">         waiting for the response</span>
<span class="sd">         * get messages completed - successful response is received</span>
<span class="sd">         for /GetMessages</span>
<span class="sd">         * get messages failed - failed response is received for</span>
<span class="sd">         GetMessages</span>
<span class="sd">         * get callid pending - /GetCallId request is invoked,</span>
<span class="sd">         waiting for the response</span>
<span class="sd">         * get callid completed - successful response is received</span>
<span class="sd">         for /GetCallId</span>
<span class="sd">         * get callid failed - failed response is invoked</span>
<span class="sd">         for /GetCallId.</span>
<span class="sd">        * error code - received 3xx/4xx/5xx/6xx response code</span>
<span class="sd">        * failure reason - received 3xx/4xx/5xx/6xx reason phrase</span>
<span class="sd">        from status line.</span>
<span class="sd">        * session id - returned session id, upon login successful.</span>
<span class="sd">        * session timeout min - returned SessionTimeoutMin property value,</span>
<span class="sd">        upon login successful.</span>
<span class="sd">        * refresh state - renew login state with unity server.</span>
<span class="sd">        Below are the possible values:\n</span>
<span class="sd">            * &quot;&quot; - initial value</span>
<span class="sd">            * refresh pending - renew login is invoked,</span>
<span class="sd">            waiting for the response.</span>
<span class="sd">            * refresh completed - renew login is completed successfully.</span>
<span class="sd">            * refresh failed - renew login is failed successfully.</span>
<span class="sd">        * renew login response status - received RenewLoginResponse status</span>
<span class="sd">        value, upon RenewLogin successful.</span>
<span class="sd">        * refresh attempts - attempted number of renew logins.</span>
<span class="sd">        * successful refresh attempts - successful renew login attempts.</span>
<span class="sd">        * current unity ip - present unity server ip address</span>
<span class="sd">        * current unity port - present unity server port.</span>
<span class="sd">        * mail box status - received mail box status in</span>
<span class="sd">        GetMessageCounts response body</span>
<span class="sd">        * voiceandreceipts count - received VoiceAndReceipts filter message</span>
<span class="sd">        count in /GetMessages response body</span>
<span class="sd">        * voice count - received Voice filter message count in</span>
<span class="sd">        GetMessages response body</span>
<span class="sd">        * newvoice count - received NewVoice filter message count in</span>
<span class="sd">        GetMessages response body</span>
<span class="sd">        * newreceipt count - received NewReceipt filter message count in</span>
<span class="sd">        GetMessages response body</span>
<span class="sd">        * callid response value - received callid response value in</span>
<span class="sd">        GetCallId response body.</span>

<span class="sd">        &gt;&gt;&gt; ep.get_vmws_info()</span>
<span class="sd">        {&#39;state&#39; : &#39;login completed&#39;,</span>
<span class="sd">         &#39;error code&#39; : &#39;&#39;,</span>
<span class="sd">         &#39;failure reason&#39; : &#39;&#39;,</span>
<span class="sd">         &#39;session id&#39; : &#39;013545f0-6f6a-4756-b18f-f8a352313579&#39;,</span>
<span class="sd">         &#39;session timeout min&#39; : &#39;1&#39;,</span>
<span class="sd">         &#39;refresh state&#39; : &#39;refresh completed&#39;,</span>
<span class="sd">         &#39;renew login response status&#39; :&#39;S_VMWS_GEN_SERVER_RUNNING&#39;,</span>
<span class="sd">         &#39;refresh attempts&#39; : &#39;1&#39;,</span>
<span class="sd">         &#39;successful refresh attempts&#39; : &#39;1&#39;,</span>
<span class="sd">         &#39;current unity ip&#39; : &#39;10.12.10.130&#39;,</span>
<span class="sd">          &#39;current unity port&#39; : &#39;80&#39;,</span>
<span class="sd">          &#39;mail box status&#39; : &#39;&#39;,</span>
<span class="sd">          &#39;voiceandreceipts count&#39; : &#39;4&#39;,</span>
<span class="sd">          &#39;voice count&#39; : &#39;4&#39;,</span>
<span class="sd">          &#39;newvoice count&#39; : &#39;&#39;,</span>
<span class="sd">          &#39;newreceipt count&#39; : &#39;&#39;,</span>
<span class="sd">          &#39;callid response value&#39; : &#39;Okay&#39;}</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">GET_VMWS_INFO</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.get_supported_conversations_info"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.get_supported_conversations_info">[docs]</a>    <span class="k">def</span> <span class="nf">get_supported_conversations_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;returns the supported conversation information</span>

<span class="sd">        :returns: list of conversations, received in vmws /Login response</span>

<span class="sd">        &gt;&gt;&gt; ep.get_supported_conversations_info()</span>
<span class="sd">        {&#39;conversations&#39; : [&quot;SetupOptions&quot;, &quot;TUIRedirect&quot;]}</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">GET_SUPPORTED_CONVERSATION_INFO</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.get_edge_info"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.get_edge_info">[docs]</a>    <span class="k">def</span> <span class="nf">get_edge_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;returns the current edge config download status information</span>
<span class="sd">         like home edge download status, status, tftpserveraddress,</span>
<span class="sd">         sipedgeserveraddress, sipedgeserverport, siproute,</span>
<span class="sd">         httpedgeserveraddress and httpedgeserverport.</span>

<span class="sd">        :returns: A variable sized list of dictionaries with {field value}</span>
<span class="sd">            pairs containing extended information about the edge config</span>
<span class="sd">            information.</span>
<span class="sd">            * auth cookie refresh - status of VCS-E authentication cache</span>
<span class="sd">            refresh.Below are the possible values:</span>
<span class="sd">            * &quot;&quot; - initial value</span>
<span class="sd">            * pending - refresh is started</span>
<span class="sd">            * success - refresh is completed successfully</span>
<span class="sd">            * failed - refresh is failed</span>
<span class="sd">            * config refresh - status of edge configuration download</span>
<span class="sd">            refresh. Below are the possible values:\n</span>
<span class="sd">                * &quot;&quot; - initial value</span>
<span class="sd">                * pending - refresh is started</span>
<span class="sd">                * success - refresh is successfully completed</span>
<span class="sd">                * failed - refresh is failed</span>

<span class="sd">        &gt;&gt;&gt; ep.get_edge_info()</span>
<span class="sd">        {&#39;status&#39; : edgecomplete,</span>
<span class="sd">         &#39;auth cookie refresh&#39; : &#39;{}&#39;,</span>
<span class="sd">         &#39;config refresh&#39; : &#39;{}&#39;,</span>
<span class="sd">         &#39;tftpserveraddress&#39; : 10.12.10.74,</span>
<span class="sd">         &#39;sipedgeserveraddress&#39; : &#39;cam-vcs-e.camelot.test&#39;,</span>
<span class="sd">         &#39;sipedgeserverport&#39; : 5061,</span>
<span class="sd">         &#39;siproute&#39; :</span>
<span class="sd">         &#39;&lt;sip:10.12.10.75:5061;transport=tls;zone-id=1;directed;lr&gt;&#39;,</span>
<span class="sd">         &#39;httpedgeserveraddress&#39; : &#39;cam-vcs-e.camelot.test&#39;,</span>
<span class="sd">         &#39;httpedgeserverport&#39; : 8443, &#39;state&#39; : &#39;loggedin&#39;}</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">GET_EDGE_INFO</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.get_hedge_info"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.get_hedge_info">[docs]</a>    <span class="k">def</span> <span class="nf">get_hedge_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Along with state of Hedge IR4 call flow, it displays retrieved otp,</span>
<span class="sd">        access token and url information. This command also displays the</span>
<span class="sd">        failure status happened at any point during the OTP, userReference</span>
<span class="sd">        and /register</span>

<span class="sd">        :returns: A variable sized list of dictionaries with {field value}.</span>
<span class="sd">         The following fields are supported:\n</span>
<span class="sd">         * state : Below are the possible values:</span>
<span class="sd">               * &quot;&quot;</span>
<span class="sd">               * otp pending</span>
<span class="sd">               * otp complete</span>
<span class="sd">               * otp failed</span>
<span class="sd">               * lookup user id pending</span>
<span class="sd">               * lookup user id complete</span>
<span class="sd">               * lookup user id failed</span>
<span class="sd">               * register user ref pending</span>
<span class="sd">               * register user ref complete</span>
<span class="sd">               * register user ref failed</span>
<span class="sd">               * hedge tftp resource pending</span>
<span class="sd">               * hedge tftp resource complete</span>
<span class="sd">               * hedge tftp resource failed</span>
<span class="sd">               * self provision pending</span>
<span class="sd">               * self provision complete</span>
<span class="sd">               * self provision failed</span>
<span class="sd">               * device download pending</span>
<span class="sd">               * device download complete</span>
<span class="sd">               * device download failed</span>
<span class="sd">               * complete</span>
<span class="sd">         * failure reason : error information</span>
<span class="sd">         * activation code: activation code returned by /cmi/identity/users/otp</span>
<span class="sd">                http query</span>
<span class="sd">         * refresh token : refresh token returned by</span>
<span class="sd">           /v1/actions/register http query</span>
<span class="sd">         * access token : access token returned by</span>
<span class="sd">           /v1/actions/register http query</span>
<span class="sd">         * token type : token type returned by</span>
<span class="sd">           /v1/actions/register http query</span>
<span class="sd">         * expires in : expires in field returned by</span>
<span class="sd">           /v1/actions/register http query, life time in seconds of the</span>
<span class="sd">           access token</span>
<span class="sd">         * refresh token expires in : refresh token expires in field returned</span>
<span class="sd">           by /v1/actions/register http query, life time in seconds of</span>
<span class="sd">           the refresh token</span>
<span class="sd">         * url : Device registration URL url field returned by</span>
<span class="sd">           /v1/actions/register http query,</span>
<span class="sd">         * cis domain : cis domain returned by</span>
<span class="sd">           /v1/actions/register http query</span>
<span class="sd">         * uds domain : uds domain returned by</span>
<span class="sd">           /v1/actions/register http query</span>
<span class="sd">         * callcontrol hedge ip : resolved ip for the host name</span>
<span class="sd">           callcontrol.serviceDomain. Here serviceDomain is received in</span>
<span class="sd">           /userReference 200 OK response.</span>
<span class="sd">         * response: Captures status code, phrase and response body of last</span>
<span class="sd">           HTTP/SIP REGISTER request, even if the response is</span>
<span class="sd">           positive (200 OK).\n</span>
<span class="sd">               * code: Status code</span>
<span class="sd">               * phrase: reponse phrase</span>
<span class="sd">               * body: response body if present along with response</span>
<span class="sd">                     * Note: Camelot is removing special characters &quot;&lt;CR&gt;&lt;LF&gt;</span>
<span class="sd">                             from the body of last received response unless</span>
<span class="sd">                             otherwise loading into the json format will fail.</span>

<span class="sd">        &gt;&gt;&gt; ep.get_hedge_info()</span>
<span class="sd">        {</span>
<span class="sd">           &quot;refresh success&quot;:&quot;1&quot;,</span>
<span class="sd">           &quot;access token&quot;:&quot;YmIyNzY3NWYtOTEwOC00YjYtMTll&quot;,</span>
<span class="sd">           &quot;refresh token&quot;:&quot;NDMzNjQxZTItOTkwOS00YT32M22&quot;,</span>
<span class="sd">           &quot;revokestate&quot;:&quot;ath revoke complete&quot;,</span>
<span class="sd">           &quot;refresh token expires in&quot;:&quot;5174523&quot;,</span>
<span class="sd">           &quot;drs ip&quot;:&quot;&quot;,</span>
<span class="sd">           &quot;gds ip&quot;:&quot;&quot;,</span>
<span class="sd">           &quot;state&quot;:&quot;complete&quot;,</span>
<span class="sd">           &quot;refresh attempts&quot;:&quot;1&quot;,</span>
<span class="sd">           &quot;expires in&quot;:&quot;43199&quot;,</span>
<span class="sd">           &quot;clientcfg hedge ip&quot;:&quot;52.14.62.90&quot;,</span>
<span class="sd">           &quot;failure reason&quot;:&quot;hedge access token refresh pending:</span>
<span class="sd">            Server certificate validation failed&quot;,</span>
<span class="sd">           &quot;callcontrol hedge ip&quot;:&quot;52.14.62.90&quot;,</span>
<span class="sd">           &quot;token type&quot;:&quot;Bearer&quot;,</span>
<span class="sd">           &quot;response&quot;:{</span>
<span class="sd">              &quot;body&quot;:&quot;&lt;x-cisco-remotecc-response&gt;</span>
<span class="sd">              &lt;code&gt;200&lt;/code&gt;&lt;/x-cisco-remotecc-response&gt;&quot;,</span>
<span class="sd">              &quot;phrase&quot;:&quot;OK&quot;,</span>
<span class="sd">              &quot;code&quot;:&quot;200&quot;</span>
<span class="sd">           },</span>
<span class="sd">           &quot;uds ip&quot;:&quot;&quot;,</span>
<span class="sd">           &quot;activation code&quot;:&quot;refresh&quot;,</span>
<span class="sd">           &quot;request&quot;:&quot;REGISTER sip:cms-vip-a-01-internal.na-int2.hron-</span>
<span class="sd">           int.com SIP/2.0&quot;,</span>
<span class="sd">           &quot;refresh failed&quot;:&quot;0&quot;,</span>
<span class="sd">           &quot;url&quot;:&quot;&quot;,</span>
<span class="sd">           &quot;uds domain&quot;:&quot;hron-int.com&quot;,</span>
<span class="sd">           &quot;cis domain&quot;:&quot;&quot;</span>
<span class="sd">        }</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">GET_HEDGE_INFO</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.http_response"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.http_response">[docs]</a>    <span class="k">def</span> <span class="nf">http_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url_name</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Displays various information on http response received for the last</span>
<span class="sd">        headset request sent by Camelot for a particular headset URL.</span>

<span class="sd">        :parameter url_name: headset url value. It can be fetched from\n</span>
<span class="sd">         get_headset() API.</span>
<span class="sd">         For example config url:\n</span>
<span class="sd">         &#39;/headset/config/user/JABBEREP1200001&#39;</span>

<span class="sd">        :returns: A dictionary with the following fields:\n</span>

<span class="sd">         * response:received  response for the headset URL with below info:\n</span>
<span class="sd">               * status_code: response code received . For example 200 ,404 etc</span>
<span class="sd">               * status_text: response pharse/text received.</span>
<span class="sd">               * body: body of the response</span>
<span class="sd">               * headers: the header names and values in dictioanry format\n</span>
<span class="sd">                 present in the response. For example\n</span>
<span class="sd">                     * Content-length: 2264</span>
<span class="sd">                     * Content-type:&#39;&#39;</span>
<span class="sd">                     * Cache-Control: &#39;no-store&#39;</span>
<span class="sd">         * url: headset url/path for which request was sent without any spaces</span>
<span class="sd">         * start_time: time at which request was sent</span>
<span class="sd">         * end_time: time at which response was received</span>
<span class="sd">         * camelot_reason: reason text notifying different error cases such\n</span>
<span class="sd">           as TCP conect error,timeout ,SSL Error etc. For more details\n</span>
<span class="sd">           please refer to following wiki.\n</span>
<span class="sd">           `&lt;https://wiki.cisco.com/display/CAMELOT/Headset+feature+support+in+Camelot&gt;`_</span>
<span class="sd">         * remote_port: remote port of the sent request same as get_headset()</span>
<span class="sd">         * remote_ip: remote ip of the sent request same as get_headset()</span>

<span class="sd">        &gt;&gt;&gt; ep.http_response(&#39;/headset/config/user/JABBEREP1200001&#39;)</span>
<span class="sd">        {u&#39;end_time&#39;: u&#39;2019-01-23T11:52:09&#39;,</span>
<span class="sd">        u&#39;camelot_reason&#39;: u&#39;&#39;,</span>
<span class="sd">        u&#39;remote_host&#39;: u&#39;10.12.10.2&#39;,</span>
<span class="sd">        u&#39;remote_port&#39;: u&#39;6971&#39;,</span>
<span class="sd">        u&#39;response&#39;: {u&#39;body&#39;: u&#39;&#39;,</span>
<span class="sd">        u&#39;headers&#39;: {u&#39;Cache-Control&#39;: u&#39;no-store&#39;,</span>
<span class="sd">        u&#39;Content-length&#39;: u&#39;2236&#39;,</span>
<span class="sd">        u&#39;Content-type&#39;: u&#39;*/*&#39;},</span>
<span class="sd">        u&#39;status_code&#39;: u&#39;200&#39;,</span>
<span class="sd">        u&#39;status_text&#39;: u&#39;OK&#39;},</span>
<span class="sd">        u&#39;start_time&#39;: u&#39;2019-01-23T11:52:09&#39;,</span>
<span class="sd">        u&#39;url&#39;: u&#39;/headset/config/user/JABBEREP1200001&#39;</span>
<span class="sd">        u&#39;body&#39;: {&quot;headsetConfig&quot;:{ &quot;templateConfiguration&quot;:</span>
<span class="sd">         {&quot;configTemplateVersion&quot;:&quot;1&quot;,</span>
<span class="sd">         &quot;updatedTime&quot;:1537399899,&quot;reportId&quot;:3,&quot;usageId&quot;:35}}</span>
<span class="sd">        }</span>
<span class="sd">        Note: Above body example is a dummy one</span>

<span class="sd">        &gt;&gt;&gt; ep.http_response(&#39;/headset/config/user/JABBEREP1200001&#39;)</span>
<span class="sd">        {u&#39;end_time&#39;: u&#39;2019-02-28T11:52:09&#39;,</span>
<span class="sd">        u&#39;camelot_reason&#39;: u&#39;TCP connection error:(11)Resource temporarily</span>
<span class="sd">        unavailable&#39;,</span>
<span class="sd">        u&#39;remote_host&#39;: u&#39;10.12.10.2&#39;,</span>
<span class="sd">        u&#39;remote_port&#39;: u&#39;6971&#39;,</span>
<span class="sd">        u&#39;response&#39;: {u&#39;body&#39;: u&#39;&#39;,</span>
<span class="sd">         u&#39;headers&#39;: {}</span>
<span class="sd">         u&#39;Content-length&#39;: u&#39;&#39;,</span>
<span class="sd">         u&#39;Content-type&#39;: u&#39;&#39;},</span>
<span class="sd">        u&#39;status_code&#39;: u&#39;&#39;,</span>
<span class="sd">        u&#39;status_text&#39;: u&#39;&#39;},</span>
<span class="sd">        u&#39;start_time&#39;: u&#39;2019-02-28T11:52:09&#39;,</span>
<span class="sd">        u&#39;url&#39;: u&#39;/headset/config/user/JABBEREP1200001&#39;</span>
<span class="sd">        u&#39;body&#39;:</span>
<span class="sd">        }</span>

<span class="sd">        &gt;&gt;&gt; ep.http_response(&#39;/headset/config/user/JABBEREP1200001&#39;)</span>
<span class="sd">        {u&#39;end_time&#39;: u&#39;2019-02-29T11:52:09&#39;,</span>
<span class="sd">        u&#39;camelot_reason&#39;: u&#39;error:14094410:SSL Routines:ssl3_read_bytes:</span>
<span class="sd">        sslv3 alert handshake failure&#39;,</span>
<span class="sd">        u&#39;remote_host&#39;: u&#39;10.12.10.2&#39;,</span>
<span class="sd">        u&#39;remote_port&#39;: u&#39;6971&#39;,</span>
<span class="sd">        u&#39;response&#39;: {u&#39;body&#39;: u&#39;&#39;,</span>
<span class="sd">         u&#39;headers&#39;: {}</span>
<span class="sd">         u&#39;Content-length&#39;: u&#39;&#39;,</span>
<span class="sd">         u&#39;Content-type&#39;: u&#39;&#39;},</span>
<span class="sd">        u&#39;status_code&#39;: u&#39;&#39;,</span>
<span class="sd">        u&#39;status_text&#39;: u&#39;&#39;},</span>
<span class="sd">        u&#39;start_time&#39;: u&#39;2019-02-29T11:52:09&#39;,</span>
<span class="sd">        u&#39;url&#39;: u&#39;/headset/config/user/JABBEREP1200001&#39;</span>
<span class="sd">        u&#39;body&#39;:</span>
<span class="sd">        }</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">HTTP_RESPONSE</span><span class="p">,</span> <span class="n">url_name</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.get_device_config"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.get_device_config">[docs]</a>    <span class="k">def</span> <span class="nf">get_device_config</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;1&#39;</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;It displays device configurations of the endpoint.Takes mode</span>
<span class="sd">        as a parameter.Mode=2 is the recommended value of mode for the API</span>
<span class="sd">        Default mode=1 is for backward compatibility of test scripts for</span>
<span class="sd">        Camelot version 12.5.21 and earlier.</span>
<span class="sd">        :returns: A multi layered json string with field values</span>

<span class="sd">        &gt;&gt;&gt; ep.get_device_config()</span>
<span class="sd">        {</span>
<span class="sd">        {&quot;devicePool&quot;:</span>
<span class="sd">          {&quot;name&quot;: &quot;Default&quot;,</span>
<span class="sd">             &quot;callManagerGroup&quot;:</span>
<span class="sd">             {&quot;name&quot;: &quot;Default&quot;,</span>
<span class="sd">             &quot;members&quot;:</span>
<span class="sd">             [</span>
<span class="sd">             {&quot;priority&quot;: &quot;0&quot;, &quot;name&quot;: &quot;cam-feature15-pub.camelot.test&quot;,</span>
<span class="sd">              &quot;ipv6Addr&quot;: &quot;2002:db8:c18:1:20c:29ff:fe08:ffef&quot;, &quot;</span>
<span class="sd">              description&quot;: &quot;cam-feature15-pub&quot;, &quot;sipPort&quot;: &quot;5060&quot;,</span>
<span class="sd">              &quot;securedSipPort&quot;: &quot;5061&quot;,&quot;sipoauthport&quot;: &quot;5064&quot;,</span>
<span class="sd">              &quot;processNodeName&quot;: &quot;cam-feature15-pub.camelot.test&quot;</span>
<span class="sd">             },</span>
<span class="sd">             {&quot;priority&quot;: &quot;1&quot;, &quot;name&quot;: &quot;cam-feature16-pub.camelot.test&quot;,</span>
<span class="sd">             &quot;ipv6addr&quot;: &quot;2002:db8:c18:1:20c:29ff:fe08:feef&quot;, &quot;</span>
<span class="sd">             description&quot;: &quot;cam-feature16-pub&quot;, &quot;sip_port&quot;: &quot;5060&quot;,</span>
<span class="sd">             &quot;securedSipPort&quot;: &quot;5061&quot;,&quot;sip_oauth_port&quot;: &quot;5064&quot;,</span>
<span class="sd">             &quot;processNodeName&quot;: &quot;cam-feature15-pub.camelot.test&quot;</span>
<span class="sd">             }</span>
<span class="sd">             ]</span>
<span class="sd">         }</span>
<span class="sd">         },</span>
<span class="sd">         &quot;sipoauthmode&quot;: &quot;0&quot;</span>
<span class="sd">        }</span>
<span class="sd">        }</span>
<span class="sd">        &gt;&gt;&gt; ep.get_device_config(&#39;2&#39;)</span>
<span class="sd">        {&#39;device&#39;: {&#39;@ctiid&#39;: 14,</span>
<span class="sd">          &#39;@id&#39;: &#39;{c7129337-8d3f-6760-9285-3aaa33fdc9b5}&#39;,</span>
<span class="sd">          &#39;@xsi:type&#39;: &#39;axl:XIPPhone&#39;,</span>
<span class="sd">          &#39;SSOSPServers&#39;: {&#39;SSOSPServer&#39;: &#39;ciscart192&#39;},</span>
<span class="sd">          &#39;TLSResmptionTimer&#39;: 3600,</span>
<span class="sd">          &#39;TVS&#39;: {&#39;members&#39;: {&#39;member&#39;: {&#39;@priority&#39;: 0,</span>
<span class="sd">         &#39;address&#39;: &#39;ciscart192&#39;,</span>
<span class="sd">         &#39;port&#39;: 2445}}},</span>
<span class="sd">          &#39;advertiseG722Codec&#39;: 1,</span>
<span class="sd">          &#39;allowAtoConfig&#39;: Tre,</span>
<span class="sd">        &#39;vendorConfig&#39;: {&#39;AlternatePhonebookServerAddress&#39;: None,</span>
<span class="sd">       &#39;AlternatePhonebookServerType&#39;: &#39;CCM&#39;,</span>
<span class="sd">       &#39;DefaltVolme&#39;: 50,</span>
<span class="sd">       &#39;FarEndCameraControlGrop&#39;: {&#39;FarEndCameraControlMode&#39;: &#39;Off&#39;},</span>
<span class="sd">       &#39;LDAPserManagement&#39;: {&#39;LDAPAdminFilter&#39;: None,</span>
<span class="sd">        &#39;LDAPAdminGrop&#39;: None,</span>
<span class="sd">        &#39;LDAPAttribte&#39;: None,</span>
<span class="sd">        &#39;LDAPBaseDN&#39;: None,</span>
<span class="sd">        &#39;LDAPEncryption&#39;: &#39;LDAPS&#39;,</span>
<span class="sd">        &#39;LDAPMinimmTLSVersion&#39;: &#39;TLSv1.0&#39;,</span>
<span class="sd">        &#39;LDAPMode&#39;: &#39;Off&#39;,</span>
<span class="sd">        &#39;LDAPServerAddress&#39;: None,</span>
<span class="sd">        &#39;LDAPServerPort&#39;: 0,</span>
<span class="sd">        &#39;LDAPVerifyServerCertificate&#39;: &#39;Off&#39;},</span>
<span class="sd">       &#39;MaxTotalDownstreamRate&#39;: 3072,</span>
<span class="sd">       &#39;MaxTotalpstreamRate&#39;: 3072,</span>
<span class="sd">       &#39;Proximity&#39;: {&#39;ProximityCallControl&#39;: &#39;Disabled&#39;,</span>
<span class="sd">        &#39;ProximityContentShareFromClients&#39;: &#39;Disabled&#39;,</span>
<span class="sd">        &#39;ProximityContentShareToClients&#39;: &#39;Disabled&#39;,</span>
<span class="sd">        &#39;ProximityMode&#39;: &#39;Off&#39;},</span>
<span class="sd">       &#39;SerialPortGrop&#39;: {&#39;SerialPortLoginReqired&#39;: &#39;Off&#39;,</span>
<span class="sd">        &#39;SerialPortMode&#39;: &#39;Off&#39;},</span>
<span class="sd">       &#39;StandbyGrop&#39;: {&#39;StandbyDelay&#39;: 10, &#39;StandbyMode&#39;: &#39;Off&#39;},</span>
<span class="sd">       &#39;SystemName&#39;: None,</span>
<span class="sd">       &#39;TelnetMode&#39;: &#39;Off&#39;,</span>
<span class="sd">       &#39;WakepOnMotionDetection&#39;: &#39;Off&#39;,</span>
<span class="sd">       &#39;sshAccess&#39;: 1,</span>
<span class="sd">       &#39;webAccess&#39;: 0,</span>
<span class="sd">       &#39;xConfigration&#39;: {&#39;xConfigration Adio DefaltVolme&#39;: &#39;50&#39;,</span>
<span class="sd">        &#39;xConfigration Adio Inpt MicrophoneMode&#39;: &#39;Focsed&#39;,</span>
<span class="sd">        &#39;xConfigration Adio Microphones Mte Enabled&#39;: &#39;InCallOnly&#39;,</span>
<span class="sd">        &#39;xConfigration Adio SondsAndAlerts RingTone&#39;: &#39;Snrise&#39;,</span>
<span class="sd">        &#39;xConfigration Adio SondsAndAlerts RingVolme&#39;: &#39;50&#39;,</span>
<span class="sd">        &#39;xConfigration Adio ltrasond MaxVolme&#39;: &#39;70&#39;,</span>
<span class="sd">        &#39;xConfigration Cameras Camera 1 Backlight DefaltMode&#39;: &#39;Off&#39;,</span>
<span class="sd">        &#39;xConfigration Conference AtoAnswer Delay&#39;: &#39;0&#39;,</span>
<span class="sd">        &#39;xConfigration Conference AtoAnswer Mode&#39;: &#39;Off&#39;,</span>
<span class="sd">        &#39;xConfigration Conference AtoAnswer Mte&#39;: &#39;Off&#39;,</span>
<span class="sd">        &#39;xConfigration Conference DefaltCall Protocol&#39;: &#39;Ato&#39;,</span>
<span class="sd">        &#39;xConfigration Network 1 QoS Diffserv ICMPv6&#39;: &#39;0&#39;,</span>
<span class="sd">        &#39;xConfigration Network 1 QoS Diffserv NTP&#39;: &#39;0&#39;,</span>
<span class="sd">        &#39;xConfigration Network 1 QoS Diffserv Signalling&#39;: &#39;0&#39;,</span>
<span class="sd">        &#39;xConfigration Network 1 QoS Diffserv Video&#39;: &#39;0&#39;,</span>
<span class="sd">        &#39;xConfigration Network 1 QoS Mode&#39;: &#39;Diffserv&#39;,</span>
<span class="sd">        &#39;xConfigration Network 1 RemoteAccess Allow&#39;: &#39;&#39;,</span>
<span class="sd">        &#39;xConfigration Network 1 Speed&#39;: &#39;1000fll&#39;,</span>
<span class="sd">        &#39;xConfigration Network 1 VLAN Voice Mode&#39;: &#39;Ato&#39;,</span>
<span class="sd">        &#39;xConfigration Video Inpt Connector 2 Visibility&#39;: &#39;Always&#39;,</span>
<span class="sd">        &#39;xConfigration Video Monitors&#39;: &#39;Single&#39;,</span>
<span class="sd">        &#39;xConfigration Video Otpt Connector 1 Resoltion&#39;: &#39;1920_1080_60&#39;,</span>
<span class="sd">        &#39;xConfigration Video Presentation DefaltSorce&#39;: &#39;2&#39;,</span>
<span class="sd">        &#39;xConfigration Video Selfview Defalt FllscreenMode&#39;: &#39;Crrent&#39;,</span>
<span class="sd">        &#39;xConfigration Video Selfview Defalt Mode&#39;: &#39;Crrent&#39;,</span>
<span class="sd">        &#39;xConfigration Video Selfview Defalt OnMonitorRole&#39;: &#39;First&#39;,</span>
<span class="sd">        &#39;xConfigration Video Selfview Defalt PIPPosition&#39;: &#39;CenterLeft&#39;,</span>
<span class="sd">        &#39;xConfigration Video Selfview Mirrored&#39;: &#39;Off&#39;,</span>
<span class="sd">        &#39;xConfigration Video Selfview OnCall Dration&#39;: &#39;10&#39;,</span>
<span class="sd">        &#39;xConfigration Video Selfview OnCall Mode&#39;: &#39;Off&#39;}},</span>
<span class="sd">          &#39;versionStamp&#39;: &#39;1532339890-92e02811-5ddf-4a81-95be-b6d5cb9a5748&#39;}}</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;2&#39;</span><span class="p">:</span>
            <span class="n">dev_conf</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">GET_DEVICE_CONFIG</span><span class="p">,</span> <span class="n">mode</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">dev_conf</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="s1">&#39;device&#39;</span> <span class="ow">in</span> <span class="n">dev_conf</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="k">if</span> <span class="s1">&#39;vendorConfig&#39;</span> <span class="ow">in</span> <span class="n">dev_conf</span><span class="p">[</span><span class="s1">&#39;device&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                    <span class="n">vconfig</span> <span class="o">=</span> <span class="n">dev_conf</span><span class="p">[</span><span class="s1">&#39;device&#39;</span><span class="p">][</span><span class="s1">&#39;vendorConfig&#39;</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">vconfig</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="k">if</span> <span class="s1">&#39;xConfiguration&#39;</span> <span class="ow">in</span> <span class="n">vconfig</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                            <span class="n">xconfigval</span> <span class="o">=</span> <span class="n">vconfig</span><span class="p">[</span><span class="s1">&#39;xConfiguration&#39;</span><span class="p">]</span>
                            <span class="k">if</span> <span class="n">xconfigval</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                                <span class="n">mylist</span> <span class="o">=</span> <span class="n">xconfigval</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()</span>
                                <span class="n">xconfig_dict</span> <span class="o">=</span> <span class="p">{}</span>
                                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">mylist</span><span class="p">:</span>
                                    <span class="k">if</span> <span class="n">i</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                                        <span class="n">j</span> <span class="o">=</span> <span class="n">i</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)</span>
                                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">j</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="mi">1</span><span class="p">:</span>
                                            <span class="n">xconfig_dict</span><span class="p">[</span><span class="n">j</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="n">j</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                                <span class="k">if</span> <span class="n">xconfig_dict</span><span class="p">:</span>
                                    <span class="n">vconfig</span><span class="p">[</span><span class="s1">&#39;xConfiguration&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">xconfig_dict</span>
            <span class="k">return</span> <span class="n">dev_conf</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">GET_DEVICE_CONFIG</span><span class="p">,</span> <span class="n">mode</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.get_hlog_status"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.get_hlog_status">[docs]</a>    <span class="k">def</span> <span class="nf">get_hlog_status</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Get information about an Huntgroup logged-in status</span>

<span class="sd">        :returns: &quot;Logged On&quot; if endpoint logged On to Hunt group</span>
<span class="sd">                  &quot;Logged Off&quot; if endpoint logged Off from Hunt group</span>

<span class="sd">        &gt;&gt;&gt; ep.get_hlog_status()</span>
<span class="sd">            Logged Off</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">GET_HLOG_STATUS</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.send_location_info"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.send_location_info">[docs]</a>    <span class="k">def</span> <span class="nf">send_location_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Explicitly sends the location info to CUCM</span>

<span class="sd">        :returns: sent if success or not supported if error</span>

<span class="sd">        &gt;&gt;&gt; ep.send_location_info()</span>
<span class="sd">            {sent}</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">SEND_LOCATION_INFO</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.register_event_callback"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.register_event_callback">[docs]</a>    <span class="k">def</span> <span class="nf">register_event_callback</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">callback</span><span class="p">,</span> <span class="n">event_type</span><span class="o">=</span><span class="s1">&#39;all&#39;</span><span class="p">,</span>
            <span class="n">event_sub_type</span><span class="o">=</span><span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="n">evtargsdict</span><span class="o">=</span><span class="p">{}):</span>
        <span class="sd">&#39;&#39;&#39;Register an event callback that can be notified when a event</span>
<span class="sd">        is received for this endpoint from camelot server.</span>

<span class="sd">        event will be a dictionary with following falues:</span>
<span class="sd">            :camelot_ip: Camelot server ip</span>
<span class="sd">            :camelot_port: Camelot server port</span>
<span class="sd">            :endpoint_id: Camelot endpoint id</span>
<span class="sd">            :event_type: type of the event</span>
<span class="sd">            :event_sub_type: sub type of the event</span>
<span class="sd">            :message: following message from the even</span>

<span class="sd">        event_type: currently supported for type callevent</span>
<span class="sd">        event_sub_type: connected,end,sendreinvitecompleted,hold</span>
<span class="sd">        evtargsdict: Given by user to track user given arguements</span>

<span class="sd">        Note: If register_event_callback is been called without event_type</span>
<span class="sd">        and event_sub_type callback will be registered for all incoming</span>
<span class="sd">        events. We can&#39;t override it.</span>

<span class="sd">        :parameter callback: callback method which can be invoked by SDK</span>

<span class="sd">        &gt;&gt;&gt; def event_callback(event):</span>
<span class="sd">        ...     print &#39;Received Event: %s&#39; % event</span>
<span class="sd">        ...</span>
<span class="sd">        &gt;&gt;&gt; server = camelot.create_camelot_server(&#39;10.106.248.199&#39;, 5004)</span>
<span class="sd">        &gt;&gt;&gt; ep1 = server.create_new_endpoint(&#39;sipx&#39;, &#39;SEPBAACBAAC7001&#39;)</span>
<span class="sd">        &gt;&gt;&gt; ep1.register_event_callback(event_callback)</span>
<span class="sd">        &lt;camelot.endpoint.CamelotEndpoint object at 0x29ed490&gt;</span>
<span class="sd">        &gt;&gt;&gt; ep1.start_info_events()</span>
<span class="sd">        True</span>
<span class="sd">        &gt;&gt;&gt; ep1.start_station_events()</span>
<span class="sd">        True</span>
<span class="sd">        &gt;&gt;&gt; ep1.init()</span>
<span class="sd">        &#39;outofservice&#39;</span>
<span class="sd">        &gt;&gt;&gt; ep1.inservice()</span>
<span class="sd">        &#39;inservicepending&#39;</span>
<span class="sd">        &gt;&gt;&gt; Received Evenet: {&#39;event_sub_type&#39;: &#39;ccmreg&#39;, &#39;event_type&#39;:</span>
<span class="sd">                 &#39;station&#39;,</span>
<span class="sd">                &#39;camelot_ip&#39;: &#39;10.106.248.199&#39;, &#39;endpoint_id&#39;: &#39;00000003&#39;,</span>
<span class="sd">                &#39;camelot_port&#39;: 5004, &#39;message&#39;:</span>
<span class="sd">                &#39;17:27:33:314 ccmreg {registration ok} 10.20.1.21&#39;}</span>
<span class="sd">            Received Evenet: {&#39;event_sub_type&#39;: None, &#39;event_type&#39;: &#39;state&#39;,</span>
<span class="sd">                &#39;camelot_ip&#39;: &#39;10.106.248.199&#39;, &#39;endpoint_id&#39;: &#39;00000003&#39;,</span>
<span class="sd">                &#39;camelot_port&#39;: 5004, &#39;message&#39;: &#39;&#39;}</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="n">event_type</span> <span class="o">==</span> <span class="s1">&#39;all&#39;</span> <span class="ow">and</span> <span class="n">event_sub_type</span> <span class="o">==</span> <span class="s1">&#39;all&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_callback</span> <span class="o">=</span> <span class="n">callback</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_callback</span><span class="p">:</span>
                <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s1">&#39;Already callback is set for all&#39;</span>
                            <span class="s1">&#39;events cannot add new callback&#39;</span><span class="p">)</span>
                <span class="k">return</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_callback</span><span class="p">:</span>
                <span class="n">key</span> <span class="o">=</span> <span class="n">event_type</span> <span class="o">+</span> <span class="s2">&quot;:&quot;</span> <span class="o">+</span> <span class="n">event_sub_type</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_callbackdict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">callback</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_callbackarg</span> <span class="o">=</span> <span class="n">evtargsdict</span></div>

    <span class="k">def</span> <span class="nf">_get_message_length_hex</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">message</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s1">&#39;No message passed to get Hex length&#39;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="n">msg_len</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
        <span class="n">hex_val_in_str</span> <span class="o">=</span> <span class="nb">hex</span><span class="p">(</span><span class="n">msg_len</span><span class="p">)</span>
        <span class="n">len_hex</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">hex_val_in_str</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">len_hex</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">hex_val_in_str</span> <span class="o">=</span> <span class="n">hex_val_in_str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;0x&#39;</span><span class="p">,</span> <span class="s1">&#39;000&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">len_hex</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="n">hex_val_in_str</span> <span class="o">=</span> <span class="n">hex_val_in_str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;0x&#39;</span><span class="p">,</span> <span class="s1">&#39;00&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">len_hex</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
            <span class="n">hex_val_in_str</span> <span class="o">=</span> <span class="n">hex_val_in_str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;0x&#39;</span><span class="p">,</span> <span class="s1">&#39;0&#39;</span><span class="p">)</span>
        <span class="n">len_hex</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">hex_val_in_str</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">hex_val_in_str</span><span class="p">[(</span><span class="n">len_hex</span> <span class="o">-</span> <span class="mi">4</span><span class="p">):</span><span class="n">len_hex</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">_send_query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sendMsg</span><span class="p">,</span> <span class="n">functionStr</span><span class="p">):</span>
        <span class="n">hex_len</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_message_length_hex</span><span class="p">(</span><span class="n">sendMsg</span><span class="p">)</span>
        <span class="n">rawmessage</span> <span class="o">=</span> <span class="s1">&#39;f:00000000:</span><span class="si">{0}</span><span class="s1">:</span><span class="si">{1}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">hex_len</span><span class="p">,</span> <span class="n">sendMsg</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_camelot_query</span><span class="p">(</span><span class="n">rawmessage</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_camelot_query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">encoded_msg</span><span class="p">):</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_server_conn</span><span class="p">()</span><span class="o">.</span><span class="n">command_lock</span><span class="p">:</span>
            <span class="n">ret</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_server_conn</span><span class="p">()</span><span class="o">.</span><span class="n">_send_and_receive</span><span class="p">(</span><span class="n">encoded_msg</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">ret</span><span class="o">.</span><span class="n">message</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">ret</span><span class="o">.</span><span class="n">message</span>

<div class="viewcode-block" id="CamelotEndpoint.get_rpid"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.get_rpid">[docs]</a>    <span class="k">def</span> <span class="nf">get_rpid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">call_ref</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Get Latest Remote-Party-ID information of a call.</span>

<span class="sd">        :returns: A list of dictionary with remote-party-ID attributes.</span>
<span class="sd">         The attribute which by default is display_name, uri, privacy,</span>
<span class="sd">         screen, party and tokens list, even if the value is not there it</span>
<span class="sd">         will shown as empty string (&#39; &#39;) and if there is no tokens in</span>
<span class="sd">         RPID header the token list will shown as empty list [].</span>

<span class="sd">        :Note: The attributes which all not permanent(x-cisco-number,</span>
<span class="sd">         x-cisco-tenant,x-cisco-callback-number etc) will raise exception</span>
<span class="sd">         (key error)if trying to access the attributes which is not present</span>
<span class="sd">         in Remote-Party-ID.</span>

<span class="sd">        &gt;&gt;&gt; ep1.get_rpid(&#39;0xabcdabcd&#39;)</span>
<span class="sd">        [{&#39;display_name&#39;: &#39; &#39;, &#39;privacy&#39;: &#39;off&#39;, &#39;screen&#39;: &#39;yes&#39;,</span>
<span class="sd">        &#39;uri&#39;: &#39;sip:+17206343685@192.168.90.190&#39;,</span>
<span class="sd">        &#39;x-cisco-tenant&#39;: &#39;5171fdae-f5a3-4a7b-8901-7f69872d31f4&#39;,</span>
<span class="sd">        &#39;party&#39;: &#39;calling&#39;, &#39;x-cisco-number&#39;: &#39;3685&#39;,</span>
<span class="sd">        &#39;x-cisco-callback-number&#39;: &#39;17206343685&#39;, &#39;key1&#39;: &#39;&#39;,</span>
<span class="sd">        &#39;token&#39;: [&#39;token1&#39;, &#39;token2&#39;]},</span>
<span class="sd">        {&#39;display_name&#39;: &#39; &#39;, &#39;privacy&#39;: &#39;off&#39;, &#39;screen&#39;: &#39;yes&#39;,</span>
<span class="sd">        &#39;uri&#39;: &#39;sip:+17206343685@192.168.90.90&#39;,</span>
<span class="sd">        &#39;x-cisco-tenant&#39;: &#39;571fdae-f5a3-4a7b-8901-7f69872d31f4&#39;,</span>
<span class="sd">        &#39;party&#39;: &#39;calling&#39;, &#39;x-cisco-number&#39;: &#39;368&#39;,</span>
<span class="sd">        &#39;x-cisco-callback-number&#39;: &#39;1720633685&#39;, &#39;token&#39;: []}]</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">call_ref</span> <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_valid_call_ref</span><span class="p">(</span><span class="n">call_ref</span><span class="p">):</span>
            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;call reference not valid&#39;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering get_rpid function&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">GET_RPID</span><span class="p">,</span> <span class="n">call_ref</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.get_call_history"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.get_call_history">[docs]</a>    <span class="k">def</span> <span class="nf">get_call_history</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Get call history for the endpoint.</span>

<span class="sd">        :returns: A list of call history, using Remote-party-ID header.</span>
<span class="sd">         This will show maximum of 30 recent call records. It will show</span>
<span class="sd">         empty list if there are no call records.</span>
<span class="sd">         The attributes are type, number, name, datetime. If the attribute</span>
<span class="sd">         value is not there it will shown as empty string (&#39; &#39;).</span>

<span class="sd">         * type :</span>
<span class="sd">           Below are the possible values:</span>
<span class="sd">           * R=Received</span>
<span class="sd">           * P=Placed</span>
<span class="sd">         * number : number value from RPID header as follows</span>

<span class="sd">           If URIDialingDisplayPreference is set as DN then :</span>

<span class="sd">                If x-cisco-callback present is used to populate</span>
<span class="sd">                the received call history</span>

<span class="sd">                If x-cisco-callback is not present then use the uri part</span>
<span class="sd">           if URIDialingDisplayPreference is set as URI then :</span>

<span class="sd">                x-cisco-calback is ignored and URI part is used for display.</span>
<span class="sd">         * name : display name from, RPID header</span>
<span class="sd">         * datetime : datetime in ISO8601 format</span>
<span class="sd">        &gt;&gt;&gt; ep1.get_call_history()</span>
<span class="sd">        [ { &#39;datetime&#39;: &#39;2016-03-16T17:55:33.653&#39;, &#39;name&#39;: &#39;Bob Use&#39;,</span>
<span class="sd">        &#39;number&#39;: &#39;17206343685&#39;, &#39;type&#39;: &#39;P&#39; },</span>
<span class="sd">        { &#39;datetime&#39;: &#39;2016-03-16T17:55:33.666&#39;, &#39;name&#39;: &#39;Bob Use&#39;,</span>
<span class="sd">        &#39;number&#39;: &#39;17206343685&#39;, &#39;type&#39;: &#39;P&#39; },</span>
<span class="sd">        { &#39;datetime&#39;: &#39;2016-03-16T17:55:33.666&#39;, &#39;name&#39;: &#39;Alen&#39;,</span>
<span class="sd">        &#39;number&#39;: &#39;17206343688&#39;, &#39;type&#39;: &#39;R&#39; } ]</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering get_call_history function&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">GET_CALL_HISTORY</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.get_conn_info"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.get_conn_info">[docs]</a>    <span class="k">def</span> <span class="nf">get_conn_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Get siptrunk cucm connection information.</span>

<span class="sd">        :returns: A list of cucm connection(s) information for siptrunk.</span>
<span class="sd">         Shows all the cucm ip, port configured and their connection state</span>
<span class="sd">         for this siptrunk.</span>
<span class="sd">        :Note: For API usage please refer:</span>
<span class="sd">               https://wiki.cisco.com/display/CAMELOT/Simulated+SIP+Trunk#SimulatedSIPTrunk-SipTrunkconnectionstotwoCUCM&#39;s</span>

<span class="sd">               https://wiki.cisco.com/display/CAMELOT/Simulated+SIP+Trunk#SimulatedSIPTrunk-OPTIONSpingInserviceintervalforCUCMconnections</span>

<span class="sd">         * index : cucmip index configured</span>
<span class="sd">         * ipaddr : cucm ipaddress</span>
<span class="sd">         * port : cucm port</span>
<span class="sd">         * local_addr : local ipaddress</span>
<span class="sd">         * local_port : local port</span>
<span class="sd">         * state : siptrunk connection state for this cucm ip.</span>
<span class="sd">           Possible values:\n</span>
<span class="sd">             * siptrunk_connect - Internal resources are allocated for the</span>
<span class="sd">               siptrunk and a TCP connection (and TLS if applicable) is</span>
<span class="sd">               attempted. After initiating a new socket connection, camelot</span>
<span class="sd">               waits for it to complete.</span>

<span class="sd">               &#39;local_port&#39; will not have a value until connection has</span>
<span class="sd">               reached a final connected or failure state. Local port</span>
<span class="sd">               number will not be shown while connection attempt is</span>
<span class="sd">               in progress.</span>

<span class="sd">             * connected - If options_keepalive is not enabled, this will be</span>
<span class="sd">               the state after new connection success (after inservice())</span>
<span class="sd">             * options_keepalive_ins - This state is used for sending OPTIONS</span>
<span class="sd">               keepalive requests if options_keepalive is enabled while the</span>
<span class="sd">               siptrunk is inservice. OPTIONS requests are sent at</span>
<span class="sd">               ins_interval time slots.</span>

<span class="sd">               The options_keepalive key holds the result of the most recent</span>
<span class="sd">               OPTIONS request.</span>
<span class="sd">             * options_keepalive_oos - This state is used for sending OPTIONS</span>
<span class="sd">               keepalive requests if options_keepalive is enabled while the</span>
<span class="sd">               siptrunk is inservicepending. OPTIONS requests are sent at</span>
<span class="sd">               oos_interval time slots.</span>

<span class="sd">               Note that the keys of the options_keepalive dictionary will be</span>
<span class="sd">               cleared just prior to initiating a new OPTIONS request. Thus</span>
<span class="sd">               the options_keepalive will show the results of the current or</span>
<span class="sd">               most recent request.</span>

<span class="sd">               Note: In this state, Camelot will not be able to initiate any</span>
<span class="sd">               new calls. Calls in progress will attempt to remain active</span>
<span class="sd">               until the user end_call().</span>
<span class="sd">             * wait_reconnect - state of the connection while it is waiting for</span>
<span class="sd">               the backoff timer to expire after a TCP or TLS connection</span>
<span class="sd">               failure. Once expired, the trunk will re-attempt the</span>
<span class="sd">               connection.</span>
<span class="sd">             * disconnected - On manual outofservice().  no further attempts</span>
<span class="sd">               will be made to initiate a connection until inservice().</span>
<span class="sd">         * options_keepalive : Holds the result of the most recent OPTIONS</span>
<span class="sd">           request.</span>
<span class="sd">             * sent_time - time the OPTIONS request was sent</span>
<span class="sd">             * result: the result of the request one of:</span>
<span class="sd">                 * success: response received was a 200 OK or a code not in</span>
<span class="sd">                   the oos_codes list.  The trunk is considered inservice.</span>
<span class="sd">                 * failure: response received was one of the codes in</span>
<span class="sd">                   the oos_codes list.</span>
<span class="sd">                 * timeout: no response was was received.</span>
<span class="sd">                 * connection failure: if a connection failure occurred at</span>
<span class="sd">                   any time.  The actual error, if available, will be shown</span>
<span class="sd">                   in &#39;error&#39; key.</span>
<span class="sd">                 * internal error: any internal error, such as unable to</span>
<span class="sd">                   allocate or free memory.</span>
<span class="sd">                 * sip error: an error occurred in the sip stack during sending</span>
<span class="sd">                   the request or receiving the response</span>
<span class="sd">             * response - OPTIONS response message information. Ex.,</span>
<span class="sd">                {&#39;code&#39;: &#39;200&#39;,&#39;phrase&#39;: &#39;OK&#39;,&#39;reason&#39;: &#39;&#39;,&#39;warning&#39;: &#39;&#39;}</span>
<span class="sd">             * receive_time - last response/timeout time stamp.</span>
<span class="sd">             * interval - current active timer interval in secs.</span>
<span class="sd">             * callid - OPTIONS call-id header value</span>
<span class="sd">             * cseq - OPTIONS cseq header value</span>
<span class="sd">             * sessionid - OPTIONS sessionid header value.</span>
<span class="sd">         * error : brief error response description. Refer</span>
<span class="sd">             https://wiki.cisco.com/display/CAMELOT/Simulated+SIP+Trunk#SimulatedSIPTrunk-ErrorMessages</span>

<span class="sd">        &gt;&gt;&gt; trunk1.get_conn_info()</span>
<span class="sd">        [{ &#39;index&#39;: &#39;1&#39;,</span>
<span class="sd">           &#39;ipaddr&#39;: &#39;10.12.10.87&#39;,</span>
<span class="sd">           &#39;port&#39;: &#39;5071&#39;,</span>
<span class="sd">           &#39;local_addr&#39;: &#39;10.12.10.92&#39;,</span>
<span class="sd">           &#39;local_port&#39;: &#39;42034&#39;,</span>
<span class="sd">           &#39;state&#39;: &#39;options_keepalive_ins&#39;,</span>
<span class="sd">           &#39;options_keepalive&#39;: {</span>
<span class="sd">           &#39;sent_time&#39;: &#39;2018-01-09T19:24:04.614-05:30&#39;,</span>
<span class="sd">           &#39;result&#39;: &#39;success&#39;,</span>
<span class="sd">           &#39;response&#39;: {</span>
<span class="sd">              &#39;code&#39;: &#39;200&#39;,</span>
<span class="sd">              &#39;phrase&#39;: &#39;OK&#39;,</span>
<span class="sd">              &#39;reason&#39;: &#39;&#39;,</span>
<span class="sd">              &#39;warning&#39;: &#39;&#39;,},</span>
<span class="sd">           &#39;received_time&#39;: &#39;2018-01-09T19:24:04.622-05:30&#39;,</span>
<span class="sd">           &#39;interval&#39;: &#39;60&#39;,</span>
<span class="sd">           &#39;callid&#39;: &#39;ef9b5e7c-db330ec7-0-bec7bb4@10.12.10.92&#39;,</span>
<span class="sd">           &#39;cseq&#39;: &#39;101 OPTIONS&#39;,</span>
<span class="sd">           &#39;sessionid&#39;: &#39;&#39;,},</span>
<span class="sd">           &#39;error&#39;: &#39;&#39;,</span>
<span class="sd">         },</span>
<span class="sd">         {</span>
<span class="sd">           &#39;index&#39;: &#39;2&#39;,</span>
<span class="sd">           &#39;ipaddr&#39;: &#39;10.12.10.87&#39;,</span>
<span class="sd">           &#39;port&#39;: &#39;5072&#39;,</span>
<span class="sd">           &#39;local_addr&#39;: &#39;10.12.10.92&#39;,</span>
<span class="sd">           &#39;local_port&#39;: &#39;59036&#39;,</span>
<span class="sd">           &#39;state&#39;: &#39;options_keepalive_oos&#39;,</span>
<span class="sd">           &#39;options_keepalive&#39;: {</span>
<span class="sd">           &#39;sent_time&#39;: &#39;2018-01-09T19:22:04.49-05:30&#39;,</span>
<span class="sd">           &#39;result&#39;: &#39;timeout&#39;,</span>
<span class="sd">           &#39;response&#39;: {</span>
<span class="sd">              &#39;code&#39;: &#39;&#39;,</span>
<span class="sd">              &#39;phrase&#39;: &#39;&#39;,</span>
<span class="sd">              &#39;reason&#39;: &#39;&#39;,</span>
<span class="sd">              &#39;warning&#39;: &#39;&#39;,},</span>
<span class="sd">           &#39;received_time&#39;: &#39;2018-01-09T19:22:23.571-05:30&#39;,</span>
<span class="sd">           &#39;interval&#39;: &#39;11&#39;,</span>
<span class="sd">           &#39;callid&#39;: &#39;ef9b5e7c-db3137d3-0-4fe51e5b@10.12.10.92&#39;,</span>
<span class="sd">           &#39;cseq&#39;: &#39;&#39;,</span>
<span class="sd">           &#39;sessionid&#39;: &#39;&#39;,},</span>
<span class="sd">           &#39;error&#39;: &#39;options keepalive timeout&#39;,</span>
<span class="sd">        }]</span>

<span class="sd">        &gt;&gt;&gt; trunk1.get_info()</span>
<span class="sd">        For get_info error description changes please refer</span>
<span class="sd">        https://wiki.cisco.com/display/CAMELOT/Simulated+SIP+Trunk#SimulatedSIPTrunk-ErrorMessages</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering get_conn_info function&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">GET_CONN_INFO</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.get_web_service_info"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.get_web_service_info">[docs]</a>    <span class="k">def</span> <span class="nf">get_web_service_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;returns the HTTP Web Service Info for device remote monitor</span>

<span class="sd">        :returns: A variable sized list of dictionaries with {field value}</span>
<span class="sd">         pairs containing service status, ip, port, last query url etc.,</span>

<span class="sd">             * status :  Web service status</span>
<span class="sd">                    * uninit - Uninitialised, pl check last error</span>
<span class="sd">                    * active - Active, ready for query</span>
<span class="sd">                    * request process - Request in-process</span>
<span class="sd">             * ipaddr : Service IPAddr</span>
<span class="sd">             * port : Service port</span>
<span class="sd">             * last error : Last Error</span>
<span class="sd">             * last query url : Last query url</span>
<span class="sd">             * last response timestamp : Time stamp</span>
<span class="sd">             * last session cipher : last session cipher negotiated</span>

<span class="sd">        &gt;&gt;&gt; ep.get_web_service_info()</span>
<span class="sd">        { &quot;status&quot;: &quot;active&quot;, &quot;ipaddr&quot;: &quot;10.12.10.32&quot;, &quot;port&quot;: &quot;443&quot;</span>
<span class="sd">          &quot;last error&quot;: &quot;no error&quot;, &quot;last query url&quot;: &quot;\/DeviceInformationX&quot;,</span>
<span class="sd">          &quot;last response timestamp&quot;: &quot;2016-03-02::12:17:14:835&quot;,</span>
<span class="sd">          &quot;last session cipher&quot;: &quot;RAES128-SHA&quot;</span>
<span class="sd">        }</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span>
                                   <span class="n">GET_WEB_SERVICE_INFO</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.set_custom_data"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.set_custom_data">[docs]</a>    <span class="k">def</span> <span class="nf">set_custom_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Associates an arbitrary custom data to an endpoint</span>

<span class="sd">        :parameter data: arbitrary string to associate with endpoint</span>

<span class="sd">        :returns: The newly assigned string</span>

<span class="sd">        &gt;&gt;&gt; ep.set_custom_data(&#39;customdata&#39;)</span>
<span class="sd">        customdata</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering into set_custom_data function&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">SET_CUSTOM_DATA</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.get_custom_data"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.get_custom_data">[docs]</a>    <span class="k">def</span> <span class="nf">get_custom_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Returns endpoint&#39;s assigned custom data string</span>

<span class="sd">        :returns: The endpoint&#39;s assigned arbitrary client string</span>

<span class="sd">        &gt;&gt;&gt; ep.get_custom_data()</span>
<span class="sd">        phone1</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering into get_custom_data function&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">GET_CUSTOM_DATA</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.setup_line"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.setup_line">[docs]</a>    <span class="k">def</span> <span class="nf">setup_line</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">local_number</span><span class="p">,</span> <span class="n">local_sub_address</span><span class="p">,</span> <span class="n">voice_options</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Setup the voice line profile for Analog endpoint. Invoking this</span>
<span class="sd">        API will call the DivaSetLineDeviceParamsVoice.</span>

<span class="sd">        :parameter local_number: Local Number of the Line.</span>
<span class="sd">        :parameter local_sub_address: Lcoal Sub Address of the Line.</span>
<span class="sd">        :parameter voice_options: DivaVoiceOptions in terms of \n</span>
<span class="sd">                                 0 - DivaVoiceOptionDefault (Default)\n</span>
<span class="sd">                                 1 - DivaVocieOptionEarlyDataChannel\n</span>
<span class="sd">                                 2 - DivaVoiceOptionEchoCanceller\n</span>

<span class="sd">        :returns: True or False</span>

<span class="sd">        &gt;&gt;&gt; ep1.setup_line(&#39;1002&#39;,&#39;10&#39;,0)</span>
<span class="sd">        &gt;&gt;&gt; True</span>

<span class="sd">        &gt;&gt;&gt; ep2.setup_line(&#39;1003&#39;,&#39;11&#39;)</span>
<span class="sd">        &gt;&gt;&gt; True</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering into setup_line function&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">SETUP_LINE</span><span class="p">,</span> <span class="n">local_number</span><span class="p">,</span>
                                   <span class="n">local_sub_address</span><span class="p">,</span> <span class="n">voice_options</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.get_cas_call_info"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.get_cas_call_info">[docs]</a>    <span class="k">def</span> <span class="nf">get_cas_call_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">call_ref</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; This API applicable only for CAS endpoint.  This will display the</span>
<span class="sd">        Call Info values returned from DivaGetCallInfo API. Valid cal</span>
<span class="sd">        information is available only if call is in incoming or connected state</span>

<span class="sd">        :parameter call_ref: valid call reference</span>

<span class="sd">        :returns: dictionary of call information or error string.\n</span>
<span class="sd">                    Possible error values are:\n</span>
<span class="sd">                    * bad call reference</span>
<span class="sd">                    * endpoint does not support this feature.</span>
<span class="sd">                    * no data available</span>

<span class="sd">        &gt;&gt;&gt; ep1.vapi.get_cas_call_info(&#39;0xf5722cac&#39;)</span>
<span class="sd">        &gt;&gt;&gt; {&quot;line device&quot;: &quot;1&quot;,</span>
<span class="sd">        &quot;call state&quot;: &quot;DivaCallStateDisconnected&quot;,</span>
<span class="sd">        &quot;listen type&quot;: &quot;DivaListenNone&quot;,</span>
<span class="sd">        &quot;call type&quot;: &quot;DivaCallTypeVoice&quot;,</span>
<span class="sd">        &quot;data transfer possible&quot;: &quot;0&quot;,</span>
<span class="sd">        &quot;RxSpeed&quot;: &quot;0&quot;,</span>
<span class="sd">        &quot;TxSpeed&quot;: &quot;0&quot;,</span>
<span class="sd">        &quot;disconnect reason&quot;: &quot;DivaDRActiveDisconnect&quot;,</span>
<span class="sd">        &quot;isdn cause&quot;: &quot;13456&quot;,</span>
<span class="sd">        &quot;remote fax id&quot;: &quot;&quot;,</span>
<span class="sd">        &quot;local fax id&quot;: &quot;&quot;,</span>
<span class="sd">        &quot;fax pages&quot;: &quot;&quot;,</span>
<span class="sd">        &quot;polling active&quot;: &quot;&quot;,</span>
<span class="sd">        &quot;page resolution&quot;: &quot;&quot;,</span>
<span class="sd">        &quot;MR active&quot;: &quot;&quot;,</span>
<span class="sd">        &quot;MMR active&quot;: &quot;&quot;,</span>
<span class="sd">        &quot;ECM active&quot;: &quot;&quot;,</span>
<span class="sd">        &quot;echo canceller active&quot;: &quot;0&quot;,</span>
<span class="sd">        &quot;redirect reason&quot;: &quot;0&quot;,</span>
<span class="sd">        &quot;redirected number&quot;: &quot;&quot;,</span>
<span class="sd">        &quot;redirecting number&quot;: &quot;&quot;,</span>
<span class="sd">        &quot;signelled call type&quot;: &quot;DivaSignalledCallTypeUnknown&quot;,</span>
<span class="sd">        &quot;assigned B channel&quot;: &quot;2&quot;,</span>
<span class="sd">        &quot;compression&quot;: &quot;0&quot;,</span>
<span class="sd">        &quot;cpc detected&quot;: &quot;false&quot;,</span>
<span class="sd">        &quot;calling name&quot;: &quot;&quot;,</span>
<span class="sd">        &quot;connected name&quot;: &quot;&quot;,</span>
<span class="sd">        &quot;calling sub&quot;: &quot;&quot;,</span>
<span class="sd">        &quot;called sub&quot;: &quot;&quot;,</span>
<span class="sd">        &quot;connected number&quot;: &quot;&quot;,</span>
<span class="sd">        &quot;called name&quot;: &quot;&quot;,</span>
<span class="sd">        &quot;start&quot;: &quot;&quot;,</span>
<span class="sd">        &quot;end&quot;: &quot;&quot;,</span>
<span class="sd">        &quot;silence detected&quot;:{&quot;time&quot;: &quot;2017-08-10T15:23:45.644-5:30&quot;</span>
<span class="sd">        &quot;duration&quot;: &quot;1&quot;},</span>
<span class="sd">         &quot;</span>
<span class="sd">         }</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">call_ref</span> <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_valid_call_ref</span><span class="p">(</span><span class="n">call_ref</span><span class="p">):</span>
            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;call reference not valid&#39;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering get_cas_call_info function&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">GET_CAS_CALL_INFO</span><span class="p">,</span> <span class="n">call_ref</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.get_cas_llsa_info"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.get_cas_llsa_info">[docs]</a>    <span class="k">def</span> <span class="nf">get_cas_llsa_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">call_ref</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; This API applicable only for CAS endpoint.  This will display the</span>
<span class="sd">        low level signalling access call property returned from</span>
<span class="sd">        DivaGetCallProperties API.</span>

<span class="sd">        :parameter call_ref: valid call reference</span>

<span class="sd">        :returns: dictionary of call information or error string.\n</span>
<span class="sd">                    Possible error values are:\n</span>
<span class="sd">                    * bad call reference</span>
<span class="sd">                    * endpoint does not support this feature.</span>
<span class="sd">                    * no data available</span>

<span class="sd">        &gt;&gt;&gt; ep1.vapi.get_cas_llsa_info(&#39;0xf5722cac&#39;)</span>
<span class="sd">        &gt;&gt;&gt; {</span>
<span class="sd">             &#39;display info&#39;: &#39;Call form Diva Board&#39;,</span>
<span class="sd">            }</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">call_ref</span> <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_valid_call_ref</span><span class="p">(</span><span class="n">call_ref</span><span class="p">):</span>
            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;call reference not valid&#39;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering get_cas_llsa_info function&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">GET_CAS_LLSA_INFO</span><span class="p">,</span> <span class="n">call_ref</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.setup_fax_line"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.setup_fax_line">[docs]</a>    <span class="k">def</span> <span class="nf">setup_fax_line</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fax_profile</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Setup the voice line profile for Analog endpoint. Invoking this</span>
<span class="sd">        API will call the DivaSetLineDeviceParamsFax.</span>

<span class="sd">        :parameter fax_profile: object of camelot.FaxProfile class\n</span>
<span class="sd">                                The FaxProfile class is given below:\n</span>
<span class="sd">                                class DivaFaxOptions(Enum):\n</span>
<span class="sd">                                    DivaFaxOptionsDefault = 0x00000000\n</span>
<span class="sd">                                    DivaFaxOptionDisableHighResolution</span>
<span class="sd">                                    = 0x00000001\n</span>
<span class="sd">                                    DivaFaxOptionDisableMR = 0x00000002\n</span>
<span class="sd">                                    DivaFaxOptionDisableMMR = 0x00000004\n</span>
<span class="sd">                                    DivaFaxOptionDisableECM = 0x00000008\n</span>
<span class="sd">                                    DivaFaxOptionEnablePolling = 0x00000100\n</span>
<span class="sd">                                    DivaFaxOptionRequestPolling = 0x00000200\n</span>
<span class="sd">                                    DivaFaxOptionReverseSession = 0x00000400\n</span>
<span class="sd">                                    DivaFaxOptionMultipleDocument</span>
<span class="sd">                                    = 0x00000800\n</span>
<span class="sd">                                    DivaFaxOptionEnableColor = 0x00001000\n</span>
<span class="sd">                                    DivaFaxOptionEnableInterrupt = 0x00010000\n</span>
<span class="sd">                                    DivaFaxOptionRequestInterrupt</span>
<span class="sd">                                    = 0x00020000\n</span>

<span class="sd">                                class FaxProfile:\n</span>
<span class="sd">                                    local_number = &#39;-1&#39;\n</span>
<span class="sd">                                    local_sub_address = &#39;-1&#39;\n</span>
<span class="sd">                                    local_fax_id = &#39;-1&#39;\n</span>
<span class="sd">                                    fax_headline = &#39;camelot&#39;\n</span>
<span class="sd">                                    default_fax_speed =\n</span>
<span class="sd">                                    DivaFaxMaxSpeedAutomatic\n</span>
<span class="sd">                                    diva_fax_options =</span>
<span class="sd">                                    [DivaFaxOptions.DivaFaxOptionsDefault]\n</span>
<span class="sd">                                As shown in FaxProfile class, the default</span>
<span class="sd">                                values are applicable as it is.\n</span>
<span class="sd">                                * if -1 (by default), then the value will be</span>
<span class="sd">                                  empty when sent to respective Diva SDK</span>
<span class="sd">        :returns: True or CamelotException\n</span>
<span class="sd">                  Possible CamelotExceptions is:\n</span>
<span class="sd">                  1. Interface error</span>
<span class="sd">                      This occurs if invoking Diva SDK API fails</span>
<span class="sd">                  2. Invalid argument</span>
<span class="sd">                      This occurs when faxProfile is not instantiated with</span>
<span class="sd">                      FaxProfile()</span>
<span class="sd">                  3. Invalid FaxOptions</span>
<span class="sd">                      This occurs when FaxProfile.dvia_fax_options is not list</span>
<span class="sd">                      or its content is not type of DivaFaxOptions enum</span>
<span class="sd">                  4. Invalid fax speed</span>
<span class="sd">                      This occurs if FaxProfile.dvia_fax_speed is not type of</span>
<span class="sd">                      DivaFaxMaxSpeed enum</span>

<span class="sd">        &gt;&gt;&gt; profile = camelot.FaxProfile()</span>
<span class="sd">        &gt;&gt;&gt; profile.local_number = &#39;1002&#39;</span>
<span class="sd">        &gt;&gt;&gt; profile.local_sub_address = &#39;200&#39;</span>
<span class="sd">        &gt;&gt;&gt; profile.local_fax_id = &#39;100&#39;</span>
<span class="sd">        &gt;&gt;&gt; profile.fax_headline = &#39;myfax&#39;</span>
<span class="sd">        &gt;&gt;&gt; profile.default_fax_speed</span>
<span class="sd">        = DivaFaxMaxSpeed.DivaFaxMaxSpeed2400</span>
<span class="sd">        &gt;&gt;&gt; profile.diva_fax_options</span>
<span class="sd">        = [DivaFaxOptions.DivaFaxOptionEnableColor]</span>
<span class="sd">        &gt;&gt;&gt; ep1.vapi.setup_fax_line(profile)</span>
<span class="sd">        &gt;&gt;&gt; True</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="k">if</span> <span class="n">fax_profile</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fax_profile</span><span class="p">,</span> <span class="n">FaxProfile</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">fax_profile</span><span class="o">.</span><span class="n">diva_fax_options</span> <span class="ow">and</span> \
                <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">fax_profile</span><span class="o">.</span><span class="n">diva_fax_options</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span>
                 <span class="nb">list</span> <span class="ow">or</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">fo</span><span class="p">,</span> <span class="n">DivaFaxOptions</span><span class="p">)</span>
                             <span class="k">for</span> <span class="n">fo</span> <span class="ow">in</span> <span class="n">fax_profile</span><span class="o">.</span><span class="n">diva_fax_options</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">):</span>
                <span class="k">raise</span> <span class="n">camelot</span><span class="o">.</span><span class="n">CamelotError</span><span class="p">(</span><span class="s1">&#39;Invalid FaxOptions&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fax_profile</span><span class="o">.</span><span class="n">default_fax_speed</span><span class="p">,</span>
                              <span class="n">DivaFaxMaxSpeed</span><span class="p">):</span>
                <span class="k">raise</span> <span class="n">camelot</span><span class="o">.</span><span class="n">CamelotError</span><span class="p">(</span><span class="s1">&#39;Invalid fax speed&#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">SETUP_FAX_LINE</span><span class="p">,</span> <span class="n">fax_profile</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.get_ice_config"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.get_ice_config">[docs]</a>    <span class="k">def</span> <span class="nf">get_ice_config</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Get the information about ICE configuration</span>

<span class="sd">        :returns: A dictionary field:value pairs.\n</span>
<span class="sd">            current fields are supported:\n</span>
<span class="sd">            * &quot;ice_enable&quot; denotes either ICE is enabled or disabled.</span>
<span class="sd">              possible values 1 for enabled and 0 for disabled.</span>
<span class="sd">            * &quot;ice_default_candidate&quot; denotes the path which clients</span>
<span class="sd">              use to communicate to to each other.It can have 3</span>
<span class="sd">              possible values:\n</span>
<span class="sd">              * &quot;host&quot;: Host candidate</span>
<span class="sd">              * &quot;relay&quot;: Turn relay candidate</span>
<span class="sd">              * &quot;srvRflx&quot;: server reflexive candididate.</span>
<span class="sd">            * &quot;ice_server_reflex&quot;: shows whether server reflex address</span>
<span class="sd">              is enabled or not possible values 1 or 0.</span>

<span class="sd">        &gt;&gt;&gt; ep1.vapi.get_ice_config()</span>
<span class="sd">        [{u&#39;ice_enable&#39;: u&#39;1&#39;</span>
<span class="sd">        u&#39;ice_default_candidate&#39;: u&#39;host&#39;</span>
<span class="sd">        u&#39;ice_server_reflex&#39;: u&#39;1&#39;}]</span>

<span class="sd">        For more information on how users can overwrite the above values</span>
<span class="sd">        and how camelot determines those explained in camelot wiki page:\n</span>
<span class="sd">        https://wiki.cisco.com/display/CAMELOT/ICE+and+TURN+support</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">GET_ICE_CONFIG</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">ret</span></div>

<div class="viewcode-block" id="CamelotEndpoint.get_jabber_profile"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.get_jabber_profile">[docs]</a>    <span class="k">def</span> <span class="nf">get_jabber_profile</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Get the information about jabberProfile configuration</span>

<span class="sd">        :returns: A dictionary field:value pairs.\n</span>

<span class="sd">        &gt;&gt;&gt; ep1.get_jabber_profile()</span>
<span class="sd">        {</span>
<span class="sd">            u&#39;Config&#39;: {u&#39;Common&#39;: {u&#39;ChatTelephonyEscalationLimit&#39;: 25,</span>
<span class="sd">            u&#39;ContactCardonHover&#39;: True,</span>
<span class="sd">            u&#39;Disable_IM_History&#39;: False,</span>
<span class="sd">            u&#39;EnableAutosave&#39;: True,</span>
<span class="sd">            u&#39;EnableAutosaveUserPref&#39;: False},</span>
<span class="sd">            u&#39;Desktop&#39;: None,</span>
<span class="sd">        u&#39;Mobile&#39;: None}}</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">GET_JABBER_PROFILE</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.get_turn_config"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.get_turn_config">[docs]</a>    <span class="k">def</span> <span class="nf">get_turn_config</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Get the information about turn configuration</span>

<span class="sd">        :returns: A dictionary field:value pairs.\n</span>
<span class="sd">            current fields are supported:\n</span>
<span class="sd">            * &quot;turn_enable&quot; denotes either turn is enabled or not.</span>
<span class="sd">              possible values are 1 and 0.</span>
<span class="sd">            * &quot;turn_transport&quot; denotes the protocol client uses to</span>
<span class="sd">              send request to turn server.It can have 4 possible</span>
<span class="sd">              values mentioned below:\n</span>
<span class="sd">              * &quot;auto&quot; It will allow client to decide transport type.</span>
<span class="sd">              * &quot;UDP&quot;</span>
<span class="sd">              * &quot;TCP&quot;</span>
<span class="sd">              * &quot;TLS&quot;</span>
<span class="sd">              * Camelot currently uses UDP transport to communicate to</span>
<span class="sd">                TURN server to gather the candidated, other</span>
<span class="sd">                values are not supported yet.</span>
<span class="sd">            * &quot;turn_username&quot; denotes the user name to authenticate</span>
<span class="sd">              turn client to turn server.</span>

<span class="sd">        &gt;&gt;&gt; ep1.vapi.get_turn_config()</span>
<span class="sd">        [{u&#39;turn_enable&#39;: u&#39;0&#39;,</span>
<span class="sd">        u&#39;turn_transport&#39;: u&#39;auto&#39;</span>
<span class="sd">        u&#39;turn_username&#39;: u&#39;admin&#39;}]</span>

<span class="sd">        For more information please refer to camelot wiki page:\n</span>
<span class="sd">        https://wiki.cisco.com/display/CAMELOT/ICE+and+TURN+support</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">GET_TURN_CONFIG</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">ret</span></div>

<div class="viewcode-block" id="CamelotEndpoint.apply_out_action_set"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.apply_out_action_set">[docs]</a>    <span class="k">def</span> <span class="nf">apply_out_action_set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">actionset</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;NONE&#39;</span><span class="p">,</span> <span class="n">cseq</span><span class="o">=</span><span class="s1">&#39;NONE&#39;</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        This is used for addition, modification or removal of headers to any</span>
<span class="sd">        outgoing SIP message.</span>

<span class="sd">        :parameter actionset: out action object to be applied to endpoint.</span>
<span class="sd">        :parameter method: method filter</span>
<span class="sd">        :parameter cseq: cseq filter</span>

<span class="sd">        :returns: &#39;success&#39; or &#39;failure&#39;</span>

<span class="sd">        &gt;&gt;&gt; ep1.apply_out_action_set(out_action_Obj, method=&#39;INVITE&#39;)</span>
<span class="sd">        &#39;success&#39;</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">msgid</span> <span class="o">=</span> <span class="n">actionset</span><span class="o">.</span><span class="n">msgid</span>
        <span class="n">outmsg</span> <span class="o">=</span> <span class="s1">&#39;mergemessage </span><span class="si">{0}</span><span class="se">\n</span><span class="si">{1}</span><span class="se">\n</span><span class="si">{2}</span><span class="s1">@&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">msgid</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">cseq</span><span class="p">)</span>
        <span class="n">hex_len</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_message_length_hex</span><span class="p">(</span><span class="n">outmsg</span><span class="p">)</span>
        <span class="n">rawmessage</span> <span class="o">=</span> <span class="s1">&#39;m:</span><span class="si">{0}</span><span class="s1">:</span><span class="si">{1}</span><span class="s1">:</span><span class="si">{2}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ep_id</span><span class="p">,</span> <span class="n">hex_len</span><span class="p">,</span> <span class="n">outmsg</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">actionset</span><span class="o">.</span><span class="n">event_type</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">register_to_event</span><span class="p">(</span><span class="n">actionset</span><span class="o">.</span><span class="n">event_type</span><span class="p">,</span>
                                   <span class="n">actionset</span><span class="o">.</span><span class="n">event_sub_type</span><span class="p">,</span>
                                   <span class="n">actionset</span><span class="o">.</span><span class="n">call_back</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">with_new_line</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_camelot_query</span><span class="p">(</span><span class="n">rawmessage</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">with_new_line</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">with_new_line</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;apply_action_set failed&#39;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;apply_action_set request failed&#39;</span><span class="p">)</span>
            <span class="k">return</span></div>

<div class="viewcode-block" id="CamelotEndpoint.remove_out_action_set"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.remove_out_action_set">[docs]</a>    <span class="k">def</span> <span class="nf">remove_out_action_set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">actionset</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;NONE&#39;</span><span class="p">,</span> <span class="n">cseq</span><span class="o">=</span><span class="s1">&#39;NONE&#39;</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        This is used for removal of out_action_set linked to endpoint.</span>
<span class="sd">        This should contain same param values as in apply_out_action_set.</span>

<span class="sd">        :parameter actionset: out action object to be applied to endpoint.</span>
<span class="sd">        :parameter method: method filter</span>
<span class="sd">        :parameter cseq: cseq filter</span>

<span class="sd">        :returns: &#39;success&#39; or &#39;failure&#39;</span>

<span class="sd">        &gt;&gt;&gt; ep1.apply_out_action_set(out_action_Obj, method=&#39;INVITE&#39;)</span>
<span class="sd">        &#39;success&#39;.</span>
<span class="sd">        &gt;&gt;&gt; ep1.remove_out_action_set(out_action_Obj, method=&#39;INVITE&#39;)</span>
<span class="sd">        &#39;success&#39;.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">msgid</span> <span class="o">=</span> <span class="n">actionset</span><span class="o">.</span><span class="n">msgid</span>
        <span class="n">outmsg</span> <span class="o">=</span> <span class="s1">&#39;removemergemessage </span><span class="si">{0}</span><span class="s1"> </span><span class="si">{1}</span><span class="s1"> </span><span class="si">{2}</span><span class="s1">@&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">msgid</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span>
                                                          <span class="n">cseq</span><span class="p">)</span>
        <span class="n">hex_len</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_message_length_hex</span><span class="p">(</span><span class="n">outmsg</span><span class="p">)</span>

        <span class="n">rawmessage</span> <span class="o">=</span> <span class="s1">&#39;m:</span><span class="si">{0}</span><span class="s1">:</span><span class="si">{1}</span><span class="s1">:</span><span class="si">{2}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ep_id</span><span class="p">,</span> <span class="n">hex_len</span><span class="p">,</span>
                                            <span class="n">outmsg</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">with_new_line</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_camelot_query</span><span class="p">(</span><span class="n">rawmessage</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">with_new_line</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">with_new_line</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;remove_action_set failed nul returned&#39;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;remove_action_set request failed reason:</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">e</span><span class="p">)</span>
            <span class="k">return</span></div>

<div class="viewcode-block" id="CamelotEndpoint.sip_custom_headers"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.sip_custom_headers">[docs]</a>    <span class="k">def</span> <span class="nf">sip_custom_headers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                           <span class="n">headers</span><span class="p">,</span>
                           <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;INVITE&#39;</span><span class="p">],</span>
                           <span class="n">action</span><span class="o">=</span><span class="s1">&#39;add&#39;</span><span class="p">,</span>
                           <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;request&#39;</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        This is used for addition (or &#39;removal&#39;,which is yet to be implemented)</span>
<span class="sd">        of SIP headers to outgoing SIP messages.</span>

<span class="sd">        :parameter headers: dictionary which takes a set of SIP header Name</span>
<span class="sd">                            and value pairs.This is a mandatory field.</span>
<span class="sd">        :parameter methods: list of SIP method names.Default is [&#39;INVITE&#39;]</span>
<span class="sd">        :parameter action: action to be performed. Possible values are:</span>
<span class="sd">                           add, remove and modify.Default is &#39;add&#39;.</span>
<span class="sd">        :parameter mode: To indicate if its request or response.Default is</span>
<span class="sd">                         &#39;request&#39;. Other value is &#39;response&#39;</span>
<span class="sd">                         (response is yet to be implemented).</span>

<span class="sd">        :returns: an instance of CustomHeadersObject on success.\n</span>
<span class="sd">                  Camelot Exceptions in case of error.</span>
<span class="sd">                  For the list of possible exceptions please refer</span>
<span class="sd">                  to the wiki link mentioned below.</span>

<span class="sd">        &gt;&gt;&gt; Obj = ep1.sip_custom_headers(headers={&#39;Subject&#39;:&#39;SIP Call&#39;},</span>
<span class="sd">        methods=[&#39;INVITE&#39;,&#39;BYE&#39;],action=&#39;add&#39;, mode=&#39;request&#39;)</span>

<span class="sd">        &gt;&gt;&gt; ep1.place_call(ep2line)</span>
<span class="sd">        ...  Verify custom changes in SIP messages ...</span>

<span class="sd">        &gt;&gt;&gt; Obj.clear()</span>
<span class="sd">        True</span>

<span class="sd">        For more information please refer to camelot wiki page:\n</span>
<span class="sd">        https://wiki.cisco.com/display/CAMELOT/Simplified+SIP+Message+handling#SimplifiedSIPMessagehandling-SipCustomHeadersAPIimplementation</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;in sip_custom_headers method&quot;</span><span class="p">)</span>

        <span class="n">out_message</span> <span class="o">=</span> <span class="n">camelot</span><span class="o">.</span><span class="n">SIP_CUSTOM_HEADERS</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">headers</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">camelot</span><span class="o">.</span><span class="n">CamelotError</span><span class="p">(</span><span class="s1">&#39;headers parm not specified&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">headers</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="n">msgtext</span> <span class="o">=</span> <span class="s1">&#39;not a valid {header: value} dictionary for headers&#39;</span>
            <span class="k">raise</span> <span class="n">camelot</span><span class="o">.</span><span class="n">CamelotError</span><span class="p">(</span><span class="n">msgtext</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">methods</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">camelot</span><span class="o">.</span><span class="n">CamelotError</span><span class="p">(</span><span class="s1">&#39;methods parm not specified&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">methods</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">camelot</span><span class="o">.</span><span class="n">CamelotError</span><span class="p">(</span><span class="s1">&#39;not a valid list for methods&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">action</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">camelot</span><span class="o">.</span><span class="n">CamelotError</span><span class="p">(</span><span class="s1">&#39;action is not specified&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">mode</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">camelot</span><span class="o">.</span><span class="n">CamelotError</span><span class="p">(</span><span class="s1">&#39;mode is not specified&#39;</span><span class="p">)</span>

        <span class="n">methodlist</span> <span class="o">=</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">methods</span><span class="p">)</span>

        <span class="n">out_message</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1"> </span><span class="si">{}</span><span class="s1">^</span><span class="si">{}</span><span class="s1">^</span><span class="si">{}</span><span class="s1">^</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="n">out_message</span><span class="p">,</span> <span class="n">headers</span><span class="p">,</span> <span class="n">methodlist</span><span class="p">,</span> <span class="n">action</span><span class="p">,</span> <span class="n">mode</span><span class="p">)</span>

        <span class="n">reply_buff</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span>
            <span class="n">camelot</span><span class="o">.</span><span class="n">SIP_CUSTOM_HEADERS</span><span class="p">,</span> <span class="n">out_message</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">reply_buff</span><span class="p">:</span>
            <span class="n">customHeadersObj</span> <span class="o">=</span> <span class="n">CustomHeadersObject</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                                                   <span class="n">reply_buff</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">customHeadersObj</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">customHeadersObj</span></div>

<div class="viewcode-block" id="CamelotEndpoint.create_in_action_object"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.create_in_action_object">[docs]</a>    <span class="k">def</span> <span class="nf">create_in_action_object</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Create a blank set of verification as a place holder</span>
<span class="sd">        Then using different command one can keep on adding actions</span>
<span class="sd">        for veification of original message.</span>

<span class="sd">        NOTE: This API can be used for Simulated Endpoints as well.</span>
<span class="sd">              i.e., the endpoint need not to be RawEndpoint.</span>

<span class="sd">        &gt;&gt;&gt; inActionObj = create_in_action_set()</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;in create_in_action_object method&quot;</span><span class="p">)</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">CREATE_TEMPLATE_MSG</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">res</span><span class="p">:</span>
                <span class="n">actionObj</span> <span class="o">=</span> <span class="n">InActionObject</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">res</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">actionObj</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">actionObj</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;create_in_action_object Failed=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">e</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.remove_inaction_object"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.remove_inaction_object">[docs]</a>    <span class="k">def</span> <span class="nf">remove_inaction_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inaction_obj</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Delete the inaction object. Internally, inaction_obj gets</span>
<span class="sd">        deleted based on the msgid.</span>

<span class="sd">        :parameter inaction_obj: inaction_obj returned by</span>
<span class="sd">                                 verify_request_send_response().</span>

<span class="sd">        :returns: Upon success, True is returned. Orelse, Exception</span>
<span class="sd">                  is thrown from the Camelot.</span>

<span class="sd">        &gt;&gt;&gt; ep1.remove_inaction_object(inaction_obj)</span>
<span class="sd">            True</span>
<span class="sd">        &gt;&gt;&gt; ep1.remove_inaction_object(inaction_obj)</span>
<span class="sd">            CamelotError: No match found</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;in remove_inaction_object method&quot;</span><span class="p">)</span>
        <span class="n">event_type</span> <span class="o">=</span> <span class="s1">&#39;verifyevent&#39;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">inaction_obj</span><span class="p">,</span> <span class="n">InActionObject</span><span class="p">):</span>
            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;invalid inaction object passed&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">inaction_obj</span><span class="o">.</span><span class="n">sub_type</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">unregister_event</span><span class="p">(</span><span class="n">event_type</span><span class="p">,</span> <span class="n">inaction_obj</span><span class="o">.</span><span class="n">sub_type</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span>
            <span class="n">camelot</span><span class="o">.</span><span class="n">REMOVE_INACTION_OBJ</span><span class="p">,</span> <span class="n">inaction_obj</span><span class="o">.</span><span class="n">msgid</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.sip_message_detailed"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.sip_message_detailed">[docs]</a>    <span class="k">def</span> <span class="nf">sip_message_detailed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">call_ref</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;INVITE&#39;</span><span class="p">]):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        This is used for displaying received and sent SIP messages for a call.</span>
<span class="sd">        One can choose to display messages only for the methods of their</span>
<span class="sd">        choice.</span>

<span class="sd">        :parameter call_ref: call reference of the call. It is mandatory</span>
<span class="sd">                             parameter currently.</span>
<span class="sd">        :parameter methods: list of SIP method names.Default is [&#39;INVITE&#39;].</span>
<span class="sd">                            This list will restrict the output to only those</span>
<span class="sd">                            messages received with the matching methods.</span>
<span class="sd">                            If methods=None is set, then the messages related</span>
<span class="sd">                            to all methods will be displayed.</span>

<span class="sd">        :returns: A list of SIP Messages belonging the call and as chosen by</span>
<span class="sd">                  the methods list.Individual fields of the list of the</span>
<span class="sd">                  dictionaries are explained below:\n</span>
<span class="sd">                  * start_line: request or response line for the SIP Message</span>
<span class="sd">                  * headers: It is a dictionary of all the headers with their</span>
<span class="sd">                    name and value pairs</span>
<span class="sd">                  * body: Content body of the SIP message</span>
<span class="sd">                  * direction: Direction of the message. Possible values are</span>
<span class="sd">                    &#39;send&#39; and &#39;recv&#39;</span>

<span class="sd">        &gt;&gt;&gt; ep1.sip_message_detailed(call_ref=&#39;0xf356f034&#39;,</span>
<span class="sd">        methods=[&#39;INVITE&#39;,&#39;BYE&#39;])</span>
<span class="sd">        Content is not shown here because of space constraint</span>
<span class="sd">        &gt;&gt;&gt; ep1.sip_message_detailed(call_ref=&#39;0xf356f034&#39;,None)</span>
<span class="sd">        [0][&#39;start_line&#39;]</span>
<span class="sd">        u&#39;INVITE sip:430002@10.12.10.87:5060 SIP/2.0&#39;</span>

<span class="sd">        For more information please refer to camelot wiki page:\n</span>
<span class="sd">        https://wiki.cisco.com/display/CAMELOT/Simplified+SIP+Message+handling#SimplifiedSIPMessagehandling-SipMessageDetailedAPI</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">call_ref</span> <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_valid_call_ref</span><span class="p">(</span><span class="n">call_ref</span><span class="p">):</span>
            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;call reference not valid&#39;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">methods</span><span class="p">:</span>
            <span class="n">methods</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;NONE&#39;</span><span class="p">]</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">methods</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;not a valid list for methods&#39;</span><span class="p">)</span>

        <span class="n">out_message</span> <span class="o">=</span> <span class="n">camelot</span><span class="o">.</span><span class="n">SIP_MESSAGE_DETAILED</span>

        <span class="n">methodlist</span> <span class="o">=</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">methods</span><span class="p">)</span>

        <span class="n">out_message</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1"> </span><span class="si">{}</span><span class="s1">^</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="n">out_message</span><span class="p">,</span> <span class="n">call_ref</span><span class="p">,</span> <span class="n">methodlist</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span>
            <span class="n">camelot</span><span class="o">.</span><span class="n">SIP_MESSAGE_DETAILED</span><span class="p">,</span> <span class="n">out_message</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.get_tvs_info"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.get_tvs_info">[docs]</a>    <span class="k">def</span> <span class="nf">get_tvs_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Displays the information related to TVS Client</span>

<span class="sd">        :returns: If the -field argument is omitted, a variable sized list of</span>
<span class="sd">            field  value pairs is returned with all the details of TVSClient</span>
<span class="sd">            If the -field option is specified,only the value for the specified</span>
<span class="sd">            field is returned\n</span>
<span class="sd">            If a failure occurs returns the appropriate error string\n</span>
<span class="sd">            * &quot;tvsmode&quot; TVS Client mode set by the user for the config parm</span>
<span class="sd">            * &quot;tvscache&quot; Displays if the TVS Client local cache is</span>
<span class="sd">               enable/disable</span>
<span class="sd">            * &quot;currentserver&quot; Displays the IP address of TVS Server to be used</span>
<span class="sd">              for a TVS query</span>
<span class="sd">            * &quot;tvsservers&quot; Displays IP addresses of all the TVS Servers</span>
<span class="sd">               available in the cluster in the order of their priority</span>
<span class="sd">               When TVSClient is not active, the field &#39;tvsclientstatus&#39;will</span>
<span class="sd">               display status as &#39;inactive&#39;</span>

<span class="sd">        &gt;&gt;&gt; get_tvs_info()</span>
<span class="sd">        {&#39;currentserver&#39;: &#39;10.12.10.5&#39;,</span>
<span class="sd">        &#39;tvscache&#39;: &#39;enabled&#39;,</span>
<span class="sd">        &#39;tvsclientstatus&#39;: &#39;ready&#39;,</span>
<span class="sd">        &#39;tvsmode&#39;: &#39;trustlist&#39;,</span>
<span class="sd">        &#39;tvsservers&#39;: {&#39;server 1&#39;:&#39;10.12.10.5&#39;,&#39;server 2&#39;:&#39;&#39;,&#39;server 3&#39;:&#39;&#39;}}</span>

<span class="sd">        For more information please refer to camelot wiki page:\n</span>
<span class="sd">        https://wiki.cisco.com/display/CAMELOT/gettvsinfo</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering get_tvs_info function&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">GET_TVS_INFO</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.get_tvs_client_stats"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.get_tvs_client_stats">[docs]</a>    <span class="k">def</span> <span class="nf">get_tvs_client_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Displays TVS Client statistics for the certificate verify</span>
<span class="sd">           requests received</span>
<span class="sd">           :returns: A variable size list of(field,value)pairs with all</span>
<span class="sd">                     statistics of TVS Client Certificate verify requests</span>
<span class="sd">                     If the -field option is specified, only the value</span>
<span class="sd">                     for the specified field is returned\n</span>
<span class="sd">            If a failure occurs, it returns the appropriate error string</span>
<span class="sd">            * &quot;success&quot; Total number of certificate verify requests succeeded\n</span>
<span class="sd">            * &quot;failed&quot; Total number of certificate requests failed\n</span>
<span class="sd">            * &quot;found in trustlist&quot; Number of verify requests for which</span>
<span class="sd">              certificate is found in trustlist\n</span>
<span class="sd">            * &quot;found in cache&quot; Number of verify requests for which certificate</span>
<span class="sd">              is found in local cache</span>
<span class="sd">            * &quot;tvs server&quot; Number of  verify requests for which TVS Server was</span>
<span class="sd">               contacted to verify certificate</span>
<span class="sd">            * &quot;found&quot; Certificates found on TVS Server</span>
<span class="sd">            * &quot;notfound&quot; Certificates not found on TVS Server</span>

<span class="sd">        &gt;&gt;&gt; ep1.get_tvs_client_stats()</span>
<span class="sd">        {&#39;found in cache&#39;: &#39;0&#39;,</span>
<span class="sd">         &#39;found in trustlist&#39;: &#39;3&#39;,</span>
<span class="sd">         &#39;success 3&#39;: &#39;failed 0&#39;,</span>
<span class="sd">         &#39;tvs server&#39;: &#39;notfound 0&#39;}</span>

<span class="sd">        For more information please refer to camelot wiki page:\n</span>
<span class="sd">        https://wiki.cisco.com/display/CAMELOT/gettvsclientstats</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering get_tvs_clientstats function&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">GET_TVS_CLIENTSTATS</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.get_tvs_server_stats"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.get_tvs_server_stats">[docs]</a>    <span class="k">def</span> <span class="nf">get_tvs_server_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Displays TVS Server statistics for the no of times the TVS Client</span>
<span class="sd">            interacted with primary,failover to secondary and failover to</span>
<span class="sd">            teritiary TVS Servers</span>
<span class="sd">           :returns: A variable size list of(field,value)pairs with all</span>
<span class="sd">                     statistics of TVS server</span>
<span class="sd">            If the -field option is specified, only the value for the specified</span>
<span class="sd">            field is returned</span>
<span class="sd">            If a failure occurs, it returns the appropriate error string</span>
<span class="sd">            * &quot;successful connections primary&quot; No of  times TVS Client setup</span>
<span class="sd">              the successful connections with Primary TVS Server</span>
<span class="sd">            * &quot;failover to secondary&quot; Number of times failover happened to</span>
<span class="sd">               secondary TVS Server</span>
<span class="sd">            * &quot;failover to tertiary&quot; Number of times failover happened to</span>
<span class="sd">              tertiary TVS Server</span>

<span class="sd">        &gt;&gt;&gt; ep1.get_tvs_server_stats()</span>
<span class="sd">        {&#39;failover to secondary&#39;: &#39;0&#39;,</span>
<span class="sd">         &#39;failover to tertiary&#39;: &#39;0&#39;,</span>
<span class="sd">          &#39;successful connections primary&#39;: &#39;0&#39;}</span>

<span class="sd">        For more information please refer to camelot wiki page:\n</span>
<span class="sd">        https://wiki.cisco.com/display/CAMELOT/gettvsserverstats</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering get_tvs_serverstats function&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">GET_TVS_SERVERSTATS</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.display_tvs_cache"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.display_tvs_cache">[docs]</a>    <span class="k">def</span> <span class="nf">display_tvs_cache</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Displays the details of all the certificates present in TVS Client</span>
<span class="sd">           local cache</span>
<span class="sd">           :returns: A variable sized list of {field  value} pairs is returned</span>
<span class="sd">                     with each entry of the certificate in the local cache</span>
<span class="sd">           If a failure occurs returns the appropriate error string</span>
<span class="sd">           * &quot;certlen&quot; length of the certificate</span>
<span class="sd">           * &quot;timetolive&quot; time to live value for the given certificate in the</span>
<span class="sd">             cache</span>

<span class="sd">        &gt;&gt;&gt; ep1.disp_tvs_cache()</span>
<span class="sd">        {&#39;tvs local cache&#39;: &#39;&#39;}</span>

<span class="sd">        For more information please refer to camelot wiki page:\n</span>
<span class="sd">        https://wiki.cisco.com/display/CAMELOT/disptvscache</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering disp_tvs_cache function&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">DISP_TVS_CACHE</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.reset_tvs_cache"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.reset_tvs_cache">[docs]</a>    <span class="k">def</span> <span class="nf">reset_tvs_cache</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Displays the details of all the certificates present in the</span>
<span class="sd">           endpoint local trust list</span>
<span class="sd">           :returns: A variable sized list of {field  value} pairs is returned</span>
<span class="sd">                     with each entry of the certificate in the trust list</span>
<span class="sd">            In case of failure returns appropriate error string</span>
<span class="sd">            * &quot;subjectipaddress&quot; Subject IP address for the certificate</span>
<span class="sd">            * &quot;subjectfunction&quot;  Subject function</span>
<span class="sd">            * &quot;issuername&quot;  Issuer details of the certificate</span>
<span class="sd">            * &quot;certlen&quot; Length of the Certificate</span>

<span class="sd">        For more information please refer to camelot wiki page:\n</span>
<span class="sd">        https://wiki.cisco.com/display/CAMELOT/resettvscache</span>

<span class="sd">        &gt;&gt;&gt; ep1.reset_tvs_cache()</span>
<span class="sd">        {enabled}</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering disp_tvs_trustlist function&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">RESET_TVS_CACHE</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.display_tvs_trust_list"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.display_tvs_trust_list">[docs]</a>    <span class="k">def</span> <span class="nf">display_tvs_trust_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Displays the details of all the certificates present in the</span>
<span class="sd">           endpoint local trust list</span>
<span class="sd">           :returns: A variable sized list of {field  value} pairs is returned</span>
<span class="sd">            with each entry of the certificate in the trust list</span>
<span class="sd">            In case of failure returns appropriate error string</span>
<span class="sd">            * &quot;subjectipaddress&quot; Subject IP address for the certificate</span>
<span class="sd">            * &quot;subjectfunction&quot;  Subject function</span>
<span class="sd">            * &quot;issuername&quot;  Issuer details of the certificate</span>
<span class="sd">            * &quot;certlen&quot; Length of the Certificate</span>

<span class="sd">        &gt;&gt;&gt; ep1.display_tvs_trust_list()</span>
<span class="sd">        &#39;{{trust list} {{cert:0 {subjectipaddress 10.12.10.5}</span>
<span class="sd">        {subjectfunction 0} {issuername CN=seeapl-ROOTDC1-CA}{certlen 1237} }&#39;,</span>
<span class="sd">        &#39;{cert:1 {subjectipaddress 10.12.10.5} {subjectfunction 2}</span>
<span class="sd">        {issuername CN=seeapl-ROOTDC1-CA} {certlen 1237} }&#39;,</span>

<span class="sd">        For more information please refer to camelot wiki page:\n</span>
<span class="sd">        https://wiki.cisco.com/display/CAMELOT/disptvstrustlist</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Entering disp_tvs_trustlist function&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">DISP_TVS_TRUSTLIST</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.get_info_transactions"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.get_info_transactions">[docs]</a>    <span class="k">def</span> <span class="nf">get_info_transactions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Get information about transactions done during inservice.\n</span>
<span class="sd">        Note: Currently it supports only below mentioned fields.</span>

<span class="sd">        :returns: dictionary of dictionaries with the fields mentioned below:\n</span>
<span class="sd">                  * tftp_config - it is a dictionary containing tftp</span>
<span class="sd">                    transaction info:\n</span>
<span class="sd">                    currently it supports below mentioned fields only:\n</span>
<span class="sd">                    * device_config_file - it is a dictionary containing two</span>
<span class="sd">                      fileds:\n</span>
<span class="sd">                      * url - It contains the endpoint specific devie</span>
<span class="sd">                        configuration file name.</span>
<span class="sd">                      * status - It contains the status of received response.</span>
<span class="sd">                    * xmldefault - it is a dictionary containing 3 fileds:\n</span>
<span class="sd">                      * url - it contains the defautl device configuration file</span>
<span class="sd">                        name.</span>
<span class="sd">                      * status - it contains the status of received response.</span>
<span class="sd">                      * mode - it can be any of the two values either</span>
<span class="sd">                        onboarding or autoregistration.It will be empty if</span>
<span class="sd">                        parsing of the file failed or validation of</span>
<span class="sd">                        &lt;activationDomainURL&gt; fails.</span>

<span class="sd">        For more info please refer to camelot wiki page:\n</span>
<span class="sd">        https://wiki.cisco.com/display/CAMELOT/Activation+Code+Onboarding#ActivationCodeOnboarding-On-boarddiscovery</span>


<span class="sd">        &gt;&gt;&gt; ep1.get_info_transactions()</span>
<span class="sd">            {u&#39;tftp_config&#39;: {</span>
<span class="sd">            u&#39;device_config_file&#39;: {u&#39;status&#39;: u&#39;404 Not Found&#39;,</span>
<span class="sd">            u&#39;url&#39;: u&#39;EP886588650003.cnf.xml&#39;},</span>
<span class="sd">            u&#39;xmldefault&#39;: {u&#39;mode&#39;: u&#39;onboarding&#39;,</span>
<span class="sd">            u&#39;status&#39;: u&#39;200 OK&#39;,</span>
<span class="sd">            u&#39;url&#39;: u&#39;XMLDefault.cnf.xml&#39;}}}</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">GET_INFO_TRANSACTION</span><span class="p">)</span></div>

<div class="viewcode-block" id="CamelotEndpoint.get_onboarding"><a class="viewcode-back" href="../../api/endpoint.html#camelot.endpoint.CamelotEndpoint.get_onboarding">[docs]</a>    <span class="k">def</span> <span class="nf">get_onboarding</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Displays various information on on-boarding process.</span>

<span class="sd">        :returns: dictionary of dictionaries with the fields mentioned below:\n</span>
<span class="sd">                  * activation_url - absolute URI of activation URL</span>
<span class="sd">                  * atls- information about GDS operation over ATLS\n</span>
<span class="sd">                    with following fields:\n</span>
<span class="sd">                    * abs_path - URI of last sent message over ATLS</span>
<span class="sd">                    * state -shows the current state of ATLS operations</span>
<span class="sd">                      with GDS</span>
<span class="sd">                    * response - response details of ATLS GDS redirection</span>
<span class="sd">                      request with following fields:\n</span>
<span class="sd">                      * body - if ATLS redirect request gets successful</span>
<span class="sd">                        response and camelot has successfully parsed body</span>
<span class="sd">                        it will contain three fields:\n</span>
<span class="sd">                        * serviceDomain - DNS server records for MRA cluster</span>
<span class="sd">                        * callControl - It identifies the deployment if value</span>
<span class="sd">                          is CUCM means it is a CUCM/MRA registration and</span>
<span class="sd">                          proceeds for MRA onboarding.</span>
<span class="sd">                        * state - This represents the clusterUUID.</span>
<span class="sd">                      * code - http response code for GDS redirection request</span>
<span class="sd">                      * phrase - reason_phrase of the response</span>
<span class="sd">                      * warning - warning header if any</span>
<span class="sd">                      * reason - reason header if any</span>
<span class="sd">                  * camelot_reason - application error, connection down\n</span>
<span class="sd">                    events tcp Connection error/TLS negotiation failure etc.</span>
<span class="sd">                  * gds - information about gds servers with following\n</span>
<span class="sd">                    fields:\n</span>
<span class="sd">                    * host -host name of gds server</span>
<span class="sd">                    * error -</span>
<span class="sd">                    * servers - list of dictionaries for each gds server\n</span>
<span class="sd">                      with following fields:\n</span>
<span class="sd">                      * address - IP address of gds server</span>
<span class="sd">                      * state  - state information</span>
<span class="sd">                      * error  - error info</span>
<span class="sd">                  * service_data -</span>
<span class="sd">                  * srp_invoke - information about srp_invoke operation\n</span>
<span class="sd">                    with following fields:\n</span>
<span class="sd">                    * abs_path - absolute path of srp invoke URL</span>
<span class="sd">                    * response - response details of srp invoke request with</span>
<span class="sd">                      following fields:\n</span>
<span class="sd">                      * code - http response code for srp invoke request</span>
<span class="sd">                      * phrase - reason_phrase of the response</span>
<span class="sd">                      * reason - reason header if any</span>
<span class="sd">                      * warning - warning header if any</span>
<span class="sd">                  * srp_register - information about srp_register operation\n</span>
<span class="sd">                    with following fields:\n</span>
<span class="sd">                    * abs_path - absolute path of srp register URL</span>
<span class="sd">                    * response - response details of srp register request with</span>
<span class="sd">                      following fields:\n</span>
<span class="sd">                      * code - http response code for srp register request</span>
<span class="sd">                      * phrase - reason_phrase of the response</span>
<span class="sd">                      * reason - reason header if any</span>
<span class="sd">                      * warning - warning header if any</span>
<span class="sd">                  * state - operation state of srp_invoke and srp_register.\n</span>
<span class="sd">                  * tokens - string values of true or false for valid or</span>
<span class="sd">                    invalid\n</span>
<span class="sd">                  * valid_hmac - string value of true or false to indicate\n</span>
<span class="sd">                    if its valid or invalid\n</span>
<span class="sd">                  * autoreg_status - it indicates the current mode or status\n</span>
<span class="sd">                    with respect to auto registration. For possible values\n</span>
<span class="sd">                    and their meaning , please refer to following wiki link:\n</span>
<span class="sd">                    https://wiki.cisco.com/display/CAMELOT/Activation+Code+Onboarding#ActivationCodeOnboarding-autoreg_statusfield</span>


<span class="sd">        For more info please refer to camelot wiki page:\n</span>
<span class="sd">        https://wiki.cisco.com/display/CAMELOT/Activation+Code+Onboarding#ActivationCodeOnboarding-get_onboardingAPI</span>

<span class="sd">        &gt;&gt;&gt; Sample Example for On-prem</span>
<span class="sd">        &gt;&gt;&gt;</span>
<span class="sd">           ep1.get_onboarding()</span>
<span class="sd">            {u&#39;activation_url&#39;: u&#39;https://cam-ccm-9.camelot.test:8443/ccmact&#39;,</span>
<span class="sd">             u&#39;camelot_reason&#39;: u&#39;&#39;,</span>
<span class="sd">             u&#39;gds&#39;: {u&#39;host&#39;: u&#39;&#39;,</span>
<span class="sd">              u&#39;servers&#39;: [{u&#39;address&#39;: u&#39;&#39;, u&#39;error&#39;: u&#39;&#39;, u&#39;state&#39;: u&#39;&#39;}]},</span>
<span class="sd">             u&#39;service_data&#39;: u&#39;&#39;,</span>
<span class="sd">             u&#39;atls&#39;: u&#39;&#39;,</span>
<span class="sd">             u&#39;srp_invoke&#39;: {u&#39;abs_path&#39;: u&#39;/ccmact/v1/actions/srp/invoke&#39;,</span>
<span class="sd">              u&#39;response&#39;: {u&#39;code&#39;: u&#39;401&#39;,</span>
<span class="sd">               u&#39;phrase&#39;: u&#39;Unauthorized&#39;,</span>
<span class="sd">               u&#39;reason&#39;: u&#39;&#39;,</span>
<span class="sd">               u&#39;warning&#39;: u&#39;&#39;}},</span>
<span class="sd">             u&#39;srp_register&#39;: {u&#39;abs_path&#39;: u&#39;/ccmact/v1/actions/srp/register&#39;,</span>
<span class="sd">              u&#39;response&#39;: {u&#39;code&#39;: u&#39;200&#39;,</span>
<span class="sd">               u&#39;phrase&#39;: u&#39;OK&#39;,</span>
<span class="sd">               u&#39;reason&#39;: u&#39;&#39;,</span>
<span class="sd">               u&#39;warning&#39;: u&#39;&#39;}},</span>
<span class="sd">             u&#39;state&#39;: u&#39;ONBOARDED&#39;,</span>
<span class="sd">             u&#39;tokens&#39;: u&#39;true&#39;,</span>
<span class="sd">             u&#39;autoreg_status&#39;: u&#39;onboarding&#39;,</span>
<span class="sd">             u&#39;valid_hmac&#39;: u&#39;true&#39;}</span>

<span class="sd">        &gt;&gt;&gt; Sample Example for MRA</span>
<span class="sd">        &gt;&gt;&gt; ep1.get_onboarding()</span>
<span class="sd">            {u&#39;activation_url&#39;: u&#39;&#39;,</span>
<span class="sd">             u&#39;atls&#39;:{</span>
<span class="sd">              u&#39;abs_path&#39;: u&#39;/api/v2/atls/redirect&#39;,</span>
<span class="sd">              u&#39;state&#39;: u&#39;SUCCESS_RESPONSE_OVER_ATLS_RECEIVED&#39;,</span>
<span class="sd">              u&#39;response&#39;: {u&#39;body&#39;: {u&#39;callControl&#39;: u&#39;CUCM&#39;,</span>
<span class="sd">                  u&#39;serviceDomain&#39;: u&#39;camelot.test&#39;,</span>
<span class="sd">                  u&#39;state&#39;: u&#39;7b644b72-0d92-4f0e-b010-ffdbcdb52d4d&#39;},</span>
<span class="sd">               u&#39;code&#39;: u&#39;200&#39;,</span>
<span class="sd">               u&#39;phrase&#39;: u&#39;OK&#39;,</span>
<span class="sd">               u&#39;reason&#39;: u&#39;&#39;,</span>
<span class="sd">               u&#39;warning&#39;: u&#39;&#39;}},</span>
<span class="sd">             u&#39;camelot_reason&#39;: u&#39;&#39;,</span>
<span class="sd">             u&#39;gds&#39;: {u&#39;error&#39;: u&#39;&#39;,</span>
<span class="sd">             u&#39;host&#39;: u&#39;activation.webex.com&#39;,</span>
<span class="sd">             u&#39;servers&#39;: [{u&#39;address&#39;: u&#39;35.172.26.181&#39;, u&#39;error&#39;: u&#39;&#39;,</span>
<span class="sd">             u&#39;state&#39;: u&#39;&#39;},</span>
<span class="sd">             {u&#39;address&#39;: u&#39;34.237.14.82&#39;, u&#39;error&#39;: u&#39;&#39;,</span>
<span class="sd">             u&#39;state&#39;: u&#39;&#39;}]},</span>
<span class="sd">             u&#39;service_data&#39;: u&#39;&#39;,</span>
<span class="sd">             u&#39;srp_invoke&#39;: {u&#39;abs_path&#39;: u&#39;&#39;,</span>
<span class="sd">              u&#39;response&#39;: {u&#39;code&#39;: u&#39;&#39;,</span>
<span class="sd">               u&#39;phrase&#39;: u&#39;&#39;,</span>
<span class="sd">               u&#39;reason&#39;: u&#39;&#39;,</span>
<span class="sd">               u&#39;warning&#39;: u&#39;&#39;}},</span>
<span class="sd">             u&#39;srp_register&#39;: {u&#39;abs_path&#39;: u&#39;&#39;,</span>
<span class="sd">              u&#39;response&#39;: {u&#39;code&#39;: u&#39;&#39;,</span>
<span class="sd">               u&#39;phrase&#39;: u&#39;&#39;,</span>
<span class="sd">               u&#39;reason&#39;: u&#39;&#39;,</span>
<span class="sd">               u&#39;warning&#39;: u&#39;&#39;}},</span>
<span class="sd">             u&#39;state&#39;: u&#39;ATLS_REDIRECT_SUCCESS&#39;,</span>
<span class="sd">             u&#39;tokens&#39;: u&#39;false&#39;,</span>
<span class="sd">             u&#39;autoreg_status&#39;: u&#39;&#39;,</span>
<span class="sd">             u&#39;valid_hmac&#39;: u&#39;false&#39;}</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_camelot</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">GET_ONBOARDING</span><span class="p">)</span></div></div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Camelot Python SDK v12.6.22.12.0.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Module code</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../camelot.html" >camelot</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2013, Author.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.9.
    </div>
  </body>
</html>