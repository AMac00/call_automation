
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>camelot.utils.rawendpoint_helper &#8212; Camelot Python SDK v12.6.22.12.0.0 documentation</title>
    <link rel="stylesheet" href="../../../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">Camelot Python SDK v12.6.22.12.0.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" >Module code</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../../camelot.html" accesskey="U">camelot</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for camelot.utils.rawendpoint_helper</h1><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">logging</span>


<span class="n">log</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s1">&#39;CamelotRawEndpoint&#39;</span><span class="p">)</span>


<div class="viewcode-block" id="SipTemplateMethods"><a class="viewcode-back" href="../../../api/tngpicommands.html#camelot.utils.rawendpoint_helper.SipTemplateMethods">[docs]</a><span class="k">class</span> <span class="nc">SipTemplateMethods</span><span class="p">:</span>
    <span class="n">SIP_INVITE</span> <span class="o">=</span> <span class="s1">&#39;SIP_INVITE&#39;</span>
    <span class="n">SIP_100</span> <span class="o">=</span> <span class="s1">&#39;SIP_100&#39;</span>
    <span class="n">SIP_180</span> <span class="o">=</span> <span class="s1">&#39;SIP_180&#39;</span>
    <span class="n">SIP_200</span> <span class="o">=</span> <span class="s1">&#39;SIP_200&#39;</span>
    <span class="n">SIP_ACK</span> <span class="o">=</span> <span class="s1">&#39;SIP_ACK&#39;</span>
    <span class="n">SIP_BYE</span> <span class="o">=</span> <span class="s1">&#39;SIP_BYE&#39;</span></div>


<div class="viewcode-block" id="Media"><a class="viewcode-back" href="../../../api/tngpicommands.html#camelot.utils.rawendpoint_helper.Media">[docs]</a><span class="k">class</span> <span class="nc">Media</span><span class="p">:</span>
    <span class="n">audio</span> <span class="o">=</span> <span class="s1">&#39;audio&#39;</span>
    <span class="n">video</span> <span class="o">=</span> <span class="s1">&#39;video&#39;</span>
    <span class="n">none</span> <span class="o">=</span> <span class="s1">&#39;none&#39;</span></div>


<div class="viewcode-block" id="SipHeaders"><a class="viewcode-back" href="../../../api/tngpicommands.html#camelot.utils.rawendpoint_helper.SipHeaders">[docs]</a><span class="k">class</span> <span class="nc">SipHeaders</span><span class="p">:</span>
    <span class="n">StatusLine</span> <span class="o">=</span> <span class="s1">&#39;Status-Line&#39;</span>
    <span class="n">Via</span> <span class="o">=</span> <span class="s1">&#39;Via&#39;</span>
    <span class="n">RemotePartyID</span> <span class="o">=</span> <span class="s1">&#39;Remote-Party-ID&#39;</span>
    <span class="n">From</span> <span class="o">=</span> <span class="s1">&#39;From&#39;</span>
    <span class="n">To</span> <span class="o">=</span> <span class="s1">&#39;To&#39;</span>
    <span class="n">Date</span> <span class="o">=</span> <span class="s1">&#39;Date&#39;</span>
    <span class="n">CallID</span> <span class="o">=</span> <span class="s1">&#39;Call-ID&#39;</span>
    <span class="n">Supported</span> <span class="o">=</span> <span class="s1">&#39;Supported&#39;</span>
    <span class="n">MinSE</span> <span class="o">=</span> <span class="s1">&#39;Min-SE&#39;</span>
    <span class="n">UserAgent</span> <span class="o">=</span> <span class="s1">&#39;User-Agent&#39;</span>
    <span class="n">AcceptLanguage</span> <span class="o">=</span> <span class="s1">&#39;Accept-Language&#39;</span>
    <span class="n">Allow</span> <span class="o">=</span> <span class="s1">&#39;Allow&#39;</span>
    <span class="n">Accept</span> <span class="o">=</span> <span class="s1">&#39;Accept&#39;</span>
    <span class="n">RecvInfo</span> <span class="o">=</span> <span class="s1">&#39;Recv-Info&#39;</span>
    <span class="n">CSeq</span> <span class="o">=</span> <span class="s1">&#39;CSeq&#39;</span>
    <span class="n">MaxForwards</span> <span class="o">=</span> <span class="s1">&#39;Max-Forwards&#39;</span>
    <span class="n">Timestamp</span> <span class="o">=</span> <span class="s1">&#39;Timestamp&#39;</span>
    <span class="n">Contact</span> <span class="o">=</span> <span class="s1">&#39;Contact&#39;</span>
    <span class="n">Expires</span> <span class="o">=</span> <span class="s1">&#39;Expires&#39;</span>
    <span class="n">AllowEvents</span> <span class="o">=</span> <span class="s1">&#39;Allow-Events&#39;</span>
    <span class="n">ContentType</span> <span class="o">=</span> <span class="s1">&#39;Content-Type&#39;</span>
    <span class="n">ContentLenght</span> <span class="o">=</span> <span class="s1">&#39;Content-Length&#39;</span></div>


<div class="viewcode-block" id="OutActionObject"><a class="viewcode-back" href="../../../api/tngpicommands.html#camelot.utils.rawendpoint_helper.OutActionObject">[docs]</a><span class="k">class</span> <span class="nc">OutActionObject</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">camelotconn</span><span class="p">,</span> <span class="n">msgstr</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vapi</span> <span class="o">=</span> <span class="n">camelotconn</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">msgid</span> <span class="o">=</span> <span class="n">msgstr</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">event_type</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

<div class="viewcode-block" id="OutActionObject.add_sip_header"><a class="viewcode-back" href="../../../api/tngpicommands.html#camelot.utils.rawendpoint_helper.OutActionObject.add_sip_header">[docs]</a>    <span class="k">def</span> <span class="nf">add_sip_header</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">headername</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Queued an action for adding given header to the original message</span>

<span class="sd">        :parameter headername: name of header needs to be added to original</span>
<span class="sd">            message. This can be suffixed with a optional index</span>
<span class="sd">        :parameter value: value of header given in headername and need to be</span>
<span class="sd">            added to original message</span>

<span class="sd">        &gt;&gt;&gt; actions = self.srv.create_action_set()</span>
<span class="sd">        &gt;&gt;&gt; actions.add_sip_header(&#39;To&#39;,&#39;NewTo&#39;)</span>
<span class="sd">        &gt;&gt;&gt; actions.add_sip_header(&#39;To:0&#39;, &#39;FirstTo&#39;)</span>

<span class="sd">        Above example will add Two new &#39;To&#39; Header to original message on which</span>
<span class="sd">        this action will be applied. First &#39;To&#39; Header with value NewTo will be</span>
<span class="sd">        added at the end as no Index is specified. Second &#39;To&#39; Header with</span>
<span class="sd">        value &#39;FirstTo&#39; will be added as the first &#39;To&#39; as index given is zero.</span>
<span class="sd">        If index provided is greater than equal to the number of headers</span>
<span class="sd">        already provided then that value is added as last value for that header</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="n">reqMsg</span> <span class="o">=</span> <span class="s1">&#39;addsipheader </span><span class="si">{0}</span><span class="s1"> 0 </span><span class="si">{1}</span><span class="s1"> 0 </span><span class="si">{2}</span><span class="s1">@&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msgid</span><span class="p">,</span> <span class="n">headername</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="sd">&#39;&#39;&#39; 0 is added in message to tell that this header needs</span>
<span class="sd">        to be added in original message. second 0 is dummy &#39;&#39;&#39;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">vapi</span><span class="o">.</span><span class="n">_send_message</span><span class="p">(</span><span class="n">reqMsg</span><span class="p">,</span> <span class="s1">&#39;add_sip_header&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="OutActionObject.remove_sip_header"><a class="viewcode-back" href="../../../api/tngpicommands.html#camelot.utils.rawendpoint_helper.OutActionObject.remove_sip_header">[docs]</a>    <span class="k">def</span> <span class="nf">remove_sip_header</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">headername</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Queued an action for removing given header from the original message</span>

<span class="sd">        :parameter headername: name of header that needs to be removed from</span>
<span class="sd">            original message</span>
<span class="sd">        :parameter value: value of header need to be matched for deletion</span>
<span class="sd">            of header</span>

<span class="sd">        &gt;&gt;&gt; actions = self.srv.create_action_set()</span>
<span class="sd">        &gt;&gt;&gt; actions.remove_sip_header(&#39;From&#39;)</span>
<span class="sd">        &gt;&gt;&gt; actions.remove_sip_header(&#39;From&#39;,&#39;OldFrom&#39;)</span>
<span class="sd">        &gt;&gt;&gt; actions.remove_sip_header(&#39;From:0&#39;)</span>
<span class="sd">        &gt;&gt;&gt; actions.remove_sip_header(&#39;From:0&#39;,&#39;delFrom&#39;)</span>

<span class="sd">        Above example shows four different ways of using remove_sip_header.</span>
<span class="sd">        First without index and value, this one will delete all header with</span>
<span class="sd">        given header name.</span>
<span class="sd">        Second with a value, this one will delete all &#39;From&#39; Header which</span>
<span class="sd">        contain OldFrom in their value.</span>
<span class="sd">        Third with an index will delete given header at the given index. In</span>
<span class="sd">        this example First From header will be deleted.</span>
<span class="sd">        Forth with both index and value will only consider index as index</span>
<span class="sd">        take precedence over value, and if both are provided only index</span>
<span class="sd">        is considered</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">reqMsg</span> <span class="o">=</span> <span class="s1">&#39;addsipheader </span><span class="si">{0}</span><span class="s1"> 1 </span><span class="si">{1}</span><span class="s1"> 0 </span><span class="si">{2}</span><span class="s1">@&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msgid</span><span class="p">,</span> <span class="n">headername</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="sd">&#39;&#39;&#39; 1 is added at the end of message to tell that this header needs to</span>
<span class="sd">        be deleted from original message. second 0 is dummy &#39;&#39;&#39;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">vapi</span><span class="o">.</span><span class="n">_send_message</span><span class="p">(</span><span class="n">reqMsg</span><span class="p">,</span> <span class="s1">&#39;remove_sip_header&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="OutActionObject.modify_sip_header"><a class="viewcode-back" href="../../../api/tngpicommands.html#camelot.utils.rawendpoint_helper.OutActionObject.modify_sip_header">[docs]</a>    <span class="k">def</span> <span class="nf">modify_sip_header</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">headername</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">oldValue</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                          <span class="n">exclude_tag</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Queued an action for removing given header from the original message</span>

<span class="sd">        :parameter headername: name of header that needs to be modified in</span>
<span class="sd">            original message</span>
<span class="sd">        :parameter value: New value of header given in headername and need to</span>
<span class="sd">            be put in original message</span>
<span class="sd">        :parameter oldValue: Value need to be matched in original message</span>
<span class="sd">        :parameter exclude_tag: Exclude From/To tag from owerwritting</span>

<span class="sd">        &gt;&gt;&gt; actions = self.srv.create_action_set()</span>
<span class="sd">        &gt;&gt;&gt; actions.modify_sip_header(&#39;Call-ID&#39;,&#39;newCallID&#39;)</span>
<span class="sd">        &gt;&gt;&gt; actions.modify_sip_header(&#39;Call-ID&#39;,&#39;newCallID&#39;,&#39;oldCallID&#39;)</span>
<span class="sd">        &gt;&gt;&gt; actions.modify_sip_header(&#39;Call-ID:0&#39;,&#39;newCallID&#39;)</span>
<span class="sd">        &gt;&gt;&gt; actions.modify_sip_header(&#39;Call-ID:0&#39;,&#39;newCallID&#39;,&#39;oldCallID&#39;)</span>

<span class="sd">        Above example shows four different ways of using modify_sip_header</span>
<span class="sd">        First without index and without old value, this one will modify all</span>
<span class="sd">        header with given header name.</span>
<span class="sd">        Second with an old value, this one will modify all &#39;Call-ID&#39; Header</span>
<span class="sd">        which contain OldCallID in their value.</span>
<span class="sd">        Third with an index will modify given header at the given index.</span>
<span class="sd">        In this example First(index 0) Call-ID header is deleted.</span>
<span class="sd">        Forth with both index and an old value will only consider index as</span>
<span class="sd">        index take precedence over value, and if both are provided only index</span>
<span class="sd">        is considered</span>

<span class="sd">        &gt;&gt;&gt; actions.modify_sip_header(&#39;From&#39;,&#39;newValue&#39;, exclude_tag=True)</span>

<span class="sd">        Above example will modify &#39;From&#39; header without replacing tag value.</span>
<span class="sd">        Here it will use old tag value as it is.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="n">exclude_tag</span><span class="p">:</span>
            <span class="n">exclude</span> <span class="o">=</span> <span class="s1">&#39;1&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">exclude</span> <span class="o">=</span> <span class="s1">&#39;0&#39;</span>

        <span class="k">if</span> <span class="n">oldValue</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="n">msgTail</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="si">{0}</span><span class="s1">@&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">oldValue</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">msgTail</span> <span class="o">=</span> <span class="s1">&#39;@&#39;</span>

        <span class="n">reqMsg</span> <span class="o">=</span> <span class="s1">&#39;addsipheader </span><span class="si">{0}</span><span class="s1"> 2 </span><span class="si">{1}</span><span class="s1"> </span><span class="si">{2}</span><span class="s1"> </span><span class="si">{3}</span><span class="s1"> </span><span class="si">{4}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msgid</span><span class="p">,</span> <span class="n">headername</span><span class="p">,</span> <span class="n">exclude</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">msgTail</span><span class="p">)</span>

        <span class="sd">&#39;&#39;&#39; 2 is added at the end of message to tell that this header needs to</span>
<span class="sd">        be modified in original message &#39;&#39;&#39;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">vapi</span><span class="o">.</span><span class="n">_send_message</span><span class="p">(</span><span class="n">reqMsg</span><span class="p">,</span> <span class="s1">&#39;modify_sip_header&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="OutActionObject.add_sdp_attrib"><a class="viewcode-back" href="../../../api/tngpicommands.html#camelot.utils.rawendpoint_helper.OutActionObject.add_sdp_attrib">[docs]</a>    <span class="k">def</span> <span class="nf">add_sdp_attrib</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">media</span><span class="o">=</span><span class="s1">&#39;none&#39;</span><span class="p">,</span> <span class="n">typestr</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                       <span class="n">attrib</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Adding sdp attrib with value given</span>

<span class="sd">        :parameter media: Value of the media. Default is session level</span>
<span class="sd">        :parameter typestr: Type of attribute.</span>
<span class="sd">        :parameter attrib: Name of attribute.</span>
<span class="sd">        :parameter value: Value of the attribute.</span>

<span class="sd">        &gt;&gt;&gt; actions = self.srv.create_out_action_set()</span>
<span class="sd">        &gt;&gt;&gt; actions.add_sdp_header(typestr=&#39;v&#39;,value=&#39;camelot&#39;)</span>
<span class="sd">        &gt;&gt;&gt; actions.add_sdp_header(&#39;audio&#39;,&#39;a&#39;,&#39;fmtp&#39;,&#39;100&#39;)</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">reqMsg</span> <span class="o">=</span> <span class="s1">&#39;addsdpheader </span><span class="si">{0}</span><span class="s1"> 7 </span><span class="si">{1}</span><span class="s1">:</span><span class="si">{2}</span><span class="s1">:</span><span class="si">{3}</span><span class="s1">:</span><span class="si">{4}</span><span class="s1">@&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msgid</span><span class="p">,</span> <span class="n">media</span><span class="p">,</span> <span class="n">typestr</span><span class="p">,</span> <span class="n">attrib</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">vapi</span><span class="o">.</span><span class="n">_send_message</span><span class="p">(</span><span class="n">reqMsg</span><span class="p">,</span> <span class="s1">&#39;add_sdp_attrib&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="OutActionObject.remove_sdp_session_attrib"><a class="viewcode-back" href="../../../api/tngpicommands.html#camelot.utils.rawendpoint_helper.OutActionObject.remove_sdp_session_attrib">[docs]</a>    <span class="k">def</span> <span class="nf">remove_sdp_session_attrib</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">typestr</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">attrib</span><span class="o">=</span><span class="s1">&#39;none&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Retrieve SDP attributes for given values</span>

<span class="sd">        :parameter typestr: Type of attribute. If not provided all types will</span>
<span class="sd">                            be considered</span>
<span class="sd">        :parameter attrib: Name of attribute. If not provided all attributes</span>
<span class="sd">                            will be considered</span>
<span class="sd">        :parameter value: Value of the attribute. If not provided all</span>
<span class="sd">                          attributes will be considered.</span>

<span class="sd">        All parameters are optional.</span>

<span class="sd">        &gt;&gt;&gt; actions = self.srv.create_out_action_set()</span>
<span class="sd">        &gt;&gt;&gt; actions.remove_sdp_session_attrib(&#39;v&#39;)</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">reqMsg</span> <span class="o">=</span> <span class="s1">&#39;addsdpheader </span><span class="si">{0}</span><span class="s1"> 3 none:</span><span class="si">{1}</span><span class="s1">:</span><span class="si">{2}</span><span class="s1">:</span><span class="si">{3}</span><span class="s1">@&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msgid</span><span class="p">,</span> <span class="n">typestr</span><span class="p">,</span> <span class="n">attrib</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">vapi</span><span class="o">.</span><span class="n">_send_message</span><span class="p">(</span><span class="n">reqMsg</span><span class="p">,</span> <span class="s1">&#39;remove_sdp_session_attrib&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="OutActionObject.remove_sdp_media_attrib"><a class="viewcode-back" href="../../../api/tngpicommands.html#camelot.utils.rawendpoint_helper.OutActionObject.remove_sdp_media_attrib">[docs]</a>    <span class="k">def</span> <span class="nf">remove_sdp_media_attrib</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">media</span><span class="o">=</span><span class="s1">&#39;none&#39;</span><span class="p">,</span> <span class="n">typestr</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                                <span class="n">attrib</span><span class="o">=</span><span class="s1">&#39;none&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Retrieve SDP attributes for given values</span>

<span class="sd">        :parameter media: Value of the media. If not provided all</span>
<span class="sd">                          media will be considered.</span>
<span class="sd">        :parameter typestr: Type of attribute. If not provided all types will</span>
<span class="sd">                            be considered</span>
<span class="sd">        :parameter attrib: Name of attribute. If not provided all attributes</span>
<span class="sd">                            will be considered</span>
<span class="sd">        :parameter value: Value of the attribute. If not provided all</span>
<span class="sd">                          attributes will be considered.</span>

<span class="sd">        All parameters are optional.</span>

<span class="sd">        &gt;&gt;&gt; actions = self.srv.create_out_action_set()</span>
<span class="sd">        &gt;&gt;&gt; actions.remove_sdp_media_attrib(&#39;audio&#39;, &#39;a&#39;)</span>

<span class="sd">        First call to remove_sdp_media_attrib will remove all attributes</span>
<span class="sd">        under audio</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">reqMsg</span> <span class="o">=</span> <span class="s1">&#39;addsdpheader </span><span class="si">{0}</span><span class="s1"> 4 </span><span class="si">{1}</span><span class="s1">:</span><span class="si">{2}</span><span class="s1">:</span><span class="si">{3}</span><span class="s1">:</span><span class="si">{4}</span><span class="s1">@&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msgid</span><span class="p">,</span> <span class="n">media</span><span class="p">,</span> <span class="n">typestr</span><span class="p">,</span> <span class="n">attrib</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">vapi</span><span class="o">.</span><span class="n">_send_message</span><span class="p">(</span><span class="n">reqMsg</span><span class="p">,</span> <span class="s1">&#39;remove_sdp_media_attrib&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="OutActionObject.modify_sdp_session_attrib"><a class="viewcode-back" href="../../../api/tngpicommands.html#camelot.utils.rawendpoint_helper.OutActionObject.modify_sdp_session_attrib">[docs]</a>    <span class="k">def</span> <span class="nf">modify_sdp_session_attrib</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">typestr</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">attrib</span><span class="o">=</span><span class="s1">&#39;none&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                                  <span class="n">newvalue</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Retrieve SDP attributes for given values</span>

<span class="sd">        :parameter typestr: Type of attribute. If not provided all types will</span>
<span class="sd">                            be considered</span>
<span class="sd">        :parameter attrib: Name of attribute. If not provided all attributes</span>
<span class="sd">                            will be considered</span>
<span class="sd">        :parameter value: Value of the attribute. If not provided all</span>
<span class="sd">                          attributes will be considered.</span>
<span class="sd">        :parameter newvalue: new Value of the attribute.</span>

<span class="sd">        All parameters are optional.</span>

<span class="sd">        &gt;&gt;&gt; actions = self.srv.create_out_action_set()</span>
<span class="sd">        &gt;&gt;&gt; actions.modify_sdp_session_attrib(&#39;t&#39;, value=&#39;0 0&#39;, newvalue=&#39;1 2&#39;)</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">reqMsg</span> <span class="o">=</span> <span class="s1">&#39;addsdpheaderoao </span><span class="si">{0}</span><span class="s1"> 5 none:</span><span class="si">{1}</span><span class="s1">:</span><span class="si">{2}</span><span class="s1">:</span><span class="si">{3}</span><span class="s1">:</span><span class="si">{4}</span><span class="s1">@&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msgid</span><span class="p">,</span> <span class="n">typestr</span><span class="p">,</span> <span class="n">attrib</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">newvalue</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">vapi</span><span class="o">.</span><span class="n">_send_message</span><span class="p">(</span><span class="n">reqMsg</span><span class="p">,</span> <span class="s1">&#39;modify_sdp_session_attrib&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="OutActionObject.modify_sdp_media_attrib"><a class="viewcode-back" href="../../../api/tngpicommands.html#camelot.utils.rawendpoint_helper.OutActionObject.modify_sdp_media_attrib">[docs]</a>    <span class="k">def</span> <span class="nf">modify_sdp_media_attrib</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">media</span><span class="o">=</span><span class="s1">&#39;none&#39;</span><span class="p">,</span> <span class="n">typestr</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                                <span class="n">attrib</span><span class="o">=</span><span class="s1">&#39;none&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">newvalue</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Retrieve SDP attributes for given values</span>

<span class="sd">        :parameter typestr: Type of attribute. If not provided all types will</span>
<span class="sd">                            be considered</span>
<span class="sd">        :parameter attrib: Name of attribute. If not provided all attributes</span>
<span class="sd">                            will be considered</span>
<span class="sd">        :parameter value: Value of the attribute. If not provided all</span>
<span class="sd">                          attributes will be considered.</span>
<span class="sd">        :parameter newvalue: new Value of the attribute.</span>

<span class="sd">        All parameters are optional.</span>

<span class="sd">        &gt;&gt;&gt; actions = self.srv.create_out_action_set()</span>
<span class="sd">        &gt;&gt;&gt; actions.modify_sdp_media_attrib(&#39;audio&#39;, &#39;a&#39;, value=&#39;0 0&#39;,</span>
<span class="sd">                                            newvalue=&#39;1 2&#39;)</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">reqMsg</span> <span class="o">=</span> <span class="s1">&#39;addsdpheaderoao </span><span class="si">{0}</span><span class="s1"> 6 </span><span class="si">{1}</span><span class="s1">:</span><span class="si">{2}</span><span class="s1">:</span><span class="si">{3}</span><span class="s1">:</span><span class="si">{4}</span><span class="s1">:</span><span class="si">{5}</span><span class="s1">@&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msgid</span><span class="p">,</span> <span class="n">media</span><span class="p">,</span> <span class="n">typestr</span><span class="p">,</span> <span class="n">attrib</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">newvalue</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">vapi</span><span class="o">.</span><span class="n">_send_message</span><span class="p">(</span><span class="n">reqMsg</span><span class="p">,</span> <span class="s1">&#39;modify_sdp_media_attrib&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="OutActionObject.add_sdp_lines_port0"><a class="viewcode-back" href="../../../api/tngpicommands.html#camelot.utils.rawendpoint_helper.OutActionObject.add_sdp_lines_port0">[docs]</a>    <span class="k">def</span> <span class="nf">add_sdp_lines_port0</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sdp_list</span><span class="p">,</span> <span class="n">m_index</span><span class="o">=-</span><span class="mi">1</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Add m= line with port 0 and corresponding m lines at the end of sdp.</span>

<span class="sd">        :parameter sdp_list: is a list containing sdp objects[m line,</span>
<span class="sd">         attributes]\n</span>
<span class="sd">         [sdpLineObject(mline),sdpLineObject(atr1),sdpLineObject(atr2)]</span>
<span class="sd">        :parameter m_index: index of m=line, where this port 0 m=line</span>
<span class="sd">         to be inserted. If not provided (default) inserted as a last</span>
<span class="sd">         m=line.</span>

<span class="sd">        NOTE: This API can be used for Simulated Endpoints as well.</span>
<span class="sd">              i.e., the endpoint need not to be RawEndpoint.</span>


<span class="sd">        &gt;&gt;&gt; actions = self.srv.create_out_action_set()</span>
<span class="sd">        &gt;&gt;&gt; actions.add_sdp_lines_port0(sdp_list, 3)</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">sdp_list</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">sdpLineObject</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">m_index</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                        <span class="n">val</span> <span class="o">=</span> <span class="n">j</span><span class="o">.</span><span class="n">value</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">val</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">m_index</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;@@&quot;</span> <span class="o">+</span> <span class="n">j</span><span class="o">.</span><span class="n">value</span>
                    <span class="k">if</span> <span class="n">j</span><span class="o">.</span><span class="n">attrtype</span> <span class="o">==</span> <span class="s1">&#39;m&#39;</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">add_extra_sdp_line</span><span class="p">(</span>
                            <span class="n">j</span><span class="o">.</span><span class="n">media</span><span class="p">,</span> <span class="n">j</span><span class="o">.</span><span class="n">attrtype</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">val</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">add_extra_sdp_line</span><span class="p">(</span>
                            <span class="n">j</span><span class="o">.</span><span class="n">media</span><span class="p">,</span> <span class="n">j</span><span class="o">.</span><span class="n">attrtype</span><span class="p">,</span> <span class="n">attrib</span><span class="o">=</span><span class="n">j</span><span class="o">.</span><span class="n">attr</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">val</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;sdp passed is not an instance of sdpLineObject&#39;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;add_sdp_lines_port0 failed ---&gt;[</span><span class="si">%s</span><span class="s1">]&#39;</span> <span class="o">%</span> <span class="n">e</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="OutActionObject.add_extra_sdp_line"><a class="viewcode-back" href="../../../api/tngpicommands.html#camelot.utils.rawendpoint_helper.OutActionObject.add_extra_sdp_line">[docs]</a>    <span class="k">def</span> <span class="nf">add_extra_sdp_line</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">media</span><span class="o">=</span><span class="s1">&#39;none&#39;</span><span class="p">,</span> <span class="n">type_attr</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                           <span class="n">attrib</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Adding sdp attrib with value given, at the end of sdp blindly.</span>

<span class="sd">        :parameter media: Value of the media. Default is session level</span>
<span class="sd">        :parameter type_attr: Type of attribute.</span>
<span class="sd">        :parameter attrib: Name of attribute.</span>
<span class="sd">        :parameter value: Value of the attribute.</span>

<span class="sd">        &gt;&gt;&gt; actions = self.srv.create_out_action_set()</span>
<span class="sd">        &gt;&gt;&gt; actions.add_extra_sdp_line(typestr=&#39;v&#39;,value=&#39;camelot&#39;)</span>
<span class="sd">        &gt;&gt;&gt; actions.add_extra_sdp_line(&#39;audio&#39;,&#39;a&#39;,&#39;fmtp&#39;,&#39;100&#39;)</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">reqMsg</span> <span class="o">=</span> <span class="s1">&#39;addsdpheader </span><span class="si">{0}</span><span class="s1"> 8 </span><span class="si">{1}</span><span class="s1">:</span><span class="si">{2}</span><span class="s1">:</span><span class="si">{3}</span><span class="s1">:</span><span class="si">{4}</span><span class="s1">@&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msgid</span><span class="p">,</span> <span class="n">media</span><span class="p">,</span> <span class="n">type_attr</span><span class="p">,</span> <span class="n">attrib</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">vapi</span><span class="o">.</span><span class="n">_send_message</span><span class="p">(</span><span class="n">reqMsg</span><span class="p">,</span> <span class="s1">&#39;add_sdp_attrib&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="OutActionObject.get_media_type"><a class="viewcode-back" href="../../../api/tngpicommands.html#camelot.utils.rawendpoint_helper.OutActionObject.get_media_type">[docs]</a>    <span class="k">def</span> <span class="nf">get_media_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sdp_list</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;this gives the type of media line</span>

<span class="sd">        :parameter sdp_list: is a list contaning sdp objects[m line,</span>
<span class="sd">         attributes].</span>
<span class="sd">         [sdp(mline),sdp(atr1),sdp(atr2)]</span>

<span class="sd">        :returns: will be a string AUDIO, VIDEO, BFCP,PRESENTATION_VIDEO, IX</span>
<span class="sd">         or FECC.</span>

<span class="sd">        NOTE: This API can be used for Simulated Endpoints as well.</span>
<span class="sd">              i.e., the endpoint need not to be RawEndpoint.</span>


<span class="sd">        &gt;&gt;&gt; actions = self.srv.create_out_action_set()</span>
<span class="sd">        &gt;&gt;&gt; actions.get_media_type(sdp_list)</span>
<span class="sd">            BFCP</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">sdp_type</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">is_video</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">sdp_list</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">i</span><span class="o">.</span><span class="n">media</span> <span class="o">==</span> <span class="s1">&#39;application&#39;</span><span class="p">:</span>
                <span class="k">if</span> <span class="s1">&#39;bfcp&#39;</span> <span class="ow">in</span> <span class="n">i</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
                    <span class="n">sdp_type</span> <span class="o">=</span> <span class="s1">&#39;BFCP&#39;</span>
                    <span class="k">break</span>
                <span class="k">elif</span> <span class="s1">&#39;ix&#39;</span> <span class="ow">in</span> <span class="n">i</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
                    <span class="n">sdp_type</span> <span class="o">=</span> <span class="s1">&#39;IX&#39;</span>
                    <span class="k">break</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">sdp_type</span> <span class="o">=</span> <span class="s1">&#39;FECC&#39;</span>
                    <span class="k">break</span>
            <span class="k">elif</span> <span class="n">i</span><span class="o">.</span><span class="n">media</span> <span class="o">==</span> <span class="s1">&#39;video&#39;</span><span class="p">:</span>
                <span class="n">isvideo</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">if</span> <span class="n">i</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;slides&#39;</span><span class="p">,</span> <span class="s1">&#39;speaker&#39;</span><span class="p">,</span> <span class="s1">&#39;alt&#39;</span><span class="p">]:</span>
                    <span class="n">sdp_type</span> <span class="o">=</span> <span class="s1">&#39;PRESENTATION_VIDEO&#39;</span>
                    <span class="k">break</span>
            <span class="k">elif</span> <span class="n">i</span><span class="o">.</span><span class="n">media</span> <span class="o">==</span> <span class="s1">&#39;audio&#39;</span><span class="p">:</span>
                <span class="n">sdp_type</span> <span class="o">=</span> <span class="s1">&#39;AUDIO&#39;</span>
                <span class="k">break</span>

        <span class="k">if</span> <span class="n">is_video</span> <span class="ow">and</span> <span class="n">sdp_type</span> <span class="o">!=</span> <span class="s1">&#39;PRESENTATION_VIDEO&#39;</span><span class="p">:</span>
            <span class="n">sdp_type</span> <span class="o">=</span> <span class="s1">&#39;VIDEO&#39;</span>

        <span class="k">return</span> <span class="n">sdp_type</span></div></div>


<div class="viewcode-block" id="InActionObject"><a class="viewcode-back" href="../../../api/tngpicommands.html#camelot.utils.rawendpoint_helper.InActionObject">[docs]</a><span class="k">class</span> <span class="nc">InActionObject</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">camelotconn</span><span class="p">,</span> <span class="n">msgstr</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vapi</span> <span class="o">=</span> <span class="n">camelotconn</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">msgid</span> <span class="o">=</span> <span class="n">msgstr</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">event_type</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sub_type</span> <span class="o">=</span> <span class="kc">None</span>

<div class="viewcode-block" id="InActionObject.add_verify_sip_header"><a class="viewcode-back" href="../../../api/tngpicommands.html#camelot.utils.rawendpoint_helper.InActionObject.add_verify_sip_header">[docs]</a>    <span class="k">def</span> <span class="nf">add_verify_sip_header</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">headername</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Queued an action for validating given header in the original message</span>

<span class="sd">        :parameter headername: name of header needs to be verified</span>
<span class="sd">        :parameter value: value of header given to be verified as</span>
<span class="sd">            value of given header</span>
<span class="sd">        :parameter mode: (optional) parameter mode is 1 if exact match is</span>
<span class="sd">            required else 0 (default value)</span>

<span class="sd">        &gt;&gt;&gt; validation = self.srv.create_in_action_set()</span>
<span class="sd">        &gt;&gt;&gt; validation.add_verify_sip_header(&#39;Allow-Events&#39;,&#39;kpml,dialog&#39;,1)</span>
<span class="sd">        &gt;&gt;&gt; validation.add_verify_sip_header(&#39;Supported&#39;,&#39;X-cisco-serviceuri&#39;)</span>
<span class="sd">        &gt;&gt;&gt; ep.start_validation_event(callback_handler,validation,</span>
<span class="sd">                                                     method=&#39;INVITE&#39;)</span>

<span class="sd">        Above example will validate two things</span>
<span class="sd">        1) If &#39;Allow-Events&#39; value is exactly &#39;kpml,dialog&#39; or not</span>
<span class="sd">        2) If &#39;Supported&#39; value contains &#39;X-cisco-serviceuri&#39; or not</span>
<span class="sd">        If both the conditions are true callback handler will get &#39;1&#39; else &#39;0&#39;</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="n">reqMsg</span> <span class="o">=</span> <span class="s1">&#39;addsipheader </span><span class="si">{0}</span><span class="s1"> </span><span class="si">{1}</span><span class="s1"> </span><span class="si">{2}</span><span class="s1"> 0 </span><span class="si">{3}</span><span class="s1">@&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msgid</span><span class="p">,</span> <span class="n">mode</span><span class="p">,</span> <span class="n">headername</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

        <span class="sd">&#39;&#39;&#39; 0 is dummy &#39;&#39;&#39;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">vapi</span><span class="o">.</span><span class="n">_send_message</span><span class="p">(</span><span class="n">reqMsg</span><span class="p">,</span> <span class="s1">&#39;add_verify_sip_header&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="InActionObject.get_verify_sip_header"><a class="viewcode-back" href="../../../api/tngpicommands.html#camelot.utils.rawendpoint_helper.InActionObject.get_verify_sip_header">[docs]</a>    <span class="k">def</span> <span class="nf">get_verify_sip_header</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Get a validation header from InActionObject</span>

<span class="sd">        :parameter index: index of the header to be extracted</span>

<span class="sd">        &gt;&gt;&gt; validation = self.srv.create_in_action_set()</span>
<span class="sd">        &gt;&gt;&gt; validation.add_verify_sip_header(&#39;Allow-Events&#39;,&#39;kpml,dialog&#39;,1)</span>
<span class="sd">        &gt;&gt;&gt; validation.add_verify_sip_header(&#39;Supported&#39;,&#39;X-cisco-serviceuri&#39;)</span>
<span class="sd">        &gt;&gt;&gt; validation.get_verify_sip_header(1)</span>

<span class="sd">        Above example will get the header stored at first postion which</span>
<span class="sd">        may be different then header added first to the InActionSet</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">reqMsg</span> <span class="o">=</span> <span class="s1">&#39;getsipheaderatindex </span><span class="si">{0}</span><span class="s1"> </span><span class="si">{1}</span><span class="s1">@&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">msgid</span><span class="p">,</span> <span class="n">index</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vapi</span><span class="o">.</span><span class="n">_send_query</span><span class="p">(</span><span class="n">reqMsg</span><span class="p">,</span> <span class="s1">&#39;get_verify_sip_header&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">response</span> <span class="o">==</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{}</span>
        <span class="n">res_list</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">ret_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">ret_dict</span><span class="p">[</span><span class="s1">&#39;header&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">res_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">ret_dict</span><span class="p">[</span><span class="s1">&#39;value&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">res_list</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">ret_dict</span><span class="p">[</span><span class="s1">&#39;mode&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">res_list</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">ret_dict</span></div></div>


<div class="viewcode-block" id="MsgObject"><a class="viewcode-back" href="../../../api/tngpicommands.html#camelot.utils.rawendpoint_helper.MsgObject">[docs]</a><span class="k">class</span> <span class="nc">MsgObject</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">camelotconn</span><span class="p">,</span> <span class="n">msgstr</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vapi</span> <span class="o">=</span> <span class="n">camelotconn</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">msgid</span> <span class="o">=</span> <span class="n">msgstr</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">createmsg</span> <span class="o">=</span> <span class="s1">&#39;getsipmessage </span><span class="si">{0}</span><span class="s1">@&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">msgid</span><span class="p">)</span>
        <span class="n">hex_len</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vapi</span><span class="o">.</span><span class="n">_get_message_length_hex</span><span class="p">(</span><span class="n">createmsg</span><span class="p">)</span>
        <span class="n">rawmessage</span> <span class="o">=</span> <span class="s1">&#39;f:00000000:</span><span class="si">{0}</span><span class="s1">:</span><span class="si">{1}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">hex_len</span><span class="p">,</span> <span class="n">createmsg</span><span class="p">)</span>
        <span class="n">with_new_line</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vapi</span><span class="o">.</span><span class="n">_camelot_query</span><span class="p">(</span><span class="n">rawmessage</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">with_new_line</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">with_new_line</span>

<div class="viewcode-block" id="MsgObject.add_sip_header"><a class="viewcode-back" href="../../../api/tngpicommands.html#camelot.utils.rawendpoint_helper.MsgObject.add_sip_header">[docs]</a>    <span class="k">def</span> <span class="nf">add_sip_header</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">headername</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Add given header to Raw message</span>

<span class="sd">        :parameter headername: name of header needs to be added</span>
<span class="sd">        :parameter value: value of header given in headername</span>

<span class="sd">        :returns: returns header_id of added header</span>

<span class="sd">        &gt;&gt;&gt; msg = self.srv.create_message()</span>
<span class="sd">        &gt;&gt;&gt; msg.add_sip_header(&#39;To&#39;,&#39;&lt;sip:[sip.raw.dn]@[sip.cm.cm1ip]&gt;&#39;)</span>

<span class="sd">        Above example will add new &#39;To&#39; Header to raw message.</span>
<span class="sd">        Header will be added at the end of similar headers, so</span>
<span class="sd">        if there are &#39;To&#39; Headers already present, header added</span>
<span class="sd">        above will be added at the end</span>
<span class="sd">        While creating message or adding sip header all configuration</span>
<span class="sd">        parameters can be used. Along with them few special purpose</span>
<span class="sd">        configuration parameters are also present\n</span>
<span class="sd">        1) auto.sip.call.newcallid: This tag will generate a new call-id\n</span>
<span class="sd">        2) auto.sip.time.currtime: This will be used to generate value</span>
<span class="sd">                                    for Date field\n</span>
<span class="sd">        3) auto.sip.signalling.port: This port will place endpoint signalling</span>
<span class="sd">                                    port, used in via and contact\n</span>
<span class="sd">        4) auto.sip.call.contentlen: This will calculate length of SDP and put</span>
<span class="sd">                                    that value here\n</span>
<span class="sd">        5) auto.sip.via.branch: This will generate new branch for via\n</span>
<span class="sd">        6) auto.sip.tag: This will generate new tag which can be used in To or</span>
<span class="sd">                                    From\n</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">reqMsg</span> <span class="o">=</span> <span class="s1">&#39;addsipheader </span><span class="si">{0}</span><span class="s1"> 0 </span><span class="si">{1}</span><span class="s1"> 0 </span><span class="si">{2}</span><span class="s1">@&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msgid</span><span class="p">,</span> <span class="n">headername</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">vapi</span><span class="o">.</span><span class="n">_send_message</span><span class="p">(</span><span class="n">reqMsg</span><span class="p">,</span> <span class="s1">&#39;add_sip_header&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="MsgObject.remove_sip_header"><a class="viewcode-back" href="../../../api/tngpicommands.html#camelot.utils.rawendpoint_helper.MsgObject.remove_sip_header">[docs]</a>    <span class="k">def</span> <span class="nf">remove_sip_header</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">header</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Remove given header from Raw message</span>

<span class="sd">        :parameter header: header name or header id to be removed</span>

<span class="sd">        &gt;&gt;&gt; msg = self.srv.create_message(SipTemplateMethods.SIP_INVITE)</span>
<span class="sd">        &gt;&gt;&gt; to_id = msg.add_sip_header(&#39;To&#39;,&#39;&lt;sip:12345@[sip.cm.cm1ip]&gt;&#39;)</span>
<span class="sd">        &gt;&gt;&gt; msg.remove_sip_header(to_id)</span>
<span class="sd">        &gt;&gt;&gt; msg.remove_sip_header(&#39;From&#39;)</span>

<span class="sd">        In above example</span>
<span class="sd">        First remove_sip_header will remove To header pointed by to_id</span>
<span class="sd">        if there are more &#39;To&#39; headers added then also only the header</span>
<span class="sd">        pointed by to_id will be removed</span>
<span class="sd">        Second remove_sip_header will remove all &#39;From&#39; header,</span>
<span class="sd">        i.e. if there are more than one &#39;From&#39; header present all will be</span>
<span class="sd">        removed</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">reqMsg</span> <span class="o">=</span> <span class="s1">&#39;removesipheader </span><span class="si">{0}</span><span class="s1"> </span><span class="si">{1}</span><span class="s1"> @&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">msgid</span><span class="p">,</span> <span class="n">header</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">vapi</span><span class="o">.</span><span class="n">_send_message</span><span class="p">(</span><span class="n">reqMsg</span><span class="p">,</span> <span class="s1">&#39;remove_sip_header&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="MsgObject.get_sip_header"><a class="viewcode-back" href="../../../api/tngpicommands.html#camelot.utils.rawendpoint_helper.MsgObject.get_sip_header">[docs]</a>    <span class="k">def</span> <span class="nf">get_sip_header</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">headername</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Get value(s) for given header</span>

<span class="sd">        :parameter header: header name or header id to be retrieved</span>

<span class="sd">        :returns: return dictionary with header_id as key and</span>
<span class="sd">                    header value as values</span>

<span class="sd">        &gt;&gt;&gt; msg = self.srv.create_message(SipTemplateMethods.SIP_INVITE)</span>
<span class="sd">        &gt;&gt;&gt; to_id = msg.add_sip_header(&#39;To&#39;,&#39;&lt;sip:12345@[sip.cm.cm1ip]&gt;&#39;)</span>
<span class="sd">        &gt;&gt;&gt; msg.get_sip_header(to_id)</span>
<span class="sd">        &gt;&gt;&gt; msg.get_sip_header(&#39;Via&#39;)</span>

<span class="sd">        In above example</span>
<span class="sd">        First get_sip_header will retrieve &#39;To&#39; header pointed by to_id</span>
<span class="sd">        if there are more &#39;To&#39; headers added then also the header</span>
<span class="sd">        pointed by to_id will be retrieved</span>
<span class="sd">        Second get_sip_header will retrieve all &#39;Via&#39; header,</span>
<span class="sd">        i.e. if there are more than one &#39;Via&#39; header present all will be</span>
<span class="sd">        retrieved</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">ret_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">reqMsg</span> <span class="o">=</span> <span class="s1">&#39;getsipheader </span><span class="si">{0}</span><span class="s1"> </span><span class="si">{1}</span><span class="s1">@&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">msgid</span><span class="p">,</span> <span class="n">headername</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vapi</span><span class="o">.</span><span class="n">_send_query</span><span class="p">(</span><span class="n">reqMsg</span><span class="p">,</span> <span class="s1">&#39;get_sip_header&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">response</span> <span class="ow">or</span> <span class="n">response</span> <span class="o">==</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{}</span>

        <span class="n">res_list</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;{&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">res_list</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">res_list</span><span class="p">)):</span>
                <span class="n">res_list</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">res_list</span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;}&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">res_list</span><span class="p">[</span><span class="n">x</span><span class="p">]:</span>
                    <span class="n">hdr</span> <span class="o">=</span> <span class="n">res_list</span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="n">ret_dict</span><span class="p">[</span><span class="n">hdr</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="n">hdr</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">ret_dict</span>

        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        createmsg = &#39;getsipheader&#39; + &#39; &#39; + self.msgid + &#39; &#39; + headername + &#39;@&#39;</span>
<span class="sd">        hex_len = self.vapi.get_message_length_hex(createmsg)</span>
<span class="sd">        rawmessage = &#39;f:&#39; + &#39;00000000:&#39; + hex_len + &#39;:&#39; + createmsg</span>
<span class="sd">        with_new_line = self.vapi._camelot_query(rawmessage)</span>
<span class="sd">        if with_new_line:</span>
<span class="sd">                err_list = with_new_line.split(&quot;:&quot;, 3)</span>
<span class="sd">                if err_list[3] == &quot;{}&quot;:</span>
<span class="sd">                    return ret_dict</span>
<span class="sd">                res_list = with_new_line.split(&quot;{&quot;)</span>
<span class="sd">                if res_list:</span>
<span class="sd">                    for x in range(1, len(res_list)):</span>
<span class="sd">                        res_list[x] = res_list[x].replace(&quot;}&quot;, &quot; &quot;)</span>
<span class="sd">                        if res_list[x]:</span>
<span class="sd">                            hdr = res_list[x].split(&quot;\n&quot;)</span>
<span class="sd">                            ret_dict[hdr[0]] = hdr[1]</span>

<span class="sd">                if ret_dict:</span>
<span class="sd">                    return ret_dict</span>
<span class="sd">                else:</span>
<span class="sd">                    log.error(&#39;Not able to parse Header&#39;)</span>
<span class="sd">        else:</span>
<span class="sd">            log.error(&#39;Connection to Camelot failed&#39;)</span>
<span class="sd">        &#39;&#39;&#39;</span></div>

<div class="viewcode-block" id="MsgObject.modify_sip_header"><a class="viewcode-back" href="../../../api/tngpicommands.html#camelot.utils.rawendpoint_helper.MsgObject.modify_sip_header">[docs]</a>    <span class="k">def</span> <span class="nf">modify_sip_header</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">header</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">exclude_tag</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Modify value for given header id</span>

<span class="sd">        :parameter header: header name or header id to be modified</span>
<span class="sd">        :parameter value: value of header given in header name</span>
<span class="sd">        :parameter exclude_tag: Exclude From/To tag from owerwritting</span>

<span class="sd">        &gt;&gt;&gt; msg = self.srv.create_message(SipTemplateMethods.SIP_INVITE)</span>
<span class="sd">        &gt;&gt;&gt; msg.modify_sip_header(&#39;To&#39;,&#39;&lt;sip:12345@[sip.cm.cm1ip]&gt;&#39;)</span>
<span class="sd">        &gt;&gt;&gt; from_dict = msg.get_sip_header(&#39;From&#39;)</span>
<span class="sd">        &gt;&gt;&gt; from_id = from_dict.keys[0]</span>
<span class="sd">        &gt;&gt;&gt; msg.modify_sip_header(from_id)</span>

<span class="sd">        In above example</span>
<span class="sd">        First modify_sip_header will modify all &#39;To&#39; headers to new value</span>
<span class="sd">        Second modify_sip_header will modify from header pointed by from_id</span>

<span class="sd">        &gt;&gt;&gt; msg.modify_sip_header(&#39;From&#39;,&#39;newValue&#39;, exclude_tag=True)</span>

<span class="sd">        Above example will modify &#39;From&#39; header without replacing tag value.</span>
<span class="sd">        Here it will use old tag value as it is.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="n">exclude_tag</span><span class="p">:</span>
            <span class="n">exclude</span> <span class="o">=</span> <span class="s1">&#39;1&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">exclude</span> <span class="o">=</span> <span class="s1">&#39;0&#39;</span>

        <span class="n">reqMsg</span> <span class="o">=</span> <span class="s1">&#39;modifysipheader </span><span class="si">{0}</span><span class="s1"> </span><span class="si">{1}</span><span class="s1"> </span><span class="si">{2}</span><span class="s1"> </span><span class="si">{3}</span><span class="s1">@&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msgid</span><span class="p">,</span> <span class="n">header</span><span class="p">,</span> <span class="n">exclude</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">vapi</span><span class="o">.</span><span class="n">_send_message</span><span class="p">(</span><span class="n">reqMsg</span><span class="p">,</span> <span class="s1">&#39;modify_sip_header&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="MsgObject.add_sdp_attrib"><a class="viewcode-back" href="../../../api/tngpicommands.html#camelot.utils.rawendpoint_helper.MsgObject.add_sdp_attrib">[docs]</a>    <span class="k">def</span> <span class="nf">add_sdp_attrib</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">media</span><span class="p">,</span> <span class="n">typestr</span><span class="p">,</span> <span class="n">attrib</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Add SDP attrib in Raw Message</span>

<span class="sd">        :parameter media: Name of media in which attrib needs to be added</span>
<span class="sd">                            value will remain &#39;none&#39; for session level attribs</span>
<span class="sd">        :parameter typestr: Type of attribute added values can be &#39;a/m/o&#39; etc.</span>
<span class="sd">        :parameter attrib: Attribute which needs to be added, it can be blank</span>
<span class="sd">        :parameter value: Value of attribute to be added</span>

<span class="sd">        :returns: It returns attrib_id of newly added attribute</span>

<span class="sd">        Using this function a line in below format will be added</span>
<span class="sd">        under given media</span>

<span class="sd">        if attirb is not blank</span>
<span class="sd">            type=attrib:value</span>

<span class="sd">        if attrib is blank</span>
<span class="sd">            type=value</span>

<span class="sd">        &gt;&gt;&gt; msg = self.srv.create_message(SipTemplateMethods.SIP_INVITE,</span>
<span class="sd">                                            &#39;media&#39;=&#39;audio&#39;)</span>
<span class="sd">        &gt;&gt;&gt; msg.add_sdp_attrib(&#39;audio&#39;,&#39;a&#39;,&#39;ptime&#39;,&#39;20&#39;)</span>
<span class="sd">        &gt;&gt;&gt; msg.add_sdp_attrib(&#39;audio&#39;,&#39;a&#39;,&#39;&#39;,&#39;sendonly&#39;)</span>

<span class="sd">        In above example</span>
<span class="sd">        First add_sdp_attrib will add a=ptime:20 in audio</span>
<span class="sd">        Second add_sdp_attrib will add a=sendonly in audio</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">reqMsg</span> <span class="o">=</span> <span class="s1">&#39;addsdpheader </span><span class="si">{0}</span><span class="s1"> 0 </span><span class="si">{1}</span><span class="s1">:</span><span class="si">{2}</span><span class="s1">:</span><span class="si">{3}</span><span class="s1">:</span><span class="si">{4}</span><span class="s1">@&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msgid</span><span class="p">,</span> <span class="n">media</span><span class="p">,</span> <span class="n">typestr</span><span class="p">,</span> <span class="n">attrib</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">vapi</span><span class="o">.</span><span class="n">_send_message</span><span class="p">(</span><span class="n">reqMsg</span><span class="p">,</span> <span class="s1">&#39;add_sdp_attrib&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="MsgObject.add_sdp_attrib_after"><a class="viewcode-back" href="../../../api/tngpicommands.html#camelot.utils.rawendpoint_helper.MsgObject.add_sdp_attrib_after">[docs]</a>    <span class="k">def</span> <span class="nf">add_sdp_attrib_after</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attr_id</span><span class="p">,</span> <span class="n">media</span><span class="p">,</span> <span class="n">typestr</span><span class="p">,</span> <span class="n">attrib</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Add SDP attrib after a particular sdp attribute</span>

<span class="sd">        :parameter attr_id: ID of attribute after which we want to add this</span>
<span class="sd">                            attribute</span>
<span class="sd">        :parameter media: Name of media in which attrib needs to be added</span>
<span class="sd">                            value will remain &#39;none&#39; for session level attribs</span>
<span class="sd">        :parameter typestr: Type of attribute added values can be &#39;a/m/o&#39; etc.</span>
<span class="sd">        :parameter attrib: Attribute which needs to be added, it can be blank</span>
<span class="sd">        :parameter value: Value of attribute to be added</span>

<span class="sd">        :returns: It returns attrib_id of newly added attribute</span>

<span class="sd">        This will create a new attribute and place it after attribute</span>
<span class="sd">        referred using attr_id</span>

<span class="sd">        &gt;&gt;&gt; msg = self.srv.create_message(SipTemplateMethods.SIP_INVITE,</span>
<span class="sd">                                                        &#39;media&#39;=&#39;audio&#39;)</span>
<span class="sd">        &gt;&gt;&gt; attr_id = msg.add_sdp_attrib(&#39;audio&#39;,&#39;a&#39;,&#39;ptime&#39;,&#39;20&#39;)</span>
<span class="sd">        &gt;&gt;&gt; msg.add_sdp_attrib_after(attr_id,&#39;audio&#39;,&#39;a&#39;,&#39;&#39;,&#39;sendonly&#39;)</span>

<span class="sd">        In above example</span>
<span class="sd">        add_sdp_attrib will add a=ptime:20 in audio</span>
<span class="sd">        add_sdp_attrib_after will add a=sendonly in audio just after</span>
<span class="sd">        attribute added in line above</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">reqMsg</span> <span class="o">=</span> <span class="s1">&#39;addsdpheaderafter </span><span class="si">{0}</span><span class="s1"> 0 </span><span class="si">{1}</span><span class="s1"> </span><span class="si">{2}</span><span class="s1">:</span><span class="si">{3}</span><span class="s1">:</span><span class="si">{4}</span><span class="s1">:</span><span class="si">{5}</span><span class="s1">@&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msgid</span><span class="p">,</span> <span class="n">attr_id</span><span class="p">,</span> <span class="n">media</span><span class="p">,</span> <span class="n">typestr</span><span class="p">,</span> <span class="n">attrib</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">vapi</span><span class="o">.</span><span class="n">_send_message</span><span class="p">(</span><span class="n">reqMsg</span><span class="p">,</span> <span class="s1">&#39;add_sdp_attrib_after&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="MsgObject.modify_sdp_attrib"><a class="viewcode-back" href="../../../api/tngpicommands.html#camelot.utils.rawendpoint_helper.MsgObject.modify_sdp_attrib">[docs]</a>    <span class="k">def</span> <span class="nf">modify_sdp_attrib</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attr_id</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Modify SDP attribute pointed by attr_id.</span>

<span class="sd">        :parameter attr_id: ID of attribute after which we want to add this</span>
<span class="sd">                            attribute.</span>
<span class="sd">        :parameter value: New value to be placed after modification.</span>
<span class="sd">                          This function will modify existing attribute</span>

<span class="sd">        &gt;&gt;&gt; msg = self.srv.create_message(SipTemplateMethods.SIP_INVITE,</span>
<span class="sd">                                                        &#39;media&#39;=&#39;audio&#39;)</span>
<span class="sd">        &gt;&gt;&gt; attr_id = msg.add_sdp_attrib(&#39;audio&#39;,&#39;a&#39;,&#39;ptime&#39;,&#39;20&#39;)</span>
<span class="sd">        &gt;&gt;&gt; msg.modify_sdp_attrib(attr_id,&#39;50&#39;)</span>
<span class="sd">        In above example first call to add_sdp_attrib will add a new attribute</span>
<span class="sd">        And then call to modify_sdp_attrib will change its value to 50</span>
<span class="sd">        Making resultant attribute</span>
<span class="sd">        a=ptime:50</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">reqMsg</span> <span class="o">=</span> <span class="s1">&#39;modsdpheader </span><span class="si">{0}</span><span class="s1"> </span><span class="si">{1}</span><span class="s1"> </span><span class="si">{2}</span><span class="s1">@&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msgid</span><span class="p">,</span> <span class="n">attr_id</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">vapi</span><span class="o">.</span><span class="n">_send_message</span><span class="p">(</span><span class="n">reqMsg</span><span class="p">,</span> <span class="s1">&#39;modify_sdp_attrib&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="MsgObject.remove_sdp_attrib"><a class="viewcode-back" href="../../../api/tngpicommands.html#camelot.utils.rawendpoint_helper.MsgObject.remove_sdp_attrib">[docs]</a>    <span class="k">def</span> <span class="nf">remove_sdp_attrib</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attr_id</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Remove SDP attribute pointed by attr_id</span>

<span class="sd">        :parameter attr_id: ID of attribute to be removed</span>

<span class="sd">        This fucntion will remove attribute line</span>

<span class="sd">        &gt;&gt;&gt; msg = self.srv.create_message(SipTemplateMethods.SIP_INVITE,</span>
<span class="sd">                                                        &#39;media&#39;=&#39;audio&#39;)</span>
<span class="sd">        &gt;&gt;&gt; sdp = get_sdp_attrib(&#39;audio&#39;,&#39;a&#39;)</span>
<span class="sd">        &gt;&gt;&gt; for m in range(0, len(sdp)):</span>
<span class="sd">        &gt;&gt;&gt;    if sdp[m].value == &#39;sendrecv&#39;</span>
<span class="sd">        &gt;&gt;&gt;        msg.remove_sdp_attrib(sdp[m].sdpid)</span>
<span class="sd">        &gt;&gt;&gt;        break</span>

<span class="sd">        Above Example will remove sendrecv attrib</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">reqMsg</span> <span class="o">=</span> <span class="s1">&#39;removesdpheader </span><span class="si">{0}</span><span class="s1"> </span><span class="si">{1}</span><span class="s1">@&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">msgid</span><span class="p">,</span> <span class="n">attr_id</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">vapi</span><span class="o">.</span><span class="n">_send_message</span><span class="p">(</span><span class="n">reqMsg</span><span class="p">,</span> <span class="s1">&#39;remove_sdp_attrib&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="MsgObject.get_sdp_attrib"><a class="viewcode-back" href="../../../api/tngpicommands.html#camelot.utils.rawendpoint_helper.MsgObject.get_sdp_attrib">[docs]</a>    <span class="k">def</span> <span class="nf">get_sdp_attrib</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">media</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">typestr</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">attrib</span><span class="o">=</span><span class="s1">&#39;none&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Retrieve SDP attributes for given values</span>

<span class="sd">        :parameter media: Name of media for which attributes need to be</span>
<span class="sd">                            retrieved. If not provided or left blank will</span>
<span class="sd">                            return attribute for all media including session</span>
<span class="sd">                            level attributes</span>
<span class="sd">        :parameter typestr: Type of attribute. If not provided all types will</span>
<span class="sd">                            be considered</span>
<span class="sd">        :parameter attrib: Name of attribute. If not provided all attributes</span>
<span class="sd">                            will be considered</span>

<span class="sd">        :returns: It returns list of attributes matching given condition</span>

<span class="sd">        All parameters are optional.</span>

<span class="sd">        &gt;&gt;&gt; msg = self.srv.create_message(SipTemplateMethods.SIP_INVITE,</span>
<span class="sd">                                                        &#39;media&#39;=&#39;audio&#39;)</span>
<span class="sd">        &gt;&gt;&gt; sdp_audio = get_sdp_attrib(&#39;audio&#39;,&#39;a&#39;)</span>
<span class="sd">        &gt;&gt;&gt; sdp_all = get_sdp_attrib()</span>

<span class="sd">        First call to get_sdp_attrib will return all attributes of type &#39;a&#39;</span>
<span class="sd">        under audio</span>
<span class="sd">        Second call to get_sdp_attrib will return all attributes in SDP</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">media_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
        <span class="n">reqMsg</span> <span class="o">=</span> <span class="s1">&#39;getsdpheader </span><span class="si">{0}</span><span class="s1"> </span><span class="si">{1}</span><span class="s1">:</span><span class="si">{2}</span><span class="s1">:</span><span class="si">{3}</span><span class="s1">:</span><span class="si">{4}</span><span class="s1">@&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msgid</span><span class="p">,</span> <span class="n">media</span><span class="p">,</span> <span class="n">typestr</span><span class="p">,</span> <span class="n">attrib</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vapi</span><span class="o">.</span><span class="n">_send_query</span><span class="p">(</span><span class="n">reqMsg</span><span class="p">,</span> <span class="s1">&#39;get_sdp_attrib&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">response</span> <span class="o">==</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">media_list</span>

        <span class="n">res_list</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;{&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">res_list</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">res_list</span><span class="p">)):</span>
                <span class="n">res_list</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">res_list</span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;}&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
                <span class="n">hdr</span> <span class="o">=</span> <span class="n">res_list</span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">mediaidx</span> <span class="o">=</span> <span class="n">hdr</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">lineid</span> <span class="o">=</span> <span class="n">hdr</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">mediatype</span> <span class="o">=</span> <span class="n">hdr</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
                <span class="n">attrtype</span> <span class="o">=</span> <span class="n">hdr</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
                <span class="n">attr</span> <span class="o">=</span> <span class="n">hdr</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
                <span class="n">val</span> <span class="o">=</span> <span class="n">hdr</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
                <span class="n">sdpline</span> <span class="o">=</span> <span class="n">sdpLineObject</span><span class="p">(</span><span class="n">mediaidx</span><span class="p">,</span> <span class="n">lineid</span><span class="p">,</span> <span class="n">mediatype</span><span class="p">,</span> <span class="n">attrtype</span><span class="p">,</span>
                                        <span class="n">attr</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
                <span class="n">media_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sdpline</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">media_list</span>

        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        addsdpattrib = (&#39;getsdpheader&#39; + &#39; &#39; + self.msgid + &#39; &#39; + media + &#39;:&#39; +</span>
<span class="sd">                        typestr + &#39;:&#39; + attrib + &#39;@&#39;)</span>
<span class="sd">        hex_len = self.get_message_length_hex(addsdpattrib)</span>
<span class="sd">        rawmessage = &#39;f:&#39; + &#39;00000000:&#39; + hex_len + &#39;:&#39; + addsdpattrib</span>
<span class="sd">        with_new_line = self.vapi._camelot_query(rawmessage)</span>
<span class="sd">        if with_new_line:</span>
<span class="sd">            err_list = with_new_line.split(&#39;:&#39;, 3)</span>
<span class="sd">            if err_list[3] == &#39;{}&#39;:</span>
<span class="sd">                return media_list</span>
<span class="sd">            res_list = with_new_line.split(&#39;{&#39;)</span>
<span class="sd">            if res_list:</span>
<span class="sd">                for x in range(1, len(res_list)):</span>
<span class="sd">                    res_list[x] = res_list[x].replace(&#39;}&#39;, &#39; &#39;)</span>
<span class="sd">                    hdr = res_list[x].split(&#39;\n&#39;)</span>
<span class="sd">                    lineid = hdr[0]</span>
<span class="sd">                    mediatype = hdr[1]</span>
<span class="sd">                    attrtype = hdr[2]</span>
<span class="sd">                    attr = hdr[3]</span>
<span class="sd">                    val = hdr[4]</span>
<span class="sd">                    sdpline = sdpLineObject(lineid, mediatype, attrtype, attr,</span>
<span class="sd">                                            val)</span>
<span class="sd">                    media_list.append(sdpline)</span>

<span class="sd">                return media_list</span>
<span class="sd">            else:</span>
<span class="sd">                log.error(&#39;get_sdp_sttrib failed&#39;)</span>
<span class="sd">        else:</span>
<span class="sd">            log.error(&#39;Camelot request for sdp attr failed&#39;)</span>
<span class="sd">        &#39;&#39;&#39;</span></div>

<div class="viewcode-block" id="MsgObject.add_raw_body"><a class="viewcode-back" href="../../../api/tngpicommands.html#camelot.utils.rawendpoint_helper.MsgObject.add_raw_body">[docs]</a>    <span class="k">def</span> <span class="nf">add_raw_body</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msgType</span><span class="p">,</span> <span class="n">bodyStr</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Add body other than SDP</span>

<span class="sd">        :parameter msgType: type of message,</span>
<span class="sd">                            this will be used in Content-Type field</span>
<span class="sd">        :parameter bodyStr: actual body which will be added in message</span>

<span class="sd">        &gt;&gt;&gt; msgObj = self.srv.create_message(msgStr)</span>
<span class="sd">        &gt;&gt;&gt; msgObj.add_raw_body(msgType,bodyStr)</span>

<span class="sd">        Above example will create a message with headers generated using msgStr</span>
<span class="sd">        and bodyStr will be added as it is in body</span>
<span class="sd">        and given msgType will be added to Content-Type</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="n">reqMsg</span> <span class="o">=</span> <span class="s1">&#39;addrawbody </span><span class="si">{0}</span><span class="s1"> </span><span class="si">{1}</span><span class="s1"> </span><span class="si">{2}</span><span class="s1">@&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">msgid</span><span class="p">,</span> <span class="n">msgType</span><span class="p">,</span> <span class="n">bodyStr</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">vapi</span><span class="o">.</span><span class="n">_send_message</span><span class="p">(</span><span class="n">reqMsg</span><span class="p">,</span> <span class="s1">&#39;remove_sdp_attrib&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="MsgObject.remove_raw_body"><a class="viewcode-back" href="../../../api/tngpicommands.html#camelot.utils.rawendpoint_helper.MsgObject.remove_raw_body">[docs]</a>    <span class="k">def</span> <span class="nf">remove_raw_body</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Remove raw body if present and do nothing if raw body is not present</span>

<span class="sd">        &gt;&gt;&gt; msgObj = self.srv.create_message(msgStr)</span>
<span class="sd">        &gt;&gt;&gt; msgObj.remove_raw_body()</span>

<span class="sd">        In above example we are assuming that msgStr have rawbody included</span>
<span class="sd">        then call to remove_raw_body will remove that body</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">reqMsg</span> <span class="o">=</span> <span class="s1">&#39;removerawbody </span><span class="si">{0}</span><span class="s1">@&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">msgid</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">vapi</span><span class="o">.</span><span class="n">_send_message</span><span class="p">(</span><span class="n">reqMsg</span><span class="p">,</span> <span class="s1">&#39;remove_sdp_attrib&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="MsgObject.get_raw_body"><a class="viewcode-back" href="../../../api/tngpicommands.html#camelot.utils.rawendpoint_helper.MsgObject.get_raw_body">[docs]</a>    <span class="k">def</span> <span class="nf">get_raw_body</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Get raw body added earlier &#39;{}&#39; will be returned</span>
<span class="sd">        if no raw body is added</span>

<span class="sd">        :returns: It returns a string consisting of raw body of message</span>

<span class="sd">        &gt;&gt;&gt; msgObj = self.srv.create_message(msgStr)</span>
<span class="sd">        &gt;&gt;&gt; msgObj.add_raw_body(msgType,bodyStr)</span>
<span class="sd">        &gt;&gt;&gt; msgObj.get_raw_body()</span>

<span class="sd">        In above example get_raw_body will return a string consisting</span>
<span class="sd">        of raw body text</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="n">reqMsg</span> <span class="o">=</span> <span class="s1">&#39;getrawbody </span><span class="si">{0}</span><span class="s1">@&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">msgid</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">vapi</span><span class="o">.</span><span class="n">_send_query</span><span class="p">(</span><span class="n">reqMsg</span><span class="p">,</span> <span class="s1">&#39;get_sdp_attrib&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="MsgObject.get_sdp_lines_port0"><a class="viewcode-back" href="../../../api/tngpicommands.html#camelot.utils.rawendpoint_helper.MsgObject.get_sdp_lines_port0">[docs]</a>    <span class="k">def</span> <span class="nf">get_sdp_lines_port0</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sdp_list</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;get all mlines with its attribute lines having port 0.</span>

<span class="sd">        :parameter sdp_list: this is a list of sdp message returned by</span>
<span class="sd">         get_sdp_attrib().</span>

<span class="sd">        :returns: is a list of lists with mline having port 0 .</span>
<span class="sd">         contaning sdp objects m line and corresponding attribute lines.</span>
<span class="sd">         [[sdpLineObject1(mline),sdpLineObject1(atr1),sdpLineObject1(atr2)],</span>
<span class="sd">         [sdpLineObject2(mline),sdpLineObject2(atr1),sdpLineObject2(atr2)]]</span>

<span class="sd">        NOTE: This API can be used for Simulated Endpoints as well.</span>
<span class="sd">              i.e., the endpoint need not to be RawEndpoint.</span>


<span class="sd">        &gt;&gt;&gt; msgObj = self.srv.create_message(msgStr)</span>
<span class="sd">        &gt;&gt;&gt; sdplist =  msgObj.get_sdp_attrib()</span>
<span class="sd">        &gt;&gt;&gt; msgObj.get_sdp_lines_port0(sdplist)</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">sdp_element</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">port0_found</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">sdp_main_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">sdp_list</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">sdpLineObject</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">i</span><span class="o">.</span><span class="n">attrtype</span> <span class="o">==</span> <span class="s1">&#39;m&#39;</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">i</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;0&#39;</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">port0_found</span><span class="p">:</span>
                                <span class="n">sdp_main_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sdp_element</span><span class="p">)</span>
                                <span class="n">sdp_element</span> <span class="o">=</span> <span class="p">[]</span>
                            <span class="n">port0_found</span> <span class="o">=</span> <span class="kc">True</span>
                            <span class="n">sdp_element</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">port0_found</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="k">elif</span> <span class="n">port0_found</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">i</span><span class="o">.</span><span class="n">attrtype</span> <span class="o">==</span> <span class="s1">&#39;a&#39;</span><span class="p">:</span>
                            <span class="n">sdp_element</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;sdp passed is not an instance of sdpLineObject&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sdp_element</span><span class="p">):</span>
                <span class="n">sdp_main_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sdp_element</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s1">&#39;failed to extract reason:&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">sdp_main_list</span></div></div>


<div class="viewcode-block" id="sdpLineObject"><a class="viewcode-back" href="../../../api/tngpicommands.html#camelot.utils.rawendpoint_helper.sdpLineObject">[docs]</a><span class="k">class</span> <span class="nc">sdpLineObject</span><span class="p">:</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mediaidx</span><span class="p">,</span> <span class="n">lineid</span><span class="p">,</span> <span class="n">mediatype</span><span class="p">,</span> <span class="n">attrtype</span><span class="p">,</span> <span class="n">attr</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mediaidx</span> <span class="o">=</span> <span class="n">mediaidx</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sdpid</span> <span class="o">=</span> <span class="n">lineid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">media</span> <span class="o">=</span> <span class="n">mediatype</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">attrtype</span> <span class="o">=</span> <span class="n">attrtype</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">attr</span> <span class="o">=</span> <span class="n">attr</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span></div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">Camelot Python SDK v12.6.22.12.0.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" >Module code</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../../camelot.html" >camelot</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2013, Author.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.9.
    </div>
  </body>
</html>